(function(){"use strict";const an={context:void 0,registry:void 0},ln=(e,t)=>e===t,X=Symbol("solid-proxy"),lt=Symbol("solid-track"),Te={equals:ln};let ct=mt;const te=1,Se=2,ut={owned:null,cleanups:null,context:null,owner:null};var I=null;let Fe=null,C=null,B=null,Z=null,xe=0;function ft(e,t){const n=C,r=I,o=e.length===0,s=o?ut:{owned:null,cleanups:null,context:null,owner:t===void 0?r:t},i=o?e:()=>e(()=>R(()=>De(s)));I=s,C=null;try{return ie(i,!0)}finally{C=n,I=r}}function V(e,t){t=t?Object.assign({},Te,t):Te;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=o=>(typeof o=="function"&&(o=o(n.value)),pt(n,o));return[ht.bind(n),r]}function ne(e,t,n){const r=Ye(e,t,!1,te);ge(r)}function J(e,t,n){ct=mn;const r=Ye(e,t,!1,te);(!n||!n.render)&&(r.user=!0),Z?Z.push(r):ge(r)}function K(e,t,n){n=n?Object.assign({},Te,n):Te;const r=Ye(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,ge(r),ht.bind(r)}function Q(e){return ie(e,!1)}function R(e){if(C===null)return e();const t=C;C=null;try{return e()}finally{C=t}}function dt(e){J(()=>R(e))}function de(e){return I===null||(I.cleanups===null?I.cleanups=[e]:I.cleanups.push(e)),e}function gt(){return C}function cn(){return I}function un(e,t){const n=I,r=C;I=e,C=null;try{return ie(t,!0)}catch(o){Be(o)}finally{I=n,C=r}}function fn(e,t){const n=Symbol("context");return{id:n,Provider:yn(n),defaultValue:e}}function dn(e){let t;return(t=yt(I,e.id))!==void 0?t:e.defaultValue}function gn(e){const t=K(e),n=K(()=>ze(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function ht(){if(this.sources&&this.state)if(this.state===te)ge(this);else{const e=B;B=null,ie(()=>ke(this),!1),B=e}if(C){const e=this.observers?this.observers.length:0;C.sources?(C.sources.push(this),C.sourceSlots.push(e)):(C.sources=[this],C.sourceSlots=[e]),this.observers?(this.observers.push(C),this.observerSlots.push(C.sources.length-1)):(this.observers=[C],this.observerSlots=[C.sources.length-1])}return this.value}function pt(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&ie(()=>{for(let o=0;o<e.observers.length;o+=1){const s=e.observers[o],i=Fe&&Fe.running;i&&Fe.disposed.has(s),(i?!s.tState:!s.state)&&(s.pure?B.push(s):Z.push(s),s.observers&&bt(s)),i||(s.state=te)}if(B.length>1e6)throw B=[],new Error},!1)),t}function ge(e){if(!e.fn)return;De(e);const t=I,n=C,r=xe;C=I=e,hn(e,e.value,r),C=n,I=t}function hn(e,t,n){let r;try{r=e.fn(t)}catch(o){return e.pure&&(e.state=te,e.owned&&e.owned.forEach(De),e.owned=null),e.updatedAt=n+1,Be(o)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?pt(e,r):e.value=r,e.updatedAt=n)}function Ye(e,t,n,r=te,o){const s={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:I,context:null,pure:n};return I===null||I!==ut&&(I.owned?I.owned.push(s):I.owned=[s]),s}function Me(e){if(e.state===0)return;if(e.state===Se)return ke(e);if(e.suspense&&R(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<xe);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===te)ge(e);else if(e.state===Se){const r=B;B=null,ie(()=>ke(e,t[0]),!1),B=r}}function ie(e,t){if(B)return e();let n=!1;t||(B=[]),Z?n=!0:Z=[],xe++;try{const r=e();return pn(n),r}catch(r){n||(Z=null),B=null,Be(r)}}function pn(e){if(B&&(mt(B),B=null),e)return;const t=Z;Z=null,t.length&&ie(()=>ct(t),!1)}function mt(e){for(let t=0;t<e.length;t++)Me(e[t])}function mn(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:Me(r)}for(t=0;t<n;t++)Me(e[t])}function ke(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const o=r.state;o===te?r!==t&&(!r.updatedAt||r.updatedAt<xe)&&Me(r):o===Se&&ke(r,t)}}}function bt(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Se,n.pure?B.push(n):Z.push(n),n.observers&&bt(n))}}function De(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),o=n.observers;if(o&&o.length){const s=o.pop(),i=n.observerSlots.pop();r<o.length&&(s.sourceSlots[i]=r,o[r]=s,n.observerSlots[r]=i)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)De(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function bn(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function Be(e,t=I){throw bn(e)}function yt(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:yt(e.owner,t):void 0}function ze(e){if(typeof e=="function"&&!e.length)return ze(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=ze(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function yn(e,t){return function(r){let o;return ne(()=>o=R(()=>(I.context={[e]:r.value},gn(()=>r.children))),void 0),o}}function z(e,t){return R(()=>e(t||{}))}function Oe(){return!0}const vn={get(e,t,n){return t===X?n:e.get(t)},has(e,t){return t===X?!0:e.has(t)},set:Oe,deleteProperty:Oe,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Oe,deleteProperty:Oe}},ownKeys(e){return e.keys()}};function qe(e){return(e=typeof e=="function"?e():e)?e:{}}function wn(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function $n(...e){let t=!1;for(let s=0;s<e.length;s++){const i=e[s];t=t||!!i&&X in i,e[s]=typeof i=="function"?(t=!0,K(i)):i}if(t)return new Proxy({get(s){for(let i=e.length-1;i>=0;i--){const l=qe(e[i])[s];if(l!==void 0)return l}},has(s){for(let i=e.length-1;i>=0;i--)if(s in qe(e[i]))return!0;return!1},keys(){const s=[];for(let i=0;i<e.length;i++)s.push(...Object.keys(qe(e[i])));return[...new Set(s)]}},vn);const n={},r={},o=new Set;for(let s=e.length-1;s>=0;s--){const i=e[s];if(!i)continue;const l=Object.getOwnPropertyNames(i);for(let u=0,g=l.length;u<g;u++){const f=l[u];if(f==="__proto__"||f==="constructor")continue;const m=Object.getOwnPropertyDescriptor(i,f);if(!o.has(f))m.get?(o.add(f),Object.defineProperty(n,f,{enumerable:!0,configurable:!0,get:wn.bind(r[f]=[m.get.bind(i)])})):(m.value!==void 0&&o.add(f),n[f]=m.value);else{const v=r[f];v?m.get?v.push(m.get.bind(i)):m.value!==void 0&&v.push(()=>m.value):n[f]===void 0&&(n[f]=m.value)}}}return n}const Tn=e=>`Stale read from <${e}>.`;function vt(e){const t=e.keyed,n=K(()=>e.when,void 0,{equals:(r,o)=>t?r===o:!r==!o});return K(()=>{const r=n();if(r){const o=e.children;return typeof o=="function"&&o.length>0?R(()=>o(t?r:()=>{if(!R(n))throw Tn("Show");return e.when})):o}return e.fallback},void 0,void 0)}function Sn(e,t,n){let r=n.length,o=t.length,s=r,i=0,l=0,u=t[o-1].nextSibling,g=null;for(;i<o||l<s;){if(t[i]===n[l]){i++,l++;continue}for(;t[o-1]===n[s-1];)o--,s--;if(o===i){const f=s<r?l?n[l-1].nextSibling:n[s-l]:u;for(;l<s;)e.insertBefore(n[l++],f)}else if(s===l)for(;i<o;)(!g||!g.has(t[i]))&&t[i].remove(),i++;else if(t[i]===n[s-1]&&n[l]===t[o-1]){const f=t[--o].nextSibling;e.insertBefore(n[l++],t[i++].nextSibling),e.insertBefore(n[--s],f),t[o]=n[s]}else{if(!g){g=new Map;let m=l;for(;m<s;)g.set(n[m],m++)}const f=g.get(t[i]);if(f!=null)if(l<f&&f<s){let m=i,v=1,$;for(;++m<o&&m<s&&!(($=g.get(t[m]))==null||$!==f+v);)v++;if(v>f-l){const S=t[i];for(;l<f;)e.insertBefore(n[l++],S)}else e.replaceChild(n[l++],t[i++])}else i++;else t[i++].remove()}}}const wt="_$DX_DELEGATE";function xn(e,t,n,r={}){let o;return ft(s=>{o=s,t===document?e():oe(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{o(),t.textContent=""}}function re(e,t,n){let r;const o=()=>{const i=document.createElement("template");return i.innerHTML=e,n?i.content.firstChild.firstChild:i.content.firstChild},s=t?()=>R(()=>document.importNode(r||(r=o()),!0)):()=>(r||(r=o())).cloneNode(!0);return s.cloneNode=s,s}function We(e,t=window.document){const n=t[wt]||(t[wt]=new Set);for(let r=0,o=e.length;r<o;r++){const s=e[r];n.has(s)||(n.add(s),t.addEventListener(s,On))}}function Mn(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function kn(e,t){t==null?e.removeAttribute("class"):e.className=t}function Dn(e,t,n){if(!t)return n?Mn(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let o,s;for(s in n)t[s]==null&&r.removeProperty(s),delete n[s];for(s in t)o=t[s],o!==n[s]&&(r.setProperty(s,o),n[s]=o);return n}function $t(e,t,n){return R(()=>e(t,n))}function oe(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return Ae(e,t,r,n);ne(o=>Ae(e,t(),o,n),r)}function On(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const r=n[t];if(r&&!n.disabled){const o=n[`${t}Data`];if(o!==void 0?r.call(n,o,e):r.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function Ae(e,t,n,r,o){for(;typeof n=="function";)n=n();if(t===n)return n;const s=typeof t,i=r!==void 0;if(e=i&&n[0]&&n[0].parentNode||e,s==="string"||s==="number")if(s==="number"&&(t=t.toString()),i){let l=n[0];l&&l.nodeType===3?l.data=t:l=document.createTextNode(t),n=ce(e,n,r,l)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||s==="boolean")n=ce(e,n,r);else{if(s==="function")return ne(()=>{let l=t();for(;typeof l=="function";)l=l();n=Ae(e,l,n,r)}),()=>n;if(Array.isArray(t)){const l=[],u=n&&Array.isArray(n);if(He(l,t,n,o))return ne(()=>n=Ae(e,l,n,r,!0)),()=>n;if(l.length===0){if(n=ce(e,n,r),i)return n}else u?n.length===0?Tt(e,l,r):Sn(e,n,l):(n&&ce(e),Tt(e,l));n=l}else if(t.nodeType){if(Array.isArray(n)){if(i)return n=ce(e,n,r,t);ce(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}else console.warn("Unrecognized value. Skipped inserting",t)}return n}function He(e,t,n,r){let o=!1;for(let s=0,i=t.length;s<i;s++){let l=t[s],u=n&&n[s],g;if(!(l==null||l===!0||l===!1))if((g=typeof l)=="object"&&l.nodeType)e.push(l);else if(Array.isArray(l))o=He(e,l,u)||o;else if(g==="function")if(r){for(;typeof l=="function";)l=l();o=He(e,Array.isArray(l)?l:[l],Array.isArray(u)?u:[u])||o}else e.push(l),o=!0;else{const f=String(l);u&&u.nodeType===3&&u.data===f?e.push(u):e.push(document.createTextNode(f))}}return o}function Tt(e,t,n=null){for(let r=0,o=t.length;r<o;r++)e.insertBefore(t[r],n)}function ce(e,t,n,r){if(n===void 0)return e.textContent="";const o=r||document.createTextNode("");if(t.length){let s=!1;for(let i=t.length-1;i>=0;i--){const l=t[i];if(o!==l){const u=l.parentNode===e;!s&&!i?u?e.replaceChild(o,l):e.insertBefore(o,n):u&&l.remove()}else s=!0}}else e.insertBefore(o,n);return[o]}const An="http://www.w3.org/2000/svg";function _n(e,t=!1){return t?document.createElementNS(An,e):document.createElement(e)}function En(e){const{useShadow:t}=e,n=document.createTextNode(""),r=()=>e.mount||document.body,o=cn();let s,i=!!an.context;return J(()=>{s||(s=un(o,()=>K(()=>e.children)));const l=r();if(l instanceof HTMLHeadElement){const[u,g]=V(!1),f=()=>g(!0);ft(m=>oe(l,()=>u()?m():s(),null)),de(f)}else{const u=_n(e.isSVG?"g":"div",e.isSVG),g=t&&u.attachShadow?u.attachShadow({mode:"open"}):u;Object.defineProperty(u,"_$host",{get(){return n.parentNode},configurable:!0}),oe(g,s),l.appendChild(u),e.ref&&e.ref(u),de(()=>l.removeChild(u))}},void 0,{render:!i}),n}var Ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function _e(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var St={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ge,function(){var n=1e3,r=6e4,o=36e5,s="millisecond",i="second",l="minute",u="hour",g="day",f="week",m="month",v="quarter",$="year",S="date",y="Invalid Date",M=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,N=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(T){var a=["th","st","nd","rd"],c=T%100;return"["+T+(a[(c-20)%10]||a[c]||a[0])+"]"}},E=function(T,a,c){var d=String(T);return!d||d.length>=a?T:""+Array(a+1-d.length).join(c)+T},j={s:E,z:function(T){var a=-T.utcOffset(),c=Math.abs(a),d=Math.floor(c/60),h=c%60;return(a<=0?"+":"-")+E(d,2,"0")+":"+E(h,2,"0")},m:function T(a,c){if(a.date()<c.date())return-T(c,a);var d=12*(c.year()-a.year())+(c.month()-a.month()),h=a.clone().add(d,m),b=c-h<0,p=a.clone().add(d+(b?-1:1),m);return+(-(d+(c-h)/(b?h-p:p-h))||0)},a:function(T){return T<0?Math.ceil(T)||0:Math.floor(T)},p:function(T){return{M:m,y:$,w:f,d:g,D:S,h:u,m:l,s:i,ms:s,Q:v}[T]||String(T||"").toLowerCase().replace(/s$/,"")},u:function(T){return T===void 0}},D="en",L={};L[D]=_;var U=function(T){return T instanceof G},q=function T(a,c,d){var h;if(!a)return D;if(typeof a=="string"){var b=a.toLowerCase();L[b]&&(h=b),c&&(L[b]=c,h=b);var p=a.split("-");if(!h&&p.length>1)return T(p[0])}else{var w=a.name;L[w]=a,h=w}return!d&&h&&(D=h),h||!d&&D},O=function(T,a){if(U(T))return T.clone();var c=typeof a=="object"?a:{};return c.date=T,c.args=arguments,new G(c)},k=j;k.l=q,k.i=U,k.w=function(T,a){return O(T,{locale:a.$L,utc:a.$u,x:a.$x,$offset:a.$offset})};var G=function(){function T(c){this.$L=q(c.locale,null,!0),this.parse(c)}var a=T.prototype;return a.parse=function(c){this.$d=function(d){var h=d.date,b=d.utc;if(h===null)return new Date(NaN);if(k.u(h))return new Date;if(h instanceof Date)return new Date(h);if(typeof h=="string"&&!/Z$/i.test(h)){var p=h.match(M);if(p){var w=p[2]-1||0,x=(p[7]||"0").substring(0,3);return b?new Date(Date.UTC(p[1],w,p[3]||1,p[4]||0,p[5]||0,p[6]||0,x)):new Date(p[1],w,p[3]||1,p[4]||0,p[5]||0,p[6]||0,x)}}return new Date(h)}(c),this.$x=c.x||{},this.init()},a.init=function(){var c=this.$d;this.$y=c.getFullYear(),this.$M=c.getMonth(),this.$D=c.getDate(),this.$W=c.getDay(),this.$H=c.getHours(),this.$m=c.getMinutes(),this.$s=c.getSeconds(),this.$ms=c.getMilliseconds()},a.$utils=function(){return k},a.isValid=function(){return this.$d.toString()!==y},a.isSame=function(c,d){var h=O(c);return this.startOf(d)<=h&&h<=this.endOf(d)},a.isAfter=function(c,d){return O(c)<this.startOf(d)},a.isBefore=function(c,d){return this.endOf(d)<O(c)},a.$g=function(c,d,h){return k.u(c)?this[d]:this.set(h,c)},a.unix=function(){return Math.floor(this.valueOf()/1e3)},a.valueOf=function(){return this.$d.getTime()},a.startOf=function(c,d){var h=this,b=!!k.u(d)||d,p=k.p(c),w=function(le,H){var se=k.w(h.$u?Date.UTC(h.$y,H,le):new Date(h.$y,H,le),h);return b?se:se.endOf(g)},x=function(le,H){return k.w(h.toDate()[le].apply(h.toDate("s"),(b?[0,0,0,0]:[23,59,59,999]).slice(H)),h)},A=this.$W,P=this.$M,W=this.$D,ee="set"+(this.$u?"UTC":"");switch(p){case $:return b?w(1,0):w(31,11);case m:return b?w(1,P):w(0,P+1);case f:var ae=this.$locale().weekStart||0,we=(A<ae?A+7:A)-ae;return w(b?W-we:W+(6-we),P);case g:case S:return x(ee+"Hours",0);case u:return x(ee+"Minutes",1);case l:return x(ee+"Seconds",2);case i:return x(ee+"Milliseconds",3);default:return this.clone()}},a.endOf=function(c){return this.startOf(c,!1)},a.$set=function(c,d){var h,b=k.p(c),p="set"+(this.$u?"UTC":""),w=(h={},h[g]=p+"Date",h[S]=p+"Date",h[m]=p+"Month",h[$]=p+"FullYear",h[u]=p+"Hours",h[l]=p+"Minutes",h[i]=p+"Seconds",h[s]=p+"Milliseconds",h)[b],x=b===g?this.$D+(d-this.$W):d;if(b===m||b===$){var A=this.clone().set(S,1);A.$d[w](x),A.init(),this.$d=A.set(S,Math.min(this.$D,A.daysInMonth())).$d}else w&&this.$d[w](x);return this.init(),this},a.set=function(c,d){return this.clone().$set(c,d)},a.get=function(c){return this[k.p(c)]()},a.add=function(c,d){var h,b=this;c=Number(c);var p=k.p(d),w=function(P){var W=O(b);return k.w(W.date(W.date()+Math.round(P*c)),b)};if(p===m)return this.set(m,this.$M+c);if(p===$)return this.set($,this.$y+c);if(p===g)return w(1);if(p===f)return w(7);var x=(h={},h[l]=r,h[u]=o,h[i]=n,h)[p]||1,A=this.$d.getTime()+c*x;return k.w(A,this)},a.subtract=function(c,d){return this.add(-1*c,d)},a.format=function(c){var d=this,h=this.$locale();if(!this.isValid())return h.invalidDate||y;var b=c||"YYYY-MM-DDTHH:mm:ssZ",p=k.z(this),w=this.$H,x=this.$m,A=this.$M,P=h.weekdays,W=h.months,ee=h.meridiem,ae=function(H,se,$e,Ue){return H&&(H[se]||H(d,b))||$e[se].slice(0,Ue)},we=function(H){return k.s(w%12||12,H,"0")},le=ee||function(H,se,$e){var Ue=H<12?"AM":"PM";return $e?Ue.toLowerCase():Ue};return b.replace(N,function(H,se){return se||function($e){switch($e){case"YY":return String(d.$y).slice(-2);case"YYYY":return k.s(d.$y,4,"0");case"M":return A+1;case"MM":return k.s(A+1,2,"0");case"MMM":return ae(h.monthsShort,A,W,3);case"MMMM":return ae(W,A);case"D":return d.$D;case"DD":return k.s(d.$D,2,"0");case"d":return String(d.$W);case"dd":return ae(h.weekdaysMin,d.$W,P,2);case"ddd":return ae(h.weekdaysShort,d.$W,P,3);case"dddd":return P[d.$W];case"H":return String(w);case"HH":return k.s(w,2,"0");case"h":return we(1);case"hh":return we(2);case"a":return le(w,x,!0);case"A":return le(w,x,!1);case"m":return String(x);case"mm":return k.s(x,2,"0");case"s":return String(d.$s);case"ss":return k.s(d.$s,2,"0");case"SSS":return k.s(d.$ms,3,"0");case"Z":return p}return null}(H)||p.replace(":","")})},a.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},a.diff=function(c,d,h){var b,p=this,w=k.p(d),x=O(c),A=(x.utcOffset()-this.utcOffset())*r,P=this-x,W=function(){return k.m(p,x)};switch(w){case $:b=W()/12;break;case m:b=W();break;case v:b=W()/3;break;case f:b=(P-A)/6048e5;break;case g:b=(P-A)/864e5;break;case u:b=P/o;break;case l:b=P/r;break;case i:b=P/n;break;default:b=P}return h?b:k.a(b)},a.daysInMonth=function(){return this.endOf(m).$D},a.$locale=function(){return L[this.$L]},a.locale=function(c,d){if(!c)return this.$L;var h=this.clone(),b=q(c,d,!0);return b&&(h.$L=b),h},a.clone=function(){return k.w(this.$d,this)},a.toDate=function(){return new Date(this.valueOf())},a.toJSON=function(){return this.isValid()?this.toISOString():null},a.toISOString=function(){return this.$d.toISOString()},a.toString=function(){return this.$d.toUTCString()},T}(),at=G.prototype;return O.prototype=at,[["$ms",s],["$s",i],["$m",l],["$H",u],["$W",g],["$M",m],["$y",$],["$D",S]].forEach(function(T){at[T[1]]=function(a){return this.$g(a,T[0],T[1])}}),O.extend=function(T,a){return T.$i||(T(a,G,O),T.$i=!0),O},O.locale=q,O.isDayjs=U,O.unix=function(T){return O(1e3*T)},O.en=L[D],O.Ls=L,O.p={},O})})(St);var Cn=St.exports;const Ve=_e(Cn);var xt={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ge,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(o,s,i){var l,u=function(v,$,S){S===void 0&&(S={});var y=new Date(v),M=function(N,_){_===void 0&&(_={});var E=_.timeZoneName||"short",j=N+"|"+E,D=r[j];return D||(D=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:N,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:E}),r[j]=D),D}($,S);return M.formatToParts(y)},g=function(v,$){for(var S=u(v,$),y=[],M=0;M<S.length;M+=1){var N=S[M],_=N.type,E=N.value,j=n[_];j>=0&&(y[j]=parseInt(E,10))}var D=y[3],L=D===24?0:D,U=y[0]+"-"+y[1]+"-"+y[2]+" "+L+":"+y[4]+":"+y[5]+":000",q=+v;return(i.utc(U).valueOf()-(q-=q%1e3))/6e4},f=s.prototype;f.tz=function(v,$){v===void 0&&(v=l);var S=this.utcOffset(),y=this.toDate(),M=y.toLocaleString("en-US",{timeZone:v}),N=Math.round((y-new Date(M))/1e3/60),_=i(M).$set("millisecond",this.$ms).utcOffset(15*-Math.round(y.getTimezoneOffset()/15)-N,!0);if($){var E=_.utcOffset();_=_.add(S-E,"minute")}return _.$x.$timezone=v,_},f.offsetName=function(v){var $=this.$x.$timezone||i.tz.guess(),S=u(this.valueOf(),$,{timeZoneName:v}).find(function(y){return y.type.toLowerCase()==="timezonename"});return S&&S.value};var m=f.startOf;f.startOf=function(v,$){if(!this.$x||!this.$x.$timezone)return m.call(this,v,$);var S=i(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return m.call(S,v,$).tz(this.$x.$timezone,!0)},i.tz=function(v,$,S){var y=S&&$,M=S||$||l,N=g(+i(),M);if(typeof v!="string")return i(v).tz(M);var _=function(L,U,q){var O=L-60*U*1e3,k=g(O,q);if(U===k)return[O,U];var G=g(O-=60*(k-U)*1e3,q);return k===G?[O,k]:[L-60*Math.min(k,G)*1e3,Math.max(k,G)]}(i.utc(v,y).valueOf(),N,M),E=_[0],j=_[1],D=i(E).utcOffset(j);return D.$x.$timezone=M,D},i.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},i.tz.setDefault=function(v){l=v}}})})(xt);var In=xt.exports;const Ln=_e(In);var Mt={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ge,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,o=/([+-]|\d\d)/g;return function(s,i,l){var u=i.prototype;l.utc=function(y){var M={date:y,utc:!0,args:arguments};return new i(M)},u.utc=function(y){var M=l(this.toDate(),{locale:this.$L,utc:!0});return y?M.add(this.utcOffset(),n):M},u.local=function(){return l(this.toDate(),{locale:this.$L,utc:!1})};var g=u.parse;u.parse=function(y){y.utc&&(this.$u=!0),this.$utils().u(y.$offset)||(this.$offset=y.$offset),g.call(this,y)};var f=u.init;u.init=function(){if(this.$u){var y=this.$d;this.$y=y.getUTCFullYear(),this.$M=y.getUTCMonth(),this.$D=y.getUTCDate(),this.$W=y.getUTCDay(),this.$H=y.getUTCHours(),this.$m=y.getUTCMinutes(),this.$s=y.getUTCSeconds(),this.$ms=y.getUTCMilliseconds()}else f.call(this)};var m=u.utcOffset;u.utcOffset=function(y,M){var N=this.$utils().u;if(N(y))return this.$u?0:N(this.$offset)?m.call(this):this.$offset;if(typeof y=="string"&&(y=function(D){D===void 0&&(D="");var L=D.match(r);if(!L)return null;var U=(""+L[0]).match(o)||["-",0,0],q=U[0],O=60*+U[1]+ +U[2];return O===0?0:q==="+"?O:-O}(y),y===null))return this;var _=Math.abs(y)<=16?60*y:y,E=this;if(M)return E.$offset=_,E.$u=y===0,E;if(y!==0){var j=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(E=this.local().add(_+j,n)).$offset=_,E.$x.$localOffset=j}else E=this.utc();return E};var v=u.format;u.format=function(y){var M=y||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return v.call(this,M)},u.valueOf=function(){var y=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*y},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var $=u.toDate;u.toDate=function(y){return y==="s"&&this.$offset?l(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():$.call(this)};var S=u.diff;u.diff=function(y,M,N){if(y&&this.$u===y.$u)return S.call(this,y,M,N);var _=this.local(),E=l(y).local();return S.call(_,E,M,N)}}})})(Mt);var Pn=Mt.exports;const Nn=_e(Pn);Ve.extend(Nn),Ve.extend(Ln);const kt={offset:180,region:"Asia",location:"Kuwait"};function Ee(){return Ve.tz(new Date,`${kt.region}/${kt.location}`).format("DD.MM.YYYY")}async function Dt(e=1e3){return new Promise(t=>setTimeout(t,e))}function jn(e){return Object.entries(e)}function Ce(e){return e=Math.abs(e),e>9?`${e}`:`0${e}`}function Rn(e=0,t=Number.MAX_SAFE_INTEGER-1){return Math.floor(Math.random()*(t-e+1))+e}var Un=function(t){try{var n=/\B(\/\/ ==UserScript==\r?\n([\S\s]*?)\r?\n\/\/ ==\/UserScript==)([\S\s]*)/,r=t.match(n);if(!r)return null;var o=r[1],s=r[2],i=r[3],l={},u=s.split(`
`);return u.forEach(function(g){var f=g.match(/@([\w-]+)\s+(.+)/);f&&(l[f[1]]=l[f[1]]||[],l[f[1]].push(f[2]))}),{meta:l,metablock:o,content:i}}catch(g){return console&&console.error(g),null}};const Fn=_e(Un),Ot="https://crashmax-dev.github.io/tryrating-userscript",Yn=`${Ot}/tryrating-userscript.meta.js`,Bn=`${Ot}/tryrating-userscript.user.js`,[zn,qn]=V(!1);class Wn{get currentVersion(){return GM_info.script.version}checkUpdates(){zn()||(Y.info("Check updates..."),GM_xmlhttpRequest({url:Yn,onload:({response:t})=>{const n=Fn(t);if(!n){Y.error("Failed to parse metadata");return}this.checkMetadata(n.meta)},onerror:t=>{Y.error(t)}}))}checkMetadata(t){if(t.version[0]===this.currentVersion)return;if(Y.info("Founded new version",t.version),!confirm(`\u041D\u0430\u0439\u0434\u0435\u043D\u0430 \u043D\u043E\u0432\u0430\u044F \u0432\u0435\u0440\u0441\u0438\u044F ${t.version}.
\u0416\u0435\u043B\u0430\u0435\u0442\u0435 \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C?`)){qn(!0);return}GM_openInTab(Bn,{active:!0}).onclose=()=>{location.reload()}}}const At=new Wn,_t={info:"#2ecc71",debug:"#7f8c8d",warn:"#f39c12",error:"#c0392b"};function Hn(e){return[`background: ${_t[e]}`,"border-radius: 0.5em","color: white","font-weight: bold","padding: 2px 0.5em","font-family: cursive"].join(";")}function Gn(e){return jn(_t).reduce((t,[n])=>(t[n]=(...r)=>{console[n](`%c${e}`,Hn(n),...r)},t),{})}const Y=Gn(`tryrating-userscript ${At.currentVersion}`),Ke=()=>[{date:Ee(),total:0,estimated:0,list:[]}],[he,Xe]=V([]);class Vn{STORAGE_KEY="tryrating-storage-v3";constructor(){this.read()}get taskList(){return he()}read(){const t=GM_getValue(this.STORAGE_KEY,Ke());Y.info("Loaded tasks",t),Xe(t)}reset(){Xe(Ke()),GM_setValue(this.STORAGE_KEY,he())}write(t){const n=this.getTaskList();n.total+=1,n.estimated+=t.estimated;const r=n.list.find(s=>s.type===t.type);r?(r.count+=1,r.estimated+=t.estimated):n.list.push({count:1,type:t.type,estimated:t.estimated});const o=[n,...he().filter(s=>s.date!==n.date)];Xe(o),GM_setValue(this.STORAGE_KEY,he())}getTaskList(){const t=Ee();Y.info("Current date",t);const n=he().find(r=>r.date===t);return Y.info("Task list",n),n||Ke()[0]}}const Ie=new Vn;function F(e,t,...n){const r=document.createElement(e);return t instanceof Node?r.append(t):typeof t=="string"?r.append(Kn(t)):Array.isArray(t)?r.append(...t):(Object.assign(r,t),Object.assign(r.style,t?.style)),r.append(...n),r}function Kn(e){return document.createTextNode(e)}function Et(e,t,n){const r=new MutationObserver((o,s)=>{for(const i of o)t(i,s)});return r.observe(e,{childList:!0,subtree:!0,...n}),()=>r.disconnect()}function Xn(e,t=document.body){return new Promise(n=>{Et(t,(r,o)=>{const s=t.querySelector(e);s&&(o.disconnect(),n(s))})})}function Ct(e){return Ce(Number((e%6e4/1e3).toFixed(0)))}function It(e){const t=Ce(Math.floor(e/6e4)),n=Ct(e);return`${t}:${n}`}function Lt(e){const t=Ce(Math.floor(e/36e5)),n=Ce(Math.floor(e%36e5/6e4)),r=Ct(e);return`${t}:${n}:${r}`}const Zn=`function savePage() {
  const body = document.body.cloneNode(true)
  body.querySelector('button')?.remove()
  body.querySelector('script')?.remove()

  const blob = new Blob([body.outerHTML], {
    type: 'text/html'
  })

  const link = document.createElement('a')
  Object.assign(link, {
    target: '_blank',
    href: URL.createObjectURL(blob),
    download: 'tryrating-__DATE__.html'
  })

  link.click()
}
`,Jn=`* {
  margin: 0;
  box-sizing: border-box;
}

body {
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
}

table {
  width: 100%;
  border-collapse: collapse;
  border: 1px solid #ddd;
}

caption {
  background: linear-gradient(to bottom, #f2f2f2, #e6e6e6);
  color: #333;
  font-weight: bold;
  font-size: 18px;
  padding: 10px;
  text-align: center;
}

p {
  text-align: start;
}

th {
  background-color: #f2f2f2;
  font-weight: bold;
  padding: 8px;
  text-align: left;
  border-bottom: 1px solid #ddd;
}

td {
  padding: 8px;
  border-bottom: 1px solid #ddd;
}

tr:nth-child(even) {
  background-color: #f9f9f9;
}

tr:hover {
  background-color: #e6e6e6;
}

td:hover {
  background-color: #e6e6e6;
}

th:first-child,
td:first-child {
  width: 80%;
}

th:nth-child(2),
td:nth-child(2) {
  width: 10%;
}

th:nth-child(3),
td:nth-child(3) {
  width: 10%;
}

button {
  font-family: inherit;
  font-weight: 600;
  position: fixed;
  right: 1rem;
  top: 1rem;
  display: inline-block;
  border: none;
  padding: 10px 20px;
  background-color: #f5f5f5;
  color: #333;
  font-size: 1rem;
  text-align: center;
  text-decoration: none;
  cursor: pointer;
  border-collapse: collapse;
  border-spacing: 0;
  border: 1px solid #ddd;
  box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.4);
}

button:hover {
  background-color: #e0e0e0;
}

button:focus {
  outline: none;
  box-shadow: 0 0 0 2px #999;
}
`;class ue{static page(){const t=F("style",Jn),n=F("script",Zn.replace("__DATE__",Ee())),r=F("button",{className:"save-button"},"Save");return r.setAttribute("onclick","savePage()"),F("div",r,t,n)}static table(){return F("table")}static caption(t,n,r){return F("caption",F("p",`Date: ${t}`),F("p",`Tasks: ${n}`),F("p",`Estimated: ${Lt(r)}`))}static head(){return F("tr",F("th","Task"),F("th","Count"),F("th","Estimated"))}static tr(t){return F("tr",F("td",t.type),F("td",`${t.count}`),F("td",Lt(t.estimated)))}static open(t){const n=new Blob([t.outerHTML],{type:"text/html"});F("a",{target:"_blank",href:URL.createObjectURL(n)}).click()}}class Qn{generateMonthyPage(){}generateDailyPage(){const t=ue.page();for(const{date:n,list:r,total:o,estimated:s}of Ie.taskList){const i=ue.table(),l=ue.caption(n,o,s);i.append(l);const u=ue.head();i.append(u);for(const g of r){const f=ue.tr(g);i.append(f)}t.prepend(i)}ue.open(t)}}const Pt=new Qn,er=re("<button>A"),[Ze,tr]=V(!0);class nr{get isAutoSubmit(){return Ze()}toggle(){tr(!Ze())}}const pe=new nr,rr=()=>(()=>{const e=er();return e.$$click=()=>pe.toggle(),ne(()=>e.classList.toggle("enabled",!!Ze())),e})();We(["click"]);const Je=Symbol("store-raw"),me=Symbol("store-node");function Nt(e){let t=e[X];if(!t&&(Object.defineProperty(e,X,{value:t=new Proxy(e,ir)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let o=0,s=n.length;o<s;o++){const i=n[o];r[i].get&&Object.defineProperty(e,i,{enumerable:r[i].enumerable,get:r[i].get.bind(t)})}}return t}function Le(e){let t;return e!=null&&typeof e=="object"&&(e[X]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function be(e,t=new Set){let n,r,o,s;if(n=e!=null&&e[Je])return n;if(!Le(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let i=0,l=e.length;i<l;i++)o=e[i],(r=be(o,t))!==o&&(e[i]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const i=Object.keys(e),l=Object.getOwnPropertyDescriptors(e);for(let u=0,g=i.length;u<g;u++)s=i[u],!l[s].get&&(o=e[s],(r=be(o,t))!==o&&(e[s]=r))}return e}function Qe(e){let t=e[me];return t||Object.defineProperty(e,me,{value:t=Object.create(null)}),t}function et(e,t,n){return e[t]||(e[t]=Rt(n))}function or(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===X||t===me||(delete n.value,delete n.writable,n.get=()=>e[X][t]),n}function jt(e){if(gt()){const t=Qe(e);(t._||(t._=Rt()))()}}function sr(e){return jt(e),Reflect.ownKeys(e)}function Rt(e){const[t,n]=V(e,{equals:!1,internal:!0});return t.$=n,t}const ir={get(e,t,n){if(t===Je)return e;if(t===X)return n;if(t===lt)return jt(e),n;const r=Qe(e),o=r[t];let s=o?o():e[t];if(t===me||t==="__proto__")return s;if(!o){const i=Object.getOwnPropertyDescriptor(e,t);gt()&&(typeof s!="function"||e.hasOwnProperty(t))&&!(i&&i.get)&&(s=et(r,t,s)())}return Le(s)?Nt(s):s},has(e,t){return t===Je||t===X||t===lt||t===me||t==="__proto__"?!0:(this.get(e,t,e),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:sr,getOwnPropertyDescriptor:or};function Pe(e,t,n,r=!1){if(!r&&e[t]===n)return;const o=e[t],s=e.length;n===void 0?delete e[t]:e[t]=n;let i=Qe(e),l;if((l=et(i,t,o))&&l.$(()=>n),Array.isArray(e)&&e.length!==s){for(let u=e.length;u<s;u++)(l=i[u])&&l.$();(l=et(i,"length",s))&&l.$(e.length)}(l=i._)&&l.$()}function Ut(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const o=n[r];Pe(e,o,t[o])}}function ar(e,t){if(typeof t=="function"&&(t=t(e)),t=be(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const o=t[n];e[n]!==o&&Pe(e,n,o)}Pe(e,"length",r)}else Ut(e,t)}function ye(e,t,n=[]){let r,o=e;if(t.length>1){r=t.shift();const i=typeof r,l=Array.isArray(e);if(Array.isArray(r)){for(let u=0;u<r.length;u++)ye(e,[r[u]].concat(t),n);return}else if(l&&i==="function"){for(let u=0;u<e.length;u++)r(e[u],u)&&ye(e,[u].concat(t),n);return}else if(l&&i==="object"){const{from:u=0,to:g=e.length-1,by:f=1}=r;for(let m=u;m<=g;m+=f)ye(e,[m].concat(t),n);return}else if(t.length>1){ye(e[r],t,[r].concat(n));return}o=e[r],n=[r].concat(n)}let s=t[0];typeof s=="function"&&(s=s(o,n),s===o)||r===void 0&&s==null||(s=be(s),r===void 0||Le(o)&&Le(s)&&!Array.isArray(s)?Ut(o,s):Pe(e,r,s))}function Ft(...[e,t]){const n=be(e||{}),r=Array.isArray(n),o=Nt(n);function s(...i){Q(()=>{r&&i.length===1?ar(n,i[0]):ye(n,i)})}return[o,s]}const lr=re("<div>");var Ne=class{x;y;width;height;constructor(e){this.x=Math.floor(e.x),this.y=Math.floor(e.y),this.width=Math.floor(e.width),this.height=Math.floor(e.height)}get rect(){return{x:this.x,y:this.y,width:this.width,height:this.height}}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get center(){return{x:this.x+this.width*.5,y:this.y+this.height*.5}}get corners(){return{topLeft:{x:this.left,y:this.top},topRight:{x:this.right,y:this.top},bottomRight:{x:this.left,y:this.bottom},bottomLeft:{x:this.right,y:this.bottom}}}},ve=e=>{let t=new Ne(e.getBoundingClientRect());const{transform:n}=getComputedStyle(e);return n&&(t=cr(t,n)),t},cr=(e,t)=>{let n,r;if(t.startsWith("matrix3d(")){const o=t.slice(9,-1).split(/, /);n=+o[12],r=+o[13]}else if(t.startsWith("matrix(")){const o=t.slice(7,-1).split(/, /);n=+o[4],r=+o[5]}else n=0,r=0;return new Ne({...e,x:e.x-n,y:e.y-r})},fe=()=>({x:0,y:0}),ur=(e,t)=>e.x===t.x&&e.y===t.y,tt=(e,t)=>new Ne({...e,x:e.x+t.x,y:e.y+t.y}),fr=(e,t)=>{const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),o=Math.min(e.right,t.right),s=Math.min(e.bottom,t.bottom),i=o-r,l=s-n;if(r<o&&n<s){const u=e.width*e.height,g=t.width*t.height,f=i*l;return f/(u+g-f)}return 0},nt=(e,t)=>e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height,dr=(e,t,n)=>{const r=e.transformed,o={ratio:0,droppable:null};for(const s of t){const i=fr(r,s.layout);i>o.ratio?(o.ratio=i,o.droppable=s):i>0&&i===o.ratio&&s.id===n.activeDroppableId&&(o.droppable=s)}return o.droppable},Yt=fn(),gr=e=>{const t=$n({collisionDetector:dr},e),[n,r]=Ft({draggables:{},droppables:{},sensors:{},active:{draggableId:null,get draggable(){return n.active.draggableId!==null?n.draggables[n.active.draggableId]:null},droppableId:null,get droppable(){return n.active.droppableId!==null?n.droppables[n.active.droppableId]:null},sensorId:null,get sensor(){return n.active.sensorId!==null?n.sensors[n.active.sensorId]:null},overlay:null}}),o=(a,c,d)=>{a.substring(0,a.length-1),R(()=>n[a][c])&&r(a,c,"transformers",d.id,d)},s=(a,c,d)=>{a.substring(0,a.length-1),R(()=>n[a][c])&&R(()=>n[a][c].transformers[d])&&r(a,c,"transformers",d,void 0)},i=({id:a,node:c,layout:d,data:h})=>{const b=n.draggables[a],p={id:a,node:c,layout:d,data:h,_pendingCleanup:!1};let w;if(!b)Object.defineProperties(p,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{if(n.active.overlay)return fe();const x=Object.values(n.draggables[a].transformers);return x.sort((A,P)=>A.order-P.order),x.reduce((A,P)=>P.callback(A),fe())}},transformed:{enumerable:!0,configurable:!0,get:()=>tt(n.draggables[a].layout,n.draggables[a].transform)}});else if(n.active.draggableId===a&&!n.active.overlay){const x={x:b.layout.x-d.x,y:b.layout.y-d.y},A="addDraggable-existing-offset",P=b.transformers[A],W=P?P.callback(x):x;w={id:A,order:100,callback:ee=>({x:ee.x+W.x,y:ee.y+W.y})},G(()=>s("draggables",a,A))}Q(()=>{r("draggables",a,p),w&&o("draggables",a,w)}),n.active.draggable&&j()},l=a=>{R(()=>n.draggables[a])&&(r("draggables",a,"_pendingCleanup",!0),queueMicrotask(()=>u(a)))},u=a=>{if(n.draggables[a]?._pendingCleanup){const c=n.active.draggableId===a;Q(()=>{c&&r("active","draggableId",null),r("draggables",a,void 0)})}},g=({id:a,node:c,layout:d,data:h})=>{const b=n.droppables[a],p={id:a,node:c,layout:d,data:h,_pendingCleanup:!1};b||Object.defineProperties(p,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{const w=Object.values(n.droppables[a].transformers);return w.sort((x,A)=>x.order-A.order),w.reduce((x,A)=>A.callback(x),fe())}},transformed:{enumerable:!0,configurable:!0,get:()=>tt(n.droppables[a].layout,n.droppables[a].transform)}}),r("droppables",a,p),n.active.draggable&&j()},f=a=>{R(()=>n.droppables[a])&&(r("droppables",a,"_pendingCleanup",!0),queueMicrotask(()=>m(a)))},m=a=>{if(n.droppables[a]?._pendingCleanup){const c=n.active.droppableId===a;Q(()=>{c&&r("active","droppableId",null),r("droppables",a,void 0)})}},v=({id:a,activators:c})=>{r("sensors",a,{id:a,activators:c,coordinates:{origin:{x:0,y:0},current:{x:0,y:0},get delta(){return{x:n.sensors[a].coordinates.current.x-n.sensors[a].coordinates.origin.x,y:n.sensors[a].coordinates.current.y-n.sensors[a].coordinates.origin.y}}}})},$=a=>{if(!R(()=>n.sensors[a]))return;const c=n.active.sensorId===a;Q(()=>{c&&r("active","sensorId",null),r("sensors",a,void 0)})},S=({node:a,layout:c})=>{const d=n.active.overlay,h={node:a,layout:c};d||Object.defineProperties(h,{id:{enumerable:!0,configurable:!0,get:()=>n.active.draggable?.id},data:{enumerable:!0,configurable:!0,get:()=>n.active.draggable?.data},transformers:{enumerable:!0,configurable:!0,get:()=>Object.fromEntries(Object.entries(n.active.draggable?n.active.draggable.transformers:{}).filter(([b])=>b!=="addDraggable-existing-offset"))},transform:{enumerable:!0,configurable:!0,get:()=>{const b=Object.values(n.active.overlay?n.active.overlay.transformers:[]);return b.sort((p,w)=>p.order-w.order),b.reduce((p,w)=>w.callback(p),fe())}},transformed:{enumerable:!0,configurable:!0,get:()=>n.active.overlay?tt(n.active.overlay.layout,n.active.overlay.transform):new Ne({x:0,y:0,width:0,height:0})}}),r("active","overlay",h)},y=()=>r("active","overlay",null),M=(a,c)=>{Q(()=>{r("sensors",a,"coordinates",{origin:{...c},current:{...c}}),r("active","sensorId",a)})},N=a=>{const c=n.active.sensorId;c&&r("sensors",c,"coordinates","current",{...a})},_=()=>r("active","sensorId",null),E=(a,c)=>{const d={};for(const b of Object.values(n.sensors))if(b)for(const[p,w]of Object.entries(b.activators))d[p]??=[],d[p].push({sensor:b,activator:w});const h={};for(const b in d){let p=b;c&&(p=`on${b}`),h[p]=w=>{for(const{activator:x}of d[b]){if(n.active.sensor)break;x(w,a)}}}return h},j=()=>{let a=!1;const c=Object.values(n.draggables),d=Object.values(n.droppables),h=n.active.overlay;return Q(()=>{const b=new WeakMap;for(const p of c)if(p){const w=p.layout;b.has(p.node)||b.set(p.node,ve(p.node));const x=b.get(p.node);nt(w,x)||(r("draggables",p.id,"layout",x),a=!0)}for(const p of d)if(p){const w=p.layout;b.has(p.node)||b.set(p.node,ve(p.node));const x=b.get(p.node);nt(w,x)||(r("droppables",p.id,"layout",x),a=!0)}if(h){const p=h.layout,w=ve(h.node);nt(p,w)||(r("active","overlay","layout",w),a=!0)}}),a},D=()=>{const a=n.active.overlay??n.active.draggable;if(a){const c=t.collisionDetector(a,Object.values(n.droppables),{activeDroppableId:n.active.droppableId}),d=c?c.id:null;n.active.droppableId!==d&&r("active","droppableId",d)}},L=a=>{const c={id:"sensorMove",order:0,callback:d=>n.active.sensor?{x:d.x+n.active.sensor.coordinates.delta.x,y:d.y+n.active.sensor.coordinates.delta.y}:d};j(),Q(()=>{r("active","draggableId",a),o("draggables",a,c)}),D()},U=()=>{const a=R(()=>n.active.draggableId);Q(()=>{a!==null&&s("draggables",a,"sensorMove"),r("active",["draggableId","droppableId"],null)}),j()},q=a=>{J(()=>{const c=n.active.draggable;c&&R(()=>a({draggable:c}))})},O=a=>{J(()=>{const c=n.active.draggable;if(c){const d=R(()=>n.active.overlay);Object.values(d?d.transform:c.transform),R(()=>a({draggable:c,overlay:d}))}})},k=a=>{J(()=>{const c=n.active.draggable,d=n.active.droppable;c&&R(()=>a({draggable:c,droppable:d,overlay:n.active.overlay}))})},G=a=>{J(({previousDraggable:c,previousDroppable:d,previousOverlay:h})=>{const b=n.active.draggable,p=b?n.active.droppable:null,w=b?n.active.overlay:null;return!b&&c&&R(()=>a({draggable:c,droppable:d,overlay:h})),{previousDraggable:b,previousDroppable:p,previousOverlay:w}},{previousDraggable:null,previousDroppable:null,previousOverlay:null})};O(()=>D()),t.onDragStart&&q(t.onDragStart),t.onDragMove&&O(t.onDragMove),t.onDragOver&&k(t.onDragOver),t.onDragEnd&&G(t.onDragEnd);const T=[n,{addTransformer:o,removeTransformer:s,addDraggable:i,removeDraggable:l,addDroppable:g,removeDroppable:f,addSensor:v,removeSensor:$,setOverlay:S,clearOverlay:y,recomputeLayouts:j,detectCollisions:D,draggableActivators:E,sensorStart:M,sensorMove:N,sensorEnd:_,dragStart:L,dragEnd:U,onDragStart:q,onDragMove:O,onDragOver:k,onDragEnd:G}];return z(Yt.Provider,{value:T,get children(){return t.children}})},rt=()=>dn(Yt)||null,hr=(e="pointer-sensor")=>{const[t,{addSensor:n,removeSensor:r,sensorStart:o,sensorMove:s,sensorEnd:i,dragStart:l,dragEnd:u}]=rt(),g=250,f=10;dt(()=>{n({id:e,activators:{pointerdown:y}})}),de(()=>{r(e)});const m=()=>t.active.sensorId===e,v={x:0,y:0};let $=null,S=null;const y=(D,L)=>{D.button===0&&(document.addEventListener("pointermove",_),document.addEventListener("pointerup",E),S=L,v.x=D.clientX,v.y=D.clientY,$=window.setTimeout(N,g))},M=()=>{$&&(clearTimeout($),$=null),document.removeEventListener("pointermove",_),document.removeEventListener("pointerup",E),document.removeEventListener("selectionchange",j)},N=()=>{t.active.sensor?m()||M():(o(e,v),l(S),j(),document.addEventListener("selectionchange",j))},_=D=>{const L={x:D.clientX,y:D.clientY};if(!t.active.sensor){const U={x:L.x-v.x,y:L.y-v.y};Math.sqrt(U.x**2+U.y**2)>f&&N()}m()&&(D.preventDefault(),s(L))},E=D=>{M(),m()&&(D.preventDefault(),u(),i())},j=()=>{window.getSelection()?.removeAllRanges()}},pr=e=>(hr(),K(()=>e.children)),Bt=e=>({transform:`translate3d(${e.x}px, ${e.y}px, 0)`}),mr=(e,t={})=>{const[n,{addDraggable:r,removeDraggable:o,draggableActivators:s}]=rt(),[i,l]=V(null);dt(()=>{const m=i();m&&r({id:e,node:m,layout:ve(m),data:t})}),de(()=>o(e));const u=()=>n.active.draggableId===e,g=()=>n.draggables[e]?.transform||fe();return Object.defineProperties((m,v)=>{const $=v?v():{};J(()=>{const S=i(),y=s(e);if(S)for(const M in y)S.addEventListener(M,y[M]);de(()=>{if(S)for(const M in y)S.removeEventListener(M,y[M])})}),l(m),$.skipTransform||J(()=>{const S=g();if(ur(S,fe()))m.style.removeProperty("transform");else{const y=Bt(g());m.style.setProperty("transform",y.transform??null)}})},{ref:{enumerable:!0,value:l},isActiveDraggable:{enumerable:!0,get:u},dragActivators:{enumerable:!0,get:()=>s(e,!0)},transform:{enumerable:!0,get:g}})},br=e=>{const[t,{onDragStart:n,onDragEnd:r,setOverlay:o,clearOverlay:s}]=rt();let i;n(({draggable:u})=>{o({node:u.node,layout:u.layout}),queueMicrotask(()=>{if(i){const g=ve(i),f={x:(u.layout.width-g.width)/2,y:(u.layout.height-g.height)/2};g.x+=f.x,g.y+=f.y,o({node:i,layout:g})}})}),r(()=>queueMicrotask(s));const l=()=>{const u=t.active.overlay,g=t.active.draggable;return!u||!g?{}:{position:"fixed",transition:"transform 0s",top:`${u.layout.top}px`,left:`${u.layout.left}px`,"min-width":`${g.layout.width}px`,"min-height":`${g.layout.height}px`,...Bt(u.transform),...e.style}};return z(En,{get mount(){return document.body},get children(){return z(vt,{get when(){return t.active.draggable},get children(){const u=lr(),g=i;return typeof g=="function"?$t(g,u):i=u,oe(u,(()=>{const f=K(()=>typeof e.children=="function");return()=>f()?e.children(t.active.draggable):e.children})()),ne(f=>{const m=e.class,v=l();return m!==f._v$&&kn(u,f._v$=m),f._v$2=Dn(u,v,f._v$2),f},{_v$:void 0,_v$2:void 0}),u}})}})};function zt(e,t){const n=GM_getValue(e,t),[r,o]=Ft(n);return J(()=>GM_setValue(e,r)),[r,o]}const yr=re('<div class="tryrating-widget draggable absolute">'),vr=re('<div class="widget-drag-overlay"><span class="text">alt+3 reset position'),[qt,Wt]=zt("widget-position",{top:"0px",left:"0px"});function wr(){Wt({top:"0px",left:"0px"})}const $r=e=>{const t=mr(e.id);return(()=>{const n=yr();return $t(t,n,()=>!0),oe(n,()=>e.children),ne(r=>{const o=!!t.isActiveDraggable,s=qt.top,i=qt.left;return o!==r._v$&&n.classList.toggle("opacity-25",r._v$=o),s!==r._v$2&&((r._v$2=s)!=null?n.style.setProperty("top",s):n.style.removeProperty("top")),i!==r._v$3&&((r._v$3=i)!=null?n.style.setProperty("left",i):n.style.removeProperty("left")),r},{_v$:void 0,_v$2:void 0,_v$3:void 0}),n})()},Tr=e=>{let t={x:0,y:0};return z(gr,{onDragMove:({overlay:o})=>{o&&(t={...o.transform})},onDragEnd:({draggable:o})=>{const s=o.node,i=`${s.offsetTop+t.y}px`,l=`${s.offsetLeft+t.x}px`;Wt({top:i,left:l})},get children(){return[z(pr,{}),z($r,{id:1,get children(){return e.children}}),z(br,{children:o=>[vr(),o]})]}})},[Ht,Sr]=V(!0);function xr(){Sr(!Ht())}const Mr=e=>z(vt,{get when(){return Ht()},get children(){return e.children}});function kr(){window.addEventListener("keydown",e=>{e.altKey&&e.key==="1"&&(e.preventDefault(),Pt.generateDailyPage()),e.altKey&&e.key==="2"&&(e.preventDefault(),confirm(`Reset data.
Are you sure?`)&&Ie.reset()),e.altKey&&e.key==="3"&&(e.preventDefault(),wr()),e.ctrlKey&&e.code==="KeyO"&&(e.preventDefault(),pe.toggle()),e.ctrlKey&&e.code==="KeyX"&&(e.preventDefault(),xr())})}const Dr=e=>(t,n)=>(e.set(t,n),n),Gt=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,Vt=536870912,Kt=Vt*2,Or=(e,t)=>n=>{const r=t.get(n);let o=r===void 0?n.size:r<Kt?r+1:0;if(!n.has(o))return e(n,o);if(n.size<Vt){for(;n.has(o);)o=Math.floor(Math.random()*Kt);return e(n,o)}if(n.size>Gt)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;n.has(o);)o=Math.floor(Math.random()*Gt);return e(n,o)},Xt=new WeakMap,Ar=Dr(Xt),je=Or(Ar,Xt),_r=e=>e.method!==void 0&&e.method==="call",Er=e=>e.error===null&&typeof e.id=="number",Zt=((e,t)=>{let n=null;return()=>{if(n!==null)return n;const r=new Blob([t],{type:"application/javascript; charset=utf-8"}),o=URL.createObjectURL(r);return n=e(o),setTimeout(()=>URL.revokeObjectURL(o)),n}})(e=>{const t=new Map([[0,()=>{}]]),n=new Map([[0,()=>{}]]),r=new Map,o=new Worker(e);return o.addEventListener("message",({data:g})=>{if(_r(g)){const{params:{timerId:f,timerType:m}}=g;if(m==="interval"){const v=t.get(f);if(typeof v=="number"){const $=r.get(v);if($===void 0||$.timerId!==f||$.timerType!==m)throw new Error("The timer is in an undefined state.")}else if(typeof v<"u")v();else throw new Error("The timer is in an undefined state.")}else if(m==="timeout"){const v=n.get(f);if(typeof v=="number"){const $=r.get(v);if($===void 0||$.timerId!==f||$.timerType!==m)throw new Error("The timer is in an undefined state.")}else if(typeof v<"u")v(),n.delete(f);else throw new Error("The timer is in an undefined state.")}}else if(Er(g)){const{id:f}=g,m=r.get(f);if(m===void 0)throw new Error("The timer is in an undefined state.");const{timerId:v,timerType:$}=m;r.delete(f),$==="interval"?t.delete(v):n.delete(v)}else{const{error:{message:f}}=g;throw new Error(f)}}),{clearInterval:g=>{const f=je(r);r.set(f,{timerId:g,timerType:"interval"}),t.set(g,f),o.postMessage({id:f,method:"clear",params:{timerId:g,timerType:"interval"}})},clearTimeout:g=>{const f=je(r);r.set(f,{timerId:g,timerType:"timeout"}),n.set(g,f),o.postMessage({id:f,method:"clear",params:{timerId:g,timerType:"timeout"}})},setInterval:(g,f)=>{const m=je(t);return t.set(m,()=>{g(),typeof t.get(m)=="function"&&o.postMessage({id:null,method:"set",params:{delay:f,now:performance.now(),timerId:m,timerType:"interval"}})}),o.postMessage({id:null,method:"set",params:{delay:f,now:performance.now(),timerId:m,timerType:"interval"}}),m},setTimeout:(g,f)=>{const m=je(n);return n.set(m,g),o.postMessage({id:null,method:"set",params:{delay:f,now:performance.now(),timerId:m,timerType:"timeout"}}),m}}},`(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error('The given type "'.concat(i,'" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error('The given method "'.concat(s.method,'" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error('The given type "'.concat(d,'" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`),Jt=e=>Zt().clearInterval(e),ot=(e,t)=>Zt().setInterval(e,t),Cr=".modal-container.visible",Ir="div[modalwrapref] > div",Qt="Validation failed!",[en,Lr]=zt("auto-close-modal",{value:!0});class Pr{get autoClose(){return en.value}toggleAutoClose(){Lr({value:!en.value})}closeValidationFailed(){const t=document.querySelector(Cr);if(!t)return;const n=t.querySelector(Ir);if(n&&n.textContent===Qt){GM_notification({title:document.title,text:Qt,highlight:!0,silent:!1,timeout:1e3});const r=t.querySelector("button");r&&(Y.info("Modal closed"),r.click())}}}const Re=new Pr,[Nr,jr]=V(!1);function Rr(){if(Nr())return;const e=document.querySelector(".no-survey-view");if(!e)return;const t=e.querySelector("button");if(!t){Y.info("Check Now button is not defined");return}jr(!0),Dt(1e4).then(()=>t.click()).finally(()=>Ur())}function Ur(){const e=Rn(3e4,6e4);Dt(e).then(()=>location.reload())}function Fr(e){const t=e.split(/\s(?=\d)/);let n=0;for(const r of t){const[o,s]=r.split(" ");switch(s){case"hours":n+=Number(o)*36e5;break;case"minute":case"minutes":n+=Number(o)*6e4;break;case"second":case"seconds":n+=Number(o)*1e3;break;default:Y.warn(`Unknown time type: ${s}`)}}return n}const[Yr,tn]=V(0);let Br=class{intervalId;get time(){return Yr()}tick(){tn(t=>t+1e3)}start(){this.intervalId&&(Jt(this.intervalId),tn(0)),this.intervalId=ot(()=>this.tick(),1e3)}};const nn=new Br,zr=".btn-success",qr="Submit Rating",[rn,Wr]=V(!0);class Hr{get isAutoSubmit(){return rn()}toggleAutoSubmit(){Wr(!rn())}getSubmitButtons(){const t=[],n=Array.from(document.querySelectorAll(zr));for(const r of n)r instanceof HTMLButtonElement&&r.textContent===qr&&t.push(r);return t}clickSubmit(){if(!pe.isAutoSubmit)return;const t=this.getSubmitButtons();if(!t.length){Y.error("Submit button is not defined");return}t[0].click()}}const Gr=new Hr,[on,sn]=V(0);let Vr=class{intervalId;onEndCallback;onTickTimer(){const t=on()-1e3;sn(t),t===0&&(this.onEndCallback(),this.stop())}get time(){return on()}onTimerEnd(t){this.onEndCallback=t}start(t){this.stop(),sn(t),this.intervalId=ot(()=>this.onTickTimer(),1e3)}stop(){this.intervalId&&(Jt(this.intervalId),this.intervalId=null)}};const st=new Vr;st.onTimerEnd(()=>Gr.clickSubmit());class Kr{taskFields=null;onChangeTaskCallback=null;get targetSelector(){return".survey-meta-fields"}onChangeTask(t){this.onChangeTaskCallback=t}observe(){const t=document.querySelector(this.targetSelector);if(!t){Y.error("Task fields not found");return}const[n,r,o]=Array.from(t.querySelectorAll(".labeled-attribute__attribute"));if(!n||!r||!o){Y.error("Task fields attributes not found");return}if(n.textContent!==this.taskFields?.requestId){const s=this.getRandomEstimatedOffset(o.textContent.trim()),i={taskType:n.textContent,requestId:r.textContent,estimated:s};Y.info("Task fields changed",i),this.onChangeTaskCallback(i),pe.isAutoSubmit||pe.toggle(),this.taskFields&&(Y.info("Task is submitted",this.taskFields),Ie.write({type:this.taskFields.taskType,estimated:this.taskFields.estimated})),this.taskFields=i}}getRandomEstimatedOffset(t){const n=Fr(t),r=Math.random()*(.15- -.05)+-.05;return n+n*r}}const it=new Kr;it.onChangeTask(e=>{st.start(e.estimated),nn.start(),At.checkUpdates()});async function Xr(){const e=document.querySelector("#app-root");if(!e){Y.error("App root not found");return}Et(e,()=>{Re.autoClose&&Re.closeValidationFailed(),Rr()}),Xn(it.targetSelector).then(()=>{ot(()=>it.observe(),7*1e3)}).finally(()=>Y.info("Initialized task fields observer"))}const Zr=re("<button>M"),Jr=()=>(()=>{const e=Zr();return e.$$click=()=>Re.toggleAutoClose(),ne(()=>e.classList.toggle("enabled",!!Re.autoClose)),e})();We(["click"]);const Qr=re('<button class="task-counter">'),eo=()=>{const e=K(()=>{const t=Ee();return Ie.taskList.find(r=>r.date===t)?.total??"0"});return(()=>{const t=Qr();return t.$$click=()=>Pt.generateDailyPage(),oe(t,e),t})()};We(["click"]);const to=re("<div>Stopwatch: "),no=()=>{const e=K(()=>It(nn.time));return(()=>{const t=to();return t.firstChild,oe(t,e,null),t})()},ro=re("<div>Timer: "),oo=()=>{const e=K(()=>It(st.time));return(()=>{const t=ro();return t.firstChild,oe(t,e,null),t})()},co="",so=()=>z(Mr,{get children(){return z(Tr,{get children(){return[z(oo,{}),z(no,{}),z(eo,{}),z(rr,{}),z(Jr,{})]}})}});Xr(),kr(),xn(()=>z(so,{}),document.body),GM_addStyle(":root{--try-font-family: monospace}.tryrating-widget{user-select:none;display:flex;color:#fff;padding-left:4px;background:#2e2c2f;font-size:1rem;font-weight:600;align-items:center;height:40px;justify-content:center;text-transform:uppercase;font-family:var(--try-font-family)}.tryrating-widget.draggable{cursor:pointer}.tryrating-widget.absolute{z-index:999999;position:absolute}.tryrating-widget.opacity-25{opacity:.25}.tryrating-widget>.task-counter{background:gray}.tryrating-widget>div{margin-left:6px;margin-right:6px}.tryrating-widget>button{text-transform:inherit;height:inherit;border:none;font-size:inherit;font-weight:inherit;color:#fff;padding-left:12px;padding-right:12px;background:#f44336}.tryrating-widget>button.enabled{background:#4caf50}.widget-drag-overlay{font-size:20px;font-weight:700;color:#3b99fc;width:100%;height:100%;position:absolute;text-align:center;align-self:center;text-transform:uppercase;background:rgba(0,0,0,.9)}.widget-drag-overlay>.text{font-family:var(--try-font-family);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100%}")})();
