(function(){"use strict";const xn={context:void 0,registry:void 0},kn=(t,e)=>t===e,Z=Symbol("solid-proxy"),me=Symbol("solid-track"),Mt={equals:kn};let be=ke;const rt=1,Et=2,ye={owned:null,cleanups:null,context:null,owner:null};var M=null;let Vt=null,$n=null,I=null,q=null,X=null,At=0;function ve(t,e){const n=I,r=M,o=t.length===0,i=e===void 0?r:e,a=o?ye:{owned:null,cleanups:null,context:i?i.context:null,owner:i},s=o?t:()=>t(()=>F(()=>Lt(a)));M=a,I=null;try{return st(s,!0)}finally{I=n,M=r}}function V(t,e){e=e?Object.assign({},Mt,e):Mt;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},r=o=>(typeof o=="function"&&(o=o(n.value)),xe(n,o));return[Te.bind(n),r]}function J(t,e,n){const r=Zt(t,e,!1,rt);mt(r)}function Q(t,e,n){be=_n;const r=Zt(t,e,!1,rt);(!n||!n.render)&&(r.user=!0),X?X.push(r):mt(r)}function K(t,e,n){n=n?Object.assign({},Mt,n):Mt;const r=Zt(t,e,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,mt(r),Te.bind(r)}function tt(t){return st(t,!1)}function F(t){if(I===null)return t();const e=I;I=null;try{return t()}finally{I=e}}function we(t){Q(()=>F(t))}function pt(t){return M===null||(M.cleanups===null?M.cleanups=[t]:M.cleanups.push(t)),t}function Kt(){return I}function Sn(){return M}function Dn(t,e){const n=M,r=I;M=t,I=null;try{return st(e,!0)}catch(o){Xt(o)}finally{M=n,I=r}}function On(t,e){const n=Symbol("context");return{id:n,Provider:In(n),defaultValue:t}}function Mn(t){return M&&M.context&&M.context[t.id]!==void 0?M.context[t.id]:t.defaultValue}function En(t){const e=K(t),n=K(()=>Jt(e()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function Te(){if(this.sources&&this.state)if(this.state===rt)mt(this);else{const t=q;q=null,st(()=>_t(this),!1),q=t}if(I){const t=this.observers?this.observers.length:0;I.sources?(I.sources.push(this),I.sourceSlots.push(t)):(I.sources=[this],I.sourceSlots=[t]),this.observers?(this.observers.push(I),this.observerSlots.push(I.sources.length-1)):(this.observers=[I],this.observerSlots=[I.sources.length-1])}return this.value}function xe(t,e,n){let r=t.value;return(!t.comparator||!t.comparator(r,e))&&(t.value=e,t.observers&&t.observers.length&&st(()=>{for(let o=0;o<t.observers.length;o+=1){const i=t.observers[o],a=Vt&&Vt.running;a&&Vt.disposed.has(i),(a?!i.tState:!i.state)&&(i.pure?q.push(i):X.push(i),i.observers&&$e(i)),a||(i.state=rt)}if(q.length>1e6)throw q=[],new Error},!1)),e}function mt(t){if(!t.fn)return;Lt(t);const e=At;An(t,t.value,e)}function An(t,e,n){let r;const o=M,i=I;I=M=t;try{r=t.fn(e)}catch(a){return t.pure&&(t.state=rt,t.owned&&t.owned.forEach(Lt),t.owned=null),t.updatedAt=n+1,Xt(a)}finally{I=i,M=o}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?xe(t,r):t.value=r,t.updatedAt=n)}function Zt(t,e,n,r=rt,o){const i={fn:t,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:M,context:M?M.context:null,pure:n};return M===null||M!==ye&&(M.owned?M.owned.push(i):M.owned=[i]),i}function Ct(t){if(t.state===0)return;if(t.state===Et)return _t(t);if(t.suspense&&F(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<At);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===rt)mt(t);else if(t.state===Et){const r=q;q=null,st(()=>_t(t,e[0]),!1),q=r}}function st(t,e){if(q)return t();let n=!1;e||(q=[]),X?n=!0:X=[],At++;try{const r=t();return Cn(n),r}catch(r){n||(X=null),q=null,Xt(r)}}function Cn(t){if(q&&(ke(q),q=null),t)return;const e=X;X=null,e.length&&st(()=>be(e),!1)}function ke(t){for(let e=0;e<t.length;e++)Ct(t[e])}function _n(t){let e,n=0;for(e=0;e<t.length;e++){const r=t[e];r.user?t[n++]=r:Ct(r)}for(e=0;e<n;e++)Ct(t[e])}function _t(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const r=t.sources[n];if(r.sources){const o=r.state;o===rt?r!==e&&(!r.updatedAt||r.updatedAt<At)&&Ct(r):o===Et&&_t(r,e)}}}function $e(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=Et,n.pure?q.push(n):X.push(n),n.observers&&$e(n))}}function Lt(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),r=t.sourceSlots.pop(),o=n.observers;if(o&&o.length){const i=o.pop(),a=n.observerSlots.pop();r<o.length&&(i.sourceSlots[a]=r,o[r]=i,n.observerSlots[r]=a)}}if(t.owned){for(e=t.owned.length-1;e>=0;e--)Lt(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0}function Ln(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Xt(t,e=M){throw Ln(t)}function Jt(t){if(typeof t=="function"&&!t.length)return Jt(t());if(Array.isArray(t)){const e=[];for(let n=0;n<t.length;n++){const r=Jt(t[n]);Array.isArray(r)?e.push.apply(e,r):e.push(r)}return e}return t}function In(t,e){return function(r){let o;return J(()=>o=F(()=>(M.context={...M.context,[t]:r.value},En(()=>r.children))),void 0),o}}function z(t,e){return F(()=>t(e||{}))}function It(){return!0}const Nn={get(t,e,n){return e===Z?n:t.get(e)},has(t,e){return e===Z?!0:t.has(e)},set:It,deleteProperty:It,getOwnPropertyDescriptor(t,e){return{configurable:!0,enumerable:!0,get(){return t.get(e)},set:It,deleteProperty:It}},ownKeys(t){return t.keys()}};function Qt(t){return(t=typeof t=="function"?t():t)?t:{}}function Pn(){for(let t=0,e=this.length;t<e;++t){const n=this[t]();if(n!==void 0)return n}}function Nt(...t){let e=!1;for(let a=0;a<t.length;a++){const s=t[a];e=e||!!s&&Z in s,t[a]=typeof s=="function"?(e=!0,K(s)):s}if(e)return new Proxy({get(a){for(let s=t.length-1;s>=0;s--){const l=Qt(t[s])[a];if(l!==void 0)return l}},has(a){for(let s=t.length-1;s>=0;s--)if(a in Qt(t[s]))return!0;return!1},keys(){const a=[];for(let s=0;s<t.length;s++)a.push(...Object.keys(Qt(t[s])));return[...new Set(a)]}},Nn);const n={},r=Object.create(null);for(let a=t.length-1;a>=0;a--){const s=t[a];if(!s)continue;const l=Object.getOwnPropertyNames(s);for(let p=l.length-1;p>=0;p--){const h=l[p];if(h==="__proto__"||h==="constructor")continue;const g=Object.getOwnPropertyDescriptor(s,h);if(!r[h])r[h]=g.get?{enumerable:!0,configurable:!0,get:Pn.bind(n[h]=[g.get.bind(s)])}:g.value!==void 0?g:void 0;else{const v=n[h];v&&(g.get?v.push(g.get.bind(s)):g.value!==void 0&&v.push(()=>g.value))}}}const o={},i=Object.keys(r);for(let a=i.length-1;a>=0;a--){const s=i[a],l=r[s];l&&l.get?Object.defineProperty(o,s,l):o[s]=l?l.value:void 0}return o}const jn=t=>`Stale read from <${t}>.`;function Se(t){const e=t.keyed,n=K(()=>t.when,void 0,{equals:(r,o)=>e?r===o:!r==!o});return K(()=>{const r=n();if(r){const o=t.children;return typeof o=="function"&&o.length>0?F(()=>o(e?r:()=>{if(!F(n))throw jn("Show");return t.when})):o}return t.fallback},void 0,void 0)}const Fn=["allowfullscreen","async","autofocus","autoplay","checked","controls","default","disabled","formnovalidate","hidden","indeterminate","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","seamless","selected"],Rn=new Set(["className","value","readOnly","formNoValidate","isMap","noModule","playsInline",...Fn]),Un=new Set(["innerHTML","textContent","innerText","children"]),Bn=Object.assign(Object.create(null),{className:"class",htmlFor:"for"}),zn=Object.assign(Object.create(null),{class:"className",formnovalidate:{$:"formNoValidate",BUTTON:1,INPUT:1},ismap:{$:"isMap",IMG:1},nomodule:{$:"noModule",SCRIPT:1},playsinline:{$:"playsInline",VIDEO:1},readonly:{$:"readOnly",INPUT:1,TEXTAREA:1}});function Yn(t,e){const n=zn[t];return typeof n=="object"?n[e]?n.$:void 0:n}const qn=new Set(["beforeinput","click","dblclick","contextmenu","focusin","focusout","input","keydown","keyup","mousedown","mousemove","mouseout","mouseover","mouseup","pointerdown","pointermove","pointerout","pointerover","pointerup","touchend","touchmove","touchstart"]),Gn={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"};function Hn(t,e,n){let r=n.length,o=e.length,i=r,a=0,s=0,l=e[o-1].nextSibling,p=null;for(;a<o||s<i;){if(e[a]===n[s]){a++,s++;continue}for(;e[o-1]===n[i-1];)o--,i--;if(o===a){const h=i<r?s?n[s-1].nextSibling:n[i-s]:l;for(;s<i;)t.insertBefore(n[s++],h)}else if(i===s)for(;a<o;)(!p||!p.has(e[a]))&&e[a].remove(),a++;else if(e[a]===n[i-1]&&n[s]===e[o-1]){const h=e[--o].nextSibling;t.insertBefore(n[s++],e[a++].nextSibling),t.insertBefore(n[--i],h),e[o]=n[i]}else{if(!p){p=new Map;let g=s;for(;g<i;)p.set(n[g],g++)}const h=p.get(e[a]);if(h!=null)if(s<h&&h<i){let g=a,v=1,T;for(;++g<o&&g<i&&!((T=p.get(e[g]))==null||T!==h+v);)v++;if(v>h-s){const k=e[a];for(;s<h;)t.insertBefore(n[s++],k)}else t.replaceChild(n[s++],e[a++])}else a++;else e[a++].remove()}}}const De="_$DX_DELEGATE";function Wn(t,e,n,r={}){let o;return ve(i=>{o=i,e===document?t():ot(e,t(),e.firstChild?null:void 0,n)},r.owner),()=>{o(),e.textContent=""}}function et(t,e,n){let r;const o=()=>{const a=document.createElement("template");return a.innerHTML=t,n?a.content.firstChild.firstChild:a.content.firstChild},i=e?()=>F(()=>document.importNode(r||(r=o()),!0)):()=>(r||(r=o())).cloneNode(!0);return i.cloneNode=i,i}function Oe(t,e=window.document){const n=e[De]||(e[De]=new Set);for(let r=0,o=t.length;r<o;r++){const i=t[r];n.has(i)||(n.add(i),e.addEventListener(i,Qn))}}function te(t,e,n){n==null?t.removeAttribute(e):t.setAttribute(e,n)}function Vn(t,e,n,r){r==null?t.removeAttributeNS(e,n):t.setAttributeNS(e,n,r)}function Me(t,e){e==null?t.removeAttribute("class"):t.className=e}function Kn(t,e,n,r){if(r)Array.isArray(n)?(t[`$$${e}`]=n[0],t[`$$${e}Data`]=n[1]):t[`$$${e}`]=n;else if(Array.isArray(n)){const o=n[0];t.addEventListener(e,n[0]=i=>o.call(t,n[1],i))}else t.addEventListener(e,n)}function Zn(t,e,n={}){const r=Object.keys(e||{}),o=Object.keys(n);let i,a;for(i=0,a=o.length;i<a;i++){const s=o[i];!s||s==="undefined"||e[s]||(Ce(t,s,!1),delete n[s])}for(i=0,a=r.length;i<a;i++){const s=r[i],l=!!e[s];!s||s==="undefined"||n[s]===l||!l||(Ce(t,s,!0),n[s]=l)}return n}function Ee(t,e,n){if(!e)return n?te(t,"style"):e;const r=t.style;if(typeof e=="string")return r.cssText=e;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),e||(e={});let o,i;for(i in n)e[i]==null&&r.removeProperty(i),delete n[i];for(i in e)o=e[i],o!==n[i]&&(r.setProperty(i,o),n[i]=o);return n}function ee(t,e={},n,r){const o={};return r||J(()=>o.children=ct(t,e.children,o.children)),J(()=>e.ref&&e.ref(t)),J(()=>Xn(t,e,n,!0,o,!0)),o}function Ae(t,e,n){return F(()=>t(e,n))}function ot(t,e,n,r){if(n!==void 0&&!r&&(r=[]),typeof e!="function")return ct(t,e,r,n);J(o=>ct(t,e(),o,n),r)}function Xn(t,e,n,r,o={},i=!1){e||(e={});for(const a in o)if(!(a in e)){if(a==="children")continue;o[a]=_e(t,a,null,o[a],n,i)}for(const a in e){if(a==="children"){r||ct(t,e.children);continue}const s=e[a];o[a]=_e(t,a,s,o[a],n,i)}}function Jn(t){return t.toLowerCase().replace(/-([a-z])/g,(e,n)=>n.toUpperCase())}function Ce(t,e,n){const r=e.trim().split(/\s+/);for(let o=0,i=r.length;o<i;o++)t.classList.toggle(r[o],n)}function _e(t,e,n,r,o,i){let a,s,l,p,h;if(e==="style")return Ee(t,n,r);if(e==="classList")return Zn(t,n,r);if(n===r)return r;if(e==="ref")i||n(t);else if(e.slice(0,3)==="on:"){const g=e.slice(3);r&&t.removeEventListener(g,r),n&&t.addEventListener(g,n)}else if(e.slice(0,10)==="oncapture:"){const g=e.slice(10);r&&t.removeEventListener(g,r,!0),n&&t.addEventListener(g,n,!0)}else if(e.slice(0,2)==="on"){const g=e.slice(2).toLowerCase(),v=qn.has(g);if(!v&&r){const T=Array.isArray(r)?r[0]:r;t.removeEventListener(g,T)}(v||n)&&(Kn(t,g,n,v),v&&Oe([g]))}else if(e.slice(0,5)==="attr:")te(t,e.slice(5),n);else if((h=e.slice(0,5)==="prop:")||(l=Un.has(e))||!o&&((p=Yn(e,t.tagName))||(s=Rn.has(e)))||(a=t.nodeName.includes("-")))h&&(e=e.slice(5),s=!0),e==="class"||e==="className"?Me(t,n):a&&!s&&!l?t[Jn(e)]=n:t[p||e]=n;else{const g=o&&e.indexOf(":")>-1&&Gn[e.split(":")[0]];g?Vn(t,g,e,n):te(t,Bn[e]||e,n)}return n}function Qn(t){const e=`$$${t.type}`;let n=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==n&&Object.defineProperty(t,"target",{configurable:!0,value:n}),Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return n||document}});n;){const r=n[e];if(r&&!n.disabled){const o=n[`${e}Data`];if(o!==void 0?r.call(n,o,t):r.call(n,t),t.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function ct(t,e,n,r,o){for(;typeof n=="function";)n=n();if(e===n)return n;const i=typeof e,a=r!==void 0;if(t=a&&n[0]&&n[0].parentNode||t,i==="string"||i==="number")if(i==="number"&&(e=e.toString()),a){let s=n[0];s&&s.nodeType===3?s.data!==e&&(s.data=e):s=document.createTextNode(e),n=ut(t,n,r,s)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e;else if(e==null||i==="boolean")n=ut(t,n,r);else{if(i==="function")return J(()=>{let s=e();for(;typeof s=="function";)s=s();n=ct(t,s,n,r)}),()=>n;if(Array.isArray(e)){const s=[],l=n&&Array.isArray(n);if(ne(s,e,n,o))return J(()=>n=ct(t,s,n,r,!0)),()=>n;if(s.length===0){if(n=ut(t,n,r),a)return n}else l?n.length===0?Le(t,s,r):Hn(t,n,s):(n&&ut(t),Le(t,s));n=s}else if(e.nodeType){if(Array.isArray(n)){if(a)return n=ut(t,n,r,e);ut(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}}return n}function ne(t,e,n,r){let o=!1;for(let i=0,a=e.length;i<a;i++){let s=e[i],l=n&&n[i],p;if(!(s==null||s===!0||s===!1))if((p=typeof s)=="object"&&s.nodeType)t.push(s);else if(Array.isArray(s))o=ne(t,s,l)||o;else if(p==="function")if(r){for(;typeof s=="function";)s=s();o=ne(t,Array.isArray(s)?s:[s],Array.isArray(l)?l:[l])||o}else t.push(s),o=!0;else{const h=String(s);l&&l.nodeType===3&&l.data===h?t.push(l):t.push(document.createTextNode(h))}}return o}function Le(t,e,n=null){for(let r=0,o=e.length;r<o;r++)t.insertBefore(e[r],n)}function ut(t,e,n,r){if(n===void 0)return t.textContent="";const o=r||document.createTextNode("");if(e.length){let i=!1;for(let a=e.length-1;a>=0;a--){const s=e[a];if(o!==s){const l=s.parentNode===t;!i&&!a?l?t.replaceChild(o,s):t.insertBefore(o,n):l&&s.remove()}else i=!0}}else t.insertBefore(o,n);return[o]}const tr="http://www.w3.org/2000/svg";function er(t,e=!1){return e?document.createElementNS(tr,t):document.createElement(t)}function nr(t){const{useShadow:e}=t,n=document.createTextNode(""),r=()=>t.mount||document.body,o=Sn();let i,a=!!xn.context;return Q(()=>{i||(i=Dn(o,()=>K(()=>t.children)));const s=r();if(s instanceof HTMLHeadElement){const[l,p]=V(!1),h=()=>p(!0);ve(g=>ot(s,()=>l()?g():i(),null)),pt(h)}else{const l=er(t.isSVG?"g":"div",t.isSVG),p=e&&l.attachShadow?l.attachShadow({mode:"open"}):l;Object.defineProperty(l,"_$host",{get(){return n.parentNode},configurable:!0}),ot(p,i),s.appendChild(l),t.ref&&t.ref(l),pt(()=>s.removeChild(l))}},void 0,{render:!a}),n}const re="https://crashmax-dev.github.io/tryrating-userscript",rr=`${re}/tryrating-userscript.meta.js`,or=`${re}/tryrating-userscript.user.js`,ir=`${re}/notify.ogg`,bt={openTasks:t=>t.altKey&&t.key==="1",resetTasks:t=>t.altKey&&t.key==="2",resetWidgetPosition:t=>t.altKey&&t.key==="3",toggleAutoSubmit:t=>t.ctrlKey&&t.code==="KeyO",toggleWidgetVisibility:t=>t.ctrlKey&&t.code==="KeyX"},sr=`
Alt + 1 - \u041E\u0442\u043A\u0440\u044B\u0442\u044C \u0441\u043F\u0438\u0441\u043E\u043A \u0437\u0430\u0434\u0430\u0447
Alt + 2 - \u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u0434\u0430\u043D\u043D\u044B\u0435\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007
Alt + 3 - \u0421\u0431\u0440\u043E\u0441\u0438\u0442\u044C \u043F\u043E\u0437\u0438\u0446\u0438\u044E \u0432\u0438\u0434\u0436\u0435\u0442\u0430\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007
Ctrl + O - \u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C/\u0432\u044B\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u0430\u0432\u0442\u043E\u043F\u043E\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043D\u0438\u0435\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007\u2007
Ctrl + X - \u0421\u043A\u0440\u044B\u0442\u044C/\u043F\u043E\u043A\u0430\u0437\u0430\u0442\u044C \u0432\u0438\u0434\u0436\u0435\u0442
`;var oe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Pt(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Ie={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(oe,function(){var n=1e3,r=6e4,o=36e5,i="millisecond",a="second",s="minute",l="hour",p="day",h="week",g="month",v="quarter",T="year",k="date",b="Invalid Date",$=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,P=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,A={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(c){var u=["th","st","nd","rd"],f=c%100;return"["+c+(u[(f-20)%10]||u[f]||u[0])+"]"}},C=function(c,u,f){var y=String(c);return!y||y.length>=u?c:""+Array(u+1-y.length).join(f)+c},j={s:C,z:function(c){var u=-c.utcOffset(),f=Math.abs(u),y=Math.floor(f/60),d=f%60;return(u<=0?"+":"-")+C(y,2,"0")+":"+C(d,2,"0")},m:function c(u,f){if(u.date()<f.date())return-c(f,u);var y=12*(f.year()-u.year())+(f.month()-u.month()),d=u.clone().add(y,g),m=f-d<0,w=u.clone().add(y+(m?-1:1),g);return+(-(y+(f-d)/(m?d-w:w-d))||0)},a:function(c){return c<0?Math.ceil(c)||0:Math.floor(c)},p:function(c){return{M:g,y:T,w:h,d:p,D:k,h:l,m:s,s:a,ms:i,Q:v}[c]||String(c||"").toLowerCase().replace(/s$/,"")},u:function(c){return c===void 0}},D="en",N={};N[D]=A;var B="$isDayjsObject",H=function(c){return c instanceof St||!(!c||!c[B])},Y=function c(u,f,y){var d;if(!u)return D;if(typeof u=="string"){var m=u.toLowerCase();N[m]&&(d=m),f&&(N[m]=f,d=m);var w=u.split("-");if(!d&&w.length>1)return c(w[0])}else{var x=u.name;N[x]=u,d=x}return!y&&d&&(D=d),d||!y&&D},E=function(c,u){if(H(c))return c.clone();var f=typeof u=="object"?u:{};return f.date=c,f.args=arguments,new St(f)},S=j;S.l=Y,S.i=H,S.w=function(c,u){return E(c,{locale:u.$L,utc:u.$u,x:u.$x,$offset:u.$offset})};var St=function(){function c(f){this.$L=Y(f.locale,null,!0),this.parse(f),this.$x=this.$x||f.x||{},this[B]=!0}var u=c.prototype;return u.parse=function(f){this.$d=function(y){var d=y.date,m=y.utc;if(d===null)return new Date(NaN);if(S.u(d))return new Date;if(d instanceof Date)return new Date(d);if(typeof d=="string"&&!/Z$/i.test(d)){var w=d.match($);if(w){var x=w[2]-1||0,O=(w[7]||"0").substring(0,3);return m?new Date(Date.UTC(w[1],x,w[3]||1,w[4]||0,w[5]||0,w[6]||0,O)):new Date(w[1],x,w[3]||1,w[4]||0,w[5]||0,w[6]||0,O)}}return new Date(d)}(f),this.init()},u.init=function(){var f=this.$d;this.$y=f.getFullYear(),this.$M=f.getMonth(),this.$D=f.getDate(),this.$W=f.getDay(),this.$H=f.getHours(),this.$m=f.getMinutes(),this.$s=f.getSeconds(),this.$ms=f.getMilliseconds()},u.$utils=function(){return S},u.isValid=function(){return this.$d.toString()!==b},u.isSame=function(f,y){var d=E(f);return this.startOf(y)<=d&&d<=this.endOf(y)},u.isAfter=function(f,y){return E(f)<this.startOf(y)},u.isBefore=function(f,y){return this.endOf(y)<E(f)},u.$g=function(f,y,d){return S.u(f)?this[y]:this.set(d,f)},u.unix=function(){return Math.floor(this.valueOf()/1e3)},u.valueOf=function(){return this.$d.getTime()},u.startOf=function(f,y){var d=this,m=!!S.u(y)||y,w=S.p(f),x=function(lt,W){var it=S.w(d.$u?Date.UTC(d.$y,W,lt):new Date(d.$y,W,lt),d);return m?it:it.endOf(p)},O=function(lt,W){return S.w(d.toDate()[lt].apply(d.toDate("s"),(m?[0,0,0,0]:[23,59,59,999]).slice(W)),d)},L=this.$W,U=this.$M,G=this.$D,gt="set"+(this.$u?"UTC":"");switch(w){case T:return m?x(1,0):x(31,11);case g:return m?x(1,U):x(0,U+1);case h:var at=this.$locale().weekStart||0,Dt=(L<at?L+7:L)-at;return x(m?G-Dt:G+(6-Dt),U);case p:case k:return O(gt+"Hours",0);case l:return O(gt+"Minutes",1);case s:return O(gt+"Seconds",2);case a:return O(gt+"Milliseconds",3);default:return this.clone()}},u.endOf=function(f){return this.startOf(f,!1)},u.$set=function(f,y){var d,m=S.p(f),w="set"+(this.$u?"UTC":""),x=(d={},d[p]=w+"Date",d[k]=w+"Date",d[g]=w+"Month",d[T]=w+"FullYear",d[l]=w+"Hours",d[s]=w+"Minutes",d[a]=w+"Seconds",d[i]=w+"Milliseconds",d)[m],O=m===p?this.$D+(y-this.$W):y;if(m===g||m===T){var L=this.clone().set(k,1);L.$d[x](O),L.init(),this.$d=L.set(k,Math.min(this.$D,L.daysInMonth())).$d}else x&&this.$d[x](O);return this.init(),this},u.set=function(f,y){return this.clone().$set(f,y)},u.get=function(f){return this[S.p(f)]()},u.add=function(f,y){var d,m=this;f=Number(f);var w=S.p(y),x=function(U){var G=E(m);return S.w(G.date(G.date()+Math.round(U*f)),m)};if(w===g)return this.set(g,this.$M+f);if(w===T)return this.set(T,this.$y+f);if(w===p)return x(1);if(w===h)return x(7);var O=(d={},d[s]=r,d[l]=o,d[a]=n,d)[w]||1,L=this.$d.getTime()+f*O;return S.w(L,this)},u.subtract=function(f,y){return this.add(-1*f,y)},u.format=function(f){var y=this,d=this.$locale();if(!this.isValid())return d.invalidDate||b;var m=f||"YYYY-MM-DDTHH:mm:ssZ",w=S.z(this),x=this.$H,O=this.$m,L=this.$M,U=d.weekdays,G=d.months,gt=d.meridiem,at=function(W,it,Ot,Wt){return W&&(W[it]||W(y,m))||Ot[it].slice(0,Wt)},Dt=function(W){return S.s(x%12||12,W,"0")},lt=gt||function(W,it,Ot){var Wt=W<12?"AM":"PM";return Ot?Wt.toLowerCase():Wt};return m.replace(P,function(W,it){return it||function(Ot){switch(Ot){case"YY":return String(y.$y).slice(-2);case"YYYY":return S.s(y.$y,4,"0");case"M":return L+1;case"MM":return S.s(L+1,2,"0");case"MMM":return at(d.monthsShort,L,G,3);case"MMMM":return at(G,L);case"D":return y.$D;case"DD":return S.s(y.$D,2,"0");case"d":return String(y.$W);case"dd":return at(d.weekdaysMin,y.$W,U,2);case"ddd":return at(d.weekdaysShort,y.$W,U,3);case"dddd":return U[y.$W];case"H":return String(x);case"HH":return S.s(x,2,"0");case"h":return Dt(1);case"hh":return Dt(2);case"a":return lt(x,O,!0);case"A":return lt(x,O,!1);case"m":return String(O);case"mm":return S.s(O,2,"0");case"s":return String(y.$s);case"ss":return S.s(y.$s,2,"0");case"SSS":return S.s(y.$ms,3,"0");case"Z":return w}return null}(W)||w.replace(":","")})},u.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},u.diff=function(f,y,d){var m,w=this,x=S.p(y),O=E(f),L=(O.utcOffset()-this.utcOffset())*r,U=this-O,G=function(){return S.m(w,O)};switch(x){case T:m=G()/12;break;case g:m=G();break;case v:m=G()/3;break;case h:m=(U-L)/6048e5;break;case p:m=(U-L)/864e5;break;case l:m=U/o;break;case s:m=U/r;break;case a:m=U/n;break;default:m=U}return d?m:S.a(m)},u.daysInMonth=function(){return this.endOf(g).$D},u.$locale=function(){return N[this.$L]},u.locale=function(f,y){if(!f)return this.$L;var d=this.clone(),m=Y(f,y,!0);return m&&(d.$L=m),d},u.clone=function(){return S.w(this.$d,this)},u.toDate=function(){return new Date(this.valueOf())},u.toJSON=function(){return this.isValid()?this.toISOString():null},u.toISOString=function(){return this.$d.toISOString()},u.toString=function(){return this.$d.toUTCString()},c}(),Ht=St.prototype;return E.prototype=Ht,[["$ms",i],["$s",a],["$m",s],["$H",l],["$W",p],["$M",g],["$y",T],["$D",k]].forEach(function(c){Ht[c[1]]=function(u){return this.$g(u,c[0],c[1])}}),E.extend=function(c,u){return c.$i||(c(u,St,E),c.$i=!0),E},E.locale=Y,E.isDayjs=H,E.unix=function(c){return E(1e3*c)},E.en=N[D],E.Ls=N,E.p={},E})})(Ie);var ar=Ie.exports;const ie=Pt(ar);var Ne={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(oe,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(o,i,a){var s,l=function(v,T,k){k===void 0&&(k={});var b=new Date(v),$=function(P,A){A===void 0&&(A={});var C=A.timeZoneName||"short",j=P+"|"+C,D=r[j];return D||(D=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:P,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:C}),r[j]=D),D}(T,k);return $.formatToParts(b)},p=function(v,T){for(var k=l(v,T),b=[],$=0;$<k.length;$+=1){var P=k[$],A=P.type,C=P.value,j=n[A];j>=0&&(b[j]=parseInt(C,10))}var D=b[3],N=D===24?0:D,B=b[0]+"-"+b[1]+"-"+b[2]+" "+N+":"+b[4]+":"+b[5]+":000",H=+v;return(a.utc(B).valueOf()-(H-=H%1e3))/6e4},h=i.prototype;h.tz=function(v,T){v===void 0&&(v=s);var k=this.utcOffset(),b=this.toDate(),$=b.toLocaleString("en-US",{timeZone:v}),P=Math.round((b-new Date($))/1e3/60),A=a($,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(b.getTimezoneOffset()/15)-P,!0);if(T){var C=A.utcOffset();A=A.add(k-C,"minute")}return A.$x.$timezone=v,A},h.offsetName=function(v){var T=this.$x.$timezone||a.tz.guess(),k=l(this.valueOf(),T,{timeZoneName:v}).find(function(b){return b.type.toLowerCase()==="timezonename"});return k&&k.value};var g=h.startOf;h.startOf=function(v,T){if(!this.$x||!this.$x.$timezone)return g.call(this,v,T);var k=a(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return g.call(k,v,T).tz(this.$x.$timezone,!0)},a.tz=function(v,T,k){var b=k&&T,$=k||T||s,P=p(+a(),$);if(typeof v!="string")return a(v).tz($);var A=function(N,B,H){var Y=N-60*B*1e3,E=p(Y,H);if(B===E)return[Y,B];var S=p(Y-=60*(E-B)*1e3,H);return E===S?[Y,E]:[N-60*Math.min(E,S)*1e3,Math.max(E,S)]}(a.utc(v,b).valueOf(),P,$),C=A[0],j=A[1],D=a(C).utcOffset(j);return D.$x.$timezone=$,D},a.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},a.tz.setDefault=function(v){s=v}}})})(Ne);var lr=Ne.exports;const cr=Pt(lr);var Pe={exports:{}};(function(t,e){(function(n,r){t.exports=r()})(oe,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,o=/([+-]|\d\d)/g;return function(i,a,s){var l=a.prototype;s.utc=function(b){var $={date:b,utc:!0,args:arguments};return new a($)},l.utc=function(b){var $=s(this.toDate(),{locale:this.$L,utc:!0});return b?$.add(this.utcOffset(),n):$},l.local=function(){return s(this.toDate(),{locale:this.$L,utc:!1})};var p=l.parse;l.parse=function(b){b.utc&&(this.$u=!0),this.$utils().u(b.$offset)||(this.$offset=b.$offset),p.call(this,b)};var h=l.init;l.init=function(){if(this.$u){var b=this.$d;this.$y=b.getUTCFullYear(),this.$M=b.getUTCMonth(),this.$D=b.getUTCDate(),this.$W=b.getUTCDay(),this.$H=b.getUTCHours(),this.$m=b.getUTCMinutes(),this.$s=b.getUTCSeconds(),this.$ms=b.getUTCMilliseconds()}else h.call(this)};var g=l.utcOffset;l.utcOffset=function(b,$){var P=this.$utils().u;if(P(b))return this.$u?0:P(this.$offset)?g.call(this):this.$offset;if(typeof b=="string"&&(b=function(D){D===void 0&&(D="");var N=D.match(r);if(!N)return null;var B=(""+N[0]).match(o)||["-",0,0],H=B[0],Y=60*+B[1]+ +B[2];return Y===0?0:H==="+"?Y:-Y}(b),b===null))return this;var A=Math.abs(b)<=16?60*b:b,C=this;if($)return C.$offset=A,C.$u=b===0,C;if(b!==0){var j=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(C=this.local().add(A+j,n)).$offset=A,C.$x.$localOffset=j}else C=this.utc();return C};var v=l.format;l.format=function(b){var $=b||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return v.call(this,$)},l.valueOf=function(){var b=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*b},l.isUTC=function(){return!!this.$u},l.toISOString=function(){return this.toDate().toISOString()},l.toString=function(){return this.toDate().toUTCString()};var T=l.toDate;l.toDate=function(b){return b==="s"&&this.$offset?s(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():T.call(this)};var k=l.diff;l.diff=function(b,$,P){if(b&&this.$u===b.$u)return k.call(this,b,$,P);var A=this.local(),C=s(b).local();return k.call(A,C,$,P)}}})})(Pe);var ur=Pe.exports;const fr=Pt(ur);ie.extend(fr),ie.extend(cr);const je={offset:180,region:"Asia",location:"Kuwait"};function jt(){return ie.tz(new Date,`${je.region}/${je.location}`).format("DD.MM.YYYY")}async function Fe(t=1e3){return new Promise(e=>setTimeout(e,t))}function dr(t){return Object.entries(t)}function Ft(t){return t=Math.abs(t),t>9?`${t}`:`0${t}`}function Re(t=0,e=Number.MAX_SAFE_INTEGER-1){return Math.floor(Math.random()*(e-t+1))+t}var hr=function(e){try{var n=/\B(\/\/ ==UserScript==\r?\n([\S\s]*?)\r?\n\/\/ ==\/UserScript==)([\S\s]*)/,r=e.match(n);if(!r)return null;var o=r[1],i=r[2],a=r[3],s={},l=i.split(`
`);return l.forEach(function(p){var h=p.match(/@([\w-]+)\s+(.+)/);h&&(s[h[1]]=s[h[1]]||[],s[h[1]].push(h[2]))}),{meta:s,metablock:o,content:a}}catch(p){return console&&console.error(p),null}};const gr=Pt(hr),[pr,mr]=V(!1);class br{get currentVersion(){return GM_info.script.version}checkUpdates(){pr()||(R.info("Check updates..."),GM_xmlhttpRequest({url:rr,onload:({response:e})=>{const n=gr(e);if(!n){R.error("Failed to parse metadata");return}this.checkMetadata(n.meta)},onerror:e=>{R.error(e)}}))}checkMetadata(e){if(e.version[0]===this.currentVersion)return;if(R.info("Founded new version",e.version),!confirm(`\u041D\u0430\u0439\u0434\u0435\u043D\u0430 \u043D\u043E\u0432\u0430\u044F \u0432\u0435\u0440\u0441\u0438\u044F ${e.version}.
\u0416\u0435\u043B\u0430\u0435\u0442\u0435 \u043E\u0431\u043D\u043E\u0432\u0438\u0442\u044C?`)){mr(!0);return}GM_openInTab(or,{active:!0}).onclose=()=>{location.reload()}}}const Ue=new br,Be={info:"#2ecc71",debug:"#7f8c8d",warn:"#f39c12",error:"#c0392b"};function yr(t){return[`background: ${Be[t]}`,"border-radius: 0.5em","color: white","font-weight: bold","padding: 2px 0.5em","font-family: cursive"].join(";")}function vr(t){return dr(Be).reduce((e,[n])=>(e[n]=(...r)=>{console[n](`%c${t}`,yr(n),...r)},e),{})}const R=vr(`tryrating-userscript ${Ue.currentVersion}`),se=()=>[{date:jt(),total:0,estimated:0,list:[]}],[yt,ae]=V([]);class wr{STORAGE_KEY="tryrating-storage-v3";constructor(){this.read()}get taskList(){return yt()}read(){const e=GM_getValue(this.STORAGE_KEY,se());R.info("Loaded tasks",e),ae(e)}reset(){ae(se()),GM_setValue(this.STORAGE_KEY,yt())}write(e){const n=this.getTaskList();n.total+=1,n.estimated+=e.estimated;const r=n.list.find(i=>i.type===e.type);r?(r.count+=1,r.estimated+=e.estimated):n.list.push({count:1,type:e.type,estimated:e.estimated});const o=[n,...yt().filter(i=>i.date!==n.date)];ae(o),GM_setValue(this.STORAGE_KEY,yt())}getTaskList(){const e=jt();R.info("Current date",e);const n=yt().find(r=>r.date===e);return R.info("Task list",n),n||se()[0]}}const Rt=new wr;function _(t,e,...n){const r=document.createElement(t);return e instanceof Node?r.append(e):typeof e=="string"?r.append(Tr(e)):Array.isArray(e)?r.append(...e):(Object.assign(r,e),Object.assign(r.style,e?.style)),r.append(...n),r}function Tr(t){return document.createTextNode(t)}function ze(t,e,n){const r=new MutationObserver((o,i)=>{for(const a of o)e(a,i)});return r.observe(t,{childList:!0,subtree:!0,...n}),()=>r.disconnect()}function Ye({selector:t,target:e=document.body,rejectTimeoutMs:n,signal:r}){return new Promise((o,i)=>{const a=ze(e,(p,h)=>{const g=e.querySelector(t);g&&(h.disconnect(),o(g))}),s={timeout:null,abort:null},l=p=>{s.timeout&&clearTimeout(s.timeout),s.abort&&r.removeEventListener("abort",s.abort),a(),i(p)};n>0&&(s.timeout=setTimeout(()=>l(`${Ye.name} rejected (${n}ms)`),n)),r&&!r.aborted&&(s.abort=()=>l(r.reason),r.addEventListener("abort",s.abort))})}function qe(t){return Ft(Number((t%6e4/1e3).toFixed(0)))}function Ge(t){const e=Ft(Math.floor(t/6e4)),n=qe(t);return`${e}:${n}`}function He(t){const e=Ft(Math.floor(t/36e5)),n=Ft(Math.floor(t%36e5/6e4)),r=qe(t);return`${e}:${n}:${r}`}const xr=`const root = document.querySelector('#root')
const daySortButton = document.querySelector('#day-sort-button')
const weekSortButton = document.querySelector('#week-sort-button')
const monthSortButton = document.querySelector('#month-sort-button')
const sortButton = document.querySelector('#sort-button')
const downloadButton = document.querySelector('#download-button')

daySortButton.addEventListener('click', () => sortTable('day'))
weekSortButton.addEventListener('click', () => sortTable('week'))
monthSortButton.addEventListener('click', () => sortTable('month'))
sortButton.addEventListener('click', () => sortTable('desc'))

// https://github.com/zero-dependency/dom/blob/17c3739f94515d14283d3a3377a80147aaa8378f/src/html.ts
function el(tag, props, ...children) {
  const el = document.createElement(tag)

  if (props instanceof Node) {
    el.append(props)
  } else if (typeof props === 'string') {
    el.append(text(props))
  } else if (Array.isArray(props)) {
    el.append(...props)
  } else {
    Object.assign(el, props)
    Object.assign(el.style, props?.style)
  }

  el.append(...children)

  return el
}

function text(text) {
  return document.createTextNode(text)
}

function addZero(i) {
  if (i < 10) i = \`0\${i}\`
  return i
}

function msToSeconds(ms) {
  return addZero(Number(((ms % 60000) / 1000).toFixed(0)))
}

function msToTime(ms) {
  const minutes = addZero(Math.floor(ms / 60000))
  const seconds = msToSeconds(ms)
  return \`\${minutes}:\${seconds}\`
}

function msToTimeFull(ms) {
  const hours = addZero(Math.floor(ms / 3600000))
  const minutes = addZero(Math.floor((ms % 3600000) / 60000))
  const seconds = msToSeconds(ms)
  return \`\${hours}:\${minutes}:\${seconds}\`
}

function sortTable(type) {
  if (type === 'desc') {
    root.classList.toggle('desc')

    if (root.classList.contains('desc')) {
      sortButton.textContent = 'Sort (DESC)'
    } else {
      sortButton.textContent = 'Sort (ASC)'
    }
  }

  if (type === 'day') {
    createTable('day')
  }

  if (type === 'week') {
    createTable('week')
  }

  if (type === 'month') {
    createTable('month')
  }
}

function createTableHead() {
  return el('tr', el('th', 'Task'), el('th', 'Count'), el('th', 'Estimated'))
}

function createTableCaption(task) {
  return el(
    'caption',
    el('p', \`Date: \${task.date}\`),
    el('p', \`Tasks: \${task.total}\`),
    el('p', \`Estimated: \${msToTimeFull(task.estimated)}\`)
  )
}

function createTableTr(task) {
  return el(
    'tr',
    el('td', task.type),
    el('td', \`\${task.count}\`),
    el('td', msToTimeFull(task.estimated))
  )
}

function createTable(sortType) {
  root.innerHTML = ''

  function initTableData() {
    return {
      table: el('table'),
      tbody: el('tbody'),
      day: 0,
      date: '',
      total: 0,
      estimated: 0,
      list: []
    }
  }

  function pushTable(date) {
    tableData.table.append(
      createTableCaption({
        date: \`\${tableData.date} - \${date} (\${tableData.day - 1} days)\`,
        total: tableData.total,
        estimated: tableData.estimated
      })
    )
    tableData.tbody.append(createTableHead(), ...tableData.list)
    tableData.table.append(tableData.tbody)
    root.prepend(tableData.table)
    tableData = initTableData()
  }

  let tableData = initTableData()
  const daysBySortType = sortType === 'week' ? 7 : 30

  for (const { date, list, total, estimated } of tasks) {
    if (sortType === 'day') {
      createTableAllGroup({ date, list, total, estimated })
      continue
    }

    if (sortType === 'week' || sortType === 'month') {
      tableData.day++
      if (tableData.day > daysBySortType) {
        pushTable(date)
        tableData.day = 1
      }

      if (!tableData.date) tableData.date = date
      tableData.total += total
      tableData.estimated += estimated

      for (const task of list) {
        const tr = createTableTr(task)
        tableData.list.push(tr)
      }
    }
  }

  if (sortType === 'week' && tableData.list.length) {
    pushTable(tasks.at(-1).date)
  }
}

function createTableAllGroup(task) {
  const table = el('table')
  const tbody = el('tbody')

  const caption = createTableCaption(task)
  table.append(caption)

  const thead = createTableHead()
  tbody.append(thead)

  for (const currentTask of task.list) {
    const tr = createTableTr(currentTask)
    tbody.append(tr)
  }

  table.append(tbody)
  root.append(table)
}

downloadButton.addEventListener('click', () => {
  const body = document.body.cloneNode(true)
  body.querySelector('button')?.remove()
  body.querySelector('script')?.remove()

  const blob = new Blob([body.outerHTML], {
    type: 'text/html'
  })

  const link = document.createElement('a')
  Object.assign(link, {
    target: '_blank',
    href: URL.createObjectURL(blob),
    download: 'tryrating-__CURRENT_DATE__.html'
  })

  link.click()
})
`,kr=`* {
  margin: 0;
  box-sizing: border-box;
}

body {
  font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif;
  background-color: #9999;
}

table {
  width: 100%;
  border-collapse: collapse;
  border: 1px solid #ddd;
}

caption {
  background: linear-gradient(to bottom, #f2f2f2, #e6e6e6);
  color: #333;
  font-weight: bold;
  font-size: 18px;
  padding: 10px;
  text-align: center;
}

p {
  text-align: start;
}

th {
  background-color: #f2f2f2;
  font-weight: bold;
  padding: 8px;
  text-align: left;
  border-bottom: 1px solid #ddd;
}

td {
  padding: 8px;
  border-bottom: 1px solid #ddd;
}

tr:nth-child(odd) {
  background-color: #f2f2f2;
}

tr:nth-child(even) {
  background-color: #f9f9f9;
}

tr:hover {
  background-color: #e6e6e6;
}

td:hover {
  background-color: #e6e6e6;
}

th:first-child,
td:first-child {
  width: 80%;
}

th:nth-child(2),
td:nth-child(2) {
  width: 10%;
}

th:nth-child(3),
td:nth-child(3) {
  width: 10%;
}

.buttons {
  position: fixed;
  right: 9rem;
  top: 1rem;
  display: flex;
  gap: 1rem;
}

button {
  font-family: inherit;
  font-weight: 600;
  display: inline-block;
  border: none;
  padding: 10px 20px;
  background-color: #f5f5f5;
  color: #333;
  font-size: 1rem;
  text-align: center;
  text-decoration: none;
  cursor: pointer;
  border-collapse: collapse;
  border-spacing: 0;
  border: 1px solid #ddd;
  box-shadow: 0px 2px 4px rgba(0, 0, 0, 0.4);
}

button:hover {
  background-color: #e0e0e0;
}

button:focus {
  outline: none;
  box-shadow: 0 0 0 2px #999;
}

#root {
  display: flex;
  flex-direction: column;
  margin-top: 5rem;
  margin-left: 8rem;
  margin-right: 8rem;
}

.desc {
  flex-direction: column-reverse !important;
}
`;class $r{tasks;el;insertData(){this.el.prepend(_("script",`const tasks = ${JSON.stringify(this.tasks)};`))}page(){this.tasks=[];const e=_("div",{id:"root",className:"asc"}),n=_("style",kr),r=_("script",xr.replace("__CURRENT_DATE__",jt())),o=_("div",{className:"buttons"}),i=_("button",{id:"sort-button"},"Sort (ASC)"),a=_("button",{id:"day-sort-button"},"Day Sort"),s=_("button",{id:"week-sort-button"},"Week Sort"),l=_("button",{id:"month-sort-button"},"Month Sort"),p=_("button",{id:"download-button"},"Download");return o.append(i,a,s,l,p),this.el=_("div",n,o,e,r),{page:this.el,root:e}}table(){return _("table")}caption(e,n,r){return this.tasks.unshift({date:e,total:n,estimated:r,list:[]}),_("caption",_("p",`Date: ${e}`),_("p",`Tasks: ${n}`),_("p",`Estimated: ${He(r)}`))}head(){return _("tr",_("th","Task"),_("th","Count"),_("th","Estimated"))}tr(e){const n=this.tasks.at(0);return n&&n.list.push(e),_("tr",_("td",e.type),_("td",`${e.count}`),_("td",He(e.estimated)))}open(e){const n=new Blob([e.outerHTML],{type:"text/html"});_("a",{target:"_blank",href:URL.createObjectURL(n)}).click()}}class Sr{taskTableGenerator=new $r;generate(){const{page:e,root:n}=this.taskTableGenerator.page();for(const{date:r,list:o,total:i,estimated:a}of Rt.taskList){const s=this.taskTableGenerator.table(),l=_("tbody"),p=this.taskTableGenerator.caption(r,i,a);s.append(p);const h=this.taskTableGenerator.head();l.append(h);for(const g of o){const v=this.taskTableGenerator.tr(g);l.append(v)}s.append(l),n.prepend(s)}this.taskTableGenerator.insertData(),this.taskTableGenerator.open(e)}}const We=new Sr;function le({label:t,position:e="bottom",size:n="large"}){return{"aria-label":t,"data-microtip-size":n,"data-microtip-position":e,role:"tooltip"}}var Dr=et("<button>A");const[ce,Or]=V(!0);class Mr{get isAutoSubmit(){return ce()}toggle(){Or(!ce())}}const vt=new Mr,Er=()=>(()=>{var t=Dr();return ee(t,Nt(()=>le({label:"Auto submit",position:"left",size:"medium"}),{get classList(){return{enabled:ce()}},onClick:()=>vt.toggle()}),!1,!0),t})(),ue=Symbol("store-raw"),ft=Symbol("store-node"),nt=Symbol("store-has"),Ve=Symbol("store-self");function Ke(t){let e=t[Z];if(!e&&(Object.defineProperty(t,Z,{value:e=new Proxy(t,_r)}),!Array.isArray(t))){const n=Object.keys(t),r=Object.getOwnPropertyDescriptors(t);for(let o=0,i=n.length;o<i;o++){const a=n[o];r[a].get&&Object.defineProperty(t,a,{enumerable:r[a].enumerable,get:r[a].get.bind(e)})}}return e}function Ut(t){let e;return t!=null&&typeof t=="object"&&(t[Z]||!(e=Object.getPrototypeOf(t))||e===Object.prototype||Array.isArray(t))}function wt(t,e=new Set){let n,r,o,i;if(n=t!=null&&t[ue])return n;if(!Ut(t)||e.has(t))return t;if(Array.isArray(t)){Object.isFrozen(t)?t=t.slice(0):e.add(t);for(let a=0,s=t.length;a<s;a++)o=t[a],(r=wt(o,e))!==o&&(t[a]=r)}else{Object.isFrozen(t)?t=Object.assign({},t):e.add(t);const a=Object.keys(t),s=Object.getOwnPropertyDescriptors(t);for(let l=0,p=a.length;l<p;l++)i=a[l],!s[i].get&&(o=t[i],(r=wt(o,e))!==o&&(t[i]=r))}return t}function Bt(t,e){let n=t[e];return n||Object.defineProperty(t,e,{value:n=Object.create(null)}),n}function Tt(t,e,n){if(t[e])return t[e];const[r,o]=V(n,{equals:!1,internal:!0});return r.$=o,t[e]=r}function Ar(t,e){const n=Reflect.getOwnPropertyDescriptor(t,e);return!n||n.get||!n.configurable||e===Z||e===ft||(delete n.value,delete n.writable,n.get=()=>t[Z][e]),n}function Ze(t){Kt()&&Tt(Bt(t,ft),Ve)()}function Cr(t){return Ze(t),Reflect.ownKeys(t)}const _r={get(t,e,n){if(e===ue)return t;if(e===Z)return n;if(e===me)return Ze(t),n;const r=Bt(t,ft),o=r[e];let i=o?o():t[e];if(e===ft||e===nt||e==="__proto__")return i;if(!o){const a=Object.getOwnPropertyDescriptor(t,e);Kt()&&(typeof i!="function"||t.hasOwnProperty(e))&&!(a&&a.get)&&(i=Tt(r,e,i)())}return Ut(i)?Ke(i):i},has(t,e){return e===ue||e===Z||e===me||e===ft||e===nt||e==="__proto__"?!0:(Kt()&&Tt(Bt(t,nt),e)(),e in t)},set(){return!0},deleteProperty(){return!0},ownKeys:Cr,getOwnPropertyDescriptor:Ar};function zt(t,e,n,r=!1){if(!r&&t[e]===n)return;const o=t[e],i=t.length;n===void 0?(delete t[e],t[nt]&&t[nt][e]&&o!==void 0&&t[nt][e].$()):(t[e]=n,t[nt]&&t[nt][e]&&o===void 0&&t[nt][e].$());let a=Bt(t,ft),s;if((s=Tt(a,e,o))&&s.$(()=>n),Array.isArray(t)&&t.length!==i){for(let l=t.length;l<i;l++)(s=a[l])&&s.$();(s=Tt(a,"length",i))&&s.$(t.length)}(s=a[Ve])&&s.$()}function Xe(t,e){const n=Object.keys(e);for(let r=0;r<n.length;r+=1){const o=n[r];zt(t,o,e[o])}}function Lr(t,e){if(typeof e=="function"&&(e=e(t)),e=wt(e),Array.isArray(e)){if(t===e)return;let n=0,r=e.length;for(;n<r;n++){const o=e[n];t[n]!==o&&zt(t,n,o)}zt(t,"length",r)}else Xe(t,e)}function xt(t,e,n=[]){let r,o=t;if(e.length>1){r=e.shift();const a=typeof r,s=Array.isArray(t);if(Array.isArray(r)){for(let l=0;l<r.length;l++)xt(t,[r[l]].concat(e),n);return}else if(s&&a==="function"){for(let l=0;l<t.length;l++)r(t[l],l)&&xt(t,[l].concat(e),n);return}else if(s&&a==="object"){const{from:l=0,to:p=t.length-1,by:h=1}=r;for(let g=l;g<=p;g+=h)xt(t,[g].concat(e),n);return}else if(e.length>1){xt(t[r],e,[r].concat(n));return}o=t[r],n=[r].concat(n)}let i=e[0];typeof i=="function"&&(i=i(o,n),i===o)||r===void 0&&i==null||(i=wt(i),r===void 0||Ut(o)&&Ut(i)&&!Array.isArray(i)?Xe(o,i):zt(t,r,i))}function Je(...[t,e]){const n=wt(t||{}),r=Array.isArray(n),o=Ke(n);function i(...a){tt(()=>{r&&a.length===1?Lr(n,a[0]):xt(n,a)})}return[o,i]}var Ir=et("<div>"),Yt=class{x;y;width;height;constructor(t){this.x=Math.floor(t.x),this.y=Math.floor(t.y),this.width=Math.floor(t.width),this.height=Math.floor(t.height)}get rect(){return{x:this.x,y:this.y,width:this.width,height:this.height}}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get center(){return{x:this.x+this.width*.5,y:this.y+this.height*.5}}get corners(){return{topLeft:{x:this.left,y:this.top},topRight:{x:this.right,y:this.top},bottomRight:{x:this.left,y:this.bottom},bottomLeft:{x:this.right,y:this.bottom}}}},kt=t=>{let e=new Yt(t.getBoundingClientRect());const{transform:n}=getComputedStyle(t);return n&&(e=Nr(e,n)),e},Nr=(t,e)=>{let n,r;if(e.startsWith("matrix3d(")){const o=e.slice(9,-1).split(/, /);n=+o[12],r=+o[13]}else if(e.startsWith("matrix(")){const o=e.slice(7,-1).split(/, /);n=+o[4],r=+o[5]}else n=0,r=0;return new Yt({...t,x:t.x-n,y:t.y-r})},dt=()=>({x:0,y:0}),Pr=(t,e)=>t.x===e.x&&t.y===e.y,fe=(t,e)=>new Yt({...t,x:t.x+e.x,y:t.y+e.y}),jr=(t,e)=>{const n=Math.max(t.top,e.top),r=Math.max(t.left,e.left),o=Math.min(t.right,e.right),i=Math.min(t.bottom,e.bottom),a=o-r,s=i-n;if(r<o&&n<i){const l=t.width*t.height,p=e.width*e.height,h=a*s;return h/(l+p-h)}return 0},de=(t,e)=>t.x===e.x&&t.y===e.y&&t.width===e.width&&t.height===e.height,Fr=(t,e,n)=>{const r=t.transformed,o={ratio:0,droppable:null};for(const i of e){const a=jr(r,i.layout);a>o.ratio?(o.ratio=a,o.droppable=i):a>0&&a===o.ratio&&i.id===n.activeDroppableId&&(o.droppable=i)}return o.droppable},Qe=On(),Rr=t=>{const e=Nt({collisionDetector:Fr},t),[n,r]=Je({draggables:{},droppables:{},sensors:{},active:{draggableId:null,get draggable(){return n.active.draggableId!==null?n.draggables[n.active.draggableId]:null},droppableId:null,get droppable(){return n.active.droppableId!==null?n.droppables[n.active.droppableId]:null},sensorId:null,get sensor(){return n.active.sensorId!==null?n.sensors[n.active.sensorId]:null},overlay:null}}),o=(c,u,f)=>{c.substring(0,c.length-1),F(()=>n[c][u])&&r(c,u,"transformers",f.id,f)},i=(c,u,f)=>{c.substring(0,c.length-1),F(()=>n[c][u])&&F(()=>n[c][u].transformers[f])&&r(c,u,"transformers",f,void 0)},a=({id:c,node:u,layout:f,data:y})=>{const d=n.draggables[c],m={id:c,node:u,layout:f,data:y,_pendingCleanup:!1};let w;if(!d)Object.defineProperties(m,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{if(n.active.overlay)return dt();const x=Object.values(n.draggables[c].transformers);return x.sort((O,L)=>O.order-L.order),x.reduce((O,L)=>L.callback(O),dt())}},transformed:{enumerable:!0,configurable:!0,get:()=>fe(n.draggables[c].layout,n.draggables[c].transform)}});else if(n.active.draggableId===c&&!n.active.overlay){const x={x:d.layout.x-f.x,y:d.layout.y-f.y},O="addDraggable-existing-offset",L=d.transformers[O],U=L?L.callback(x):x;w={id:O,order:100,callback:G=>({x:G.x+U.x,y:G.y+U.y})},S(()=>i("draggables",c,O))}tt(()=>{r("draggables",c,m),w&&o("draggables",c,w)}),n.active.draggable&&j()},s=c=>{F(()=>n.draggables[c])&&(r("draggables",c,"_pendingCleanup",!0),queueMicrotask(()=>l(c)))},l=c=>{if(n.draggables[c]?._pendingCleanup){const u=n.active.draggableId===c;tt(()=>{u&&r("active","draggableId",null),r("draggables",c,void 0)})}},p=({id:c,node:u,layout:f,data:y})=>{const d=n.droppables[c],m={id:c,node:u,layout:f,data:y,_pendingCleanup:!1};d||Object.defineProperties(m,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{const w=Object.values(n.droppables[c].transformers);return w.sort((x,O)=>x.order-O.order),w.reduce((x,O)=>O.callback(x),dt())}},transformed:{enumerable:!0,configurable:!0,get:()=>fe(n.droppables[c].layout,n.droppables[c].transform)}}),r("droppables",c,m),n.active.draggable&&j()},h=c=>{F(()=>n.droppables[c])&&(r("droppables",c,"_pendingCleanup",!0),queueMicrotask(()=>g(c)))},g=c=>{if(n.droppables[c]?._pendingCleanup){const u=n.active.droppableId===c;tt(()=>{u&&r("active","droppableId",null),r("droppables",c,void 0)})}},v=({id:c,activators:u})=>{r("sensors",c,{id:c,activators:u,coordinates:{origin:{x:0,y:0},current:{x:0,y:0},get delta(){return{x:n.sensors[c].coordinates.current.x-n.sensors[c].coordinates.origin.x,y:n.sensors[c].coordinates.current.y-n.sensors[c].coordinates.origin.y}}}})},T=c=>{if(!F(()=>n.sensors[c]))return;const u=n.active.sensorId===c;tt(()=>{u&&r("active","sensorId",null),r("sensors",c,void 0)})},k=({node:c,layout:u})=>{const f=n.active.overlay,y={node:c,layout:u};f||Object.defineProperties(y,{id:{enumerable:!0,configurable:!0,get:()=>n.active.draggable?.id},data:{enumerable:!0,configurable:!0,get:()=>n.active.draggable?.data},transformers:{enumerable:!0,configurable:!0,get:()=>Object.fromEntries(Object.entries(n.active.draggable?n.active.draggable.transformers:{}).filter(([d])=>d!=="addDraggable-existing-offset"))},transform:{enumerable:!0,configurable:!0,get:()=>{const d=Object.values(n.active.overlay?n.active.overlay.transformers:[]);return d.sort((m,w)=>m.order-w.order),d.reduce((m,w)=>w.callback(m),dt())}},transformed:{enumerable:!0,configurable:!0,get:()=>n.active.overlay?fe(n.active.overlay.layout,n.active.overlay.transform):new Yt({x:0,y:0,width:0,height:0})}}),r("active","overlay",y)},b=()=>r("active","overlay",null),$=(c,u)=>{tt(()=>{r("sensors",c,"coordinates",{origin:{...u},current:{...u}}),r("active","sensorId",c)})},P=c=>{const u=n.active.sensorId;u&&r("sensors",u,"coordinates","current",{...c})},A=()=>r("active","sensorId",null),C=(c,u)=>{const f={};for(const d of Object.values(n.sensors))if(d)for(const[m,w]of Object.entries(d.activators))f[m]??=[],f[m].push({sensor:d,activator:w});const y={};for(const d in f){let m=d;u&&(m=`on${d}`),y[m]=w=>{for(const{activator:x}of f[d]){if(n.active.sensor)break;x(w,c)}}}return y},j=()=>{let c=!1;const u=Object.values(n.draggables),f=Object.values(n.droppables),y=n.active.overlay;return tt(()=>{const d=new WeakMap;for(const m of u)if(m){const w=m.layout;d.has(m.node)||d.set(m.node,kt(m.node));const x=d.get(m.node);de(w,x)||(r("draggables",m.id,"layout",x),c=!0)}for(const m of f)if(m){const w=m.layout;d.has(m.node)||d.set(m.node,kt(m.node));const x=d.get(m.node);de(w,x)||(r("droppables",m.id,"layout",x),c=!0)}if(y){const m=y.layout,w=kt(y.node);de(m,w)||(r("active","overlay","layout",w),c=!0)}}),c},D=()=>{const c=n.active.overlay??n.active.draggable;if(c){const u=e.collisionDetector(c,Object.values(n.droppables),{activeDroppableId:n.active.droppableId}),f=u?u.id:null;n.active.droppableId!==f&&r("active","droppableId",f)}},N=c=>{const u={id:"sensorMove",order:0,callback:f=>n.active.sensor?{x:f.x+n.active.sensor.coordinates.delta.x,y:f.y+n.active.sensor.coordinates.delta.y}:f};j(),tt(()=>{r("active","draggableId",c),o("draggables",c,u)}),D()},B=()=>{const c=F(()=>n.active.draggableId);tt(()=>{c!==null&&i("draggables",c,"sensorMove"),r("active",["draggableId","droppableId"],null)}),j()},H=c=>{Q(()=>{const u=n.active.draggable;u&&F(()=>c({draggable:u}))})},Y=c=>{Q(()=>{const u=n.active.draggable;if(u){const f=F(()=>n.active.overlay);Object.values(f?f.transform:u.transform),F(()=>c({draggable:u,overlay:f}))}})},E=c=>{Q(()=>{const u=n.active.draggable,f=n.active.droppable;u&&F(()=>c({draggable:u,droppable:f,overlay:n.active.overlay}))})},S=c=>{Q(({previousDraggable:u,previousDroppable:f,previousOverlay:y})=>{const d=n.active.draggable,m=d?n.active.droppable:null,w=d?n.active.overlay:null;return!d&&u&&F(()=>c({draggable:u,droppable:f,overlay:y})),{previousDraggable:d,previousDroppable:m,previousOverlay:w}},{previousDraggable:null,previousDroppable:null,previousOverlay:null})};Y(()=>D()),e.onDragStart&&H(e.onDragStart),e.onDragMove&&Y(e.onDragMove),e.onDragOver&&E(e.onDragOver),e.onDragEnd&&S(e.onDragEnd);const Ht=[n,{addTransformer:o,removeTransformer:i,addDraggable:a,removeDraggable:s,addDroppable:p,removeDroppable:h,addSensor:v,removeSensor:T,setOverlay:k,clearOverlay:b,recomputeLayouts:j,detectCollisions:D,draggableActivators:C,sensorStart:$,sensorMove:P,sensorEnd:A,dragStart:N,dragEnd:B,onDragStart:H,onDragMove:Y,onDragOver:E,onDragEnd:S}];return z(Qe.Provider,{value:Ht,get children(){return e.children}})},he=()=>Mn(Qe)||null,Ur=(t="pointer-sensor")=>{const[e,{addSensor:n,removeSensor:r,sensorStart:o,sensorMove:i,sensorEnd:a,dragStart:s,dragEnd:l}]=he(),p=250,h=10;we(()=>{n({id:t,activators:{pointerdown:b}})}),pt(()=>{r(t)});const g=()=>e.active.sensorId===t,v={x:0,y:0};let T=null,k=null;const b=(D,N)=>{D.button===0&&(document.addEventListener("pointermove",A),document.addEventListener("pointerup",C),k=N,v.x=D.clientX,v.y=D.clientY,T=window.setTimeout(P,p))},$=()=>{T&&(clearTimeout(T),T=null),document.removeEventListener("pointermove",A),document.removeEventListener("pointerup",C),document.removeEventListener("selectionchange",j)},P=()=>{e.active.sensor?g()||$():(o(t,v),s(k),j(),document.addEventListener("selectionchange",j))},A=D=>{const N={x:D.clientX,y:D.clientY};if(!e.active.sensor){const B={x:N.x-v.x,y:N.y-v.y};Math.sqrt(B.x**2+B.y**2)>h&&P()}g()&&(D.preventDefault(),i(N))},C=D=>{$(),g()&&(D.preventDefault(),l(),a())},j=()=>{window.getSelection()?.removeAllRanges()}},Br=t=>(Ur(),K(()=>t.children)),tn=t=>({transform:`translate3d(${t.x}px, ${t.y}px, 0)`}),zr=(t,e={})=>{const[n,{addDraggable:r,removeDraggable:o,draggableActivators:i}]=he(),[a,s]=V(null);we(()=>{const g=a();g&&r({id:t,node:g,layout:kt(g),data:e})}),pt(()=>o(t));const l=()=>n.active.draggableId===t,p=()=>n.draggables[t]?.transform||dt();return Object.defineProperties((g,v)=>{const T=v?v():{};Q(()=>{const k=a(),b=i(t);if(k)for(const $ in b)k.addEventListener($,b[$]);pt(()=>{if(k)for(const $ in b)k.removeEventListener($,b[$])})}),s(g),T.skipTransform||Q(()=>{const k=p();if(Pr(k,dt()))g.style.removeProperty("transform");else{const b=tn(p());g.style.setProperty("transform",b.transform??null)}})},{ref:{enumerable:!0,value:s},isActiveDraggable:{enumerable:!0,get:l},dragActivators:{enumerable:!0,get:()=>i(t,!0)},transform:{enumerable:!0,get:p}})},Yr=t=>{const[e,{onDragStart:n,onDragEnd:r,setOverlay:o,clearOverlay:i}]=he();let a;n(({draggable:l})=>{o({node:l.node,layout:l.layout}),queueMicrotask(()=>{if(a){const p=kt(a),h={x:(l.layout.width-p.width)/2,y:(l.layout.height-p.height)/2};p.x+=h.x,p.y+=h.y,o({node:a,layout:p})}})}),r(()=>queueMicrotask(i));const s=()=>{const l=e.active.overlay,p=e.active.draggable;return!l||!p?{}:{position:"fixed",transition:"transform 0s",top:`${l.layout.top}px`,left:`${l.layout.left}px`,"min-width":`${p.layout.width}px`,"min-height":`${p.layout.height}px`,...tn(l.transform),...t.style}};return z(nr,{get mount(){return document.body},get children(){return z(Se,{get when(){return e.active.draggable},get children(){var l=Ir(),p=a;return typeof p=="function"?Ae(p,l):a=l,ot(l,(()=>{var h=K(()=>typeof t.children=="function");return()=>h()?t.children(e.active.draggable):t.children})()),J(h=>{var g=t.class,v=s();return g!==h.e&&Me(l,h.e=g),h.t=Ee(l,v,h.t),h},{e:void 0,t:void 0}),l}})}})};function ge(t,e){const n=GM_getValue(t,e),[r,o]=Je(n);return Q(()=>GM_setValue(t,r)),[r,o]}var qr=et('<div class="tryrating-widget draggable absolute">'),Gr=et("<div class=widget-drag-overlay><span class=text>alt+3 reset position");const[en,nn]=ge("widget-position",{top:"0px",left:"0px"});function Hr(){nn({top:"0px",left:"0px"})}const Wr=t=>{const e=zr(t.id);return(()=>{var n=qr();return Ae(e,n,()=>!0),ot(n,()=>t.children),J(r=>{var o=!!e.isActiveDraggable,i=en.top,a=en.left;return o!==r.e&&n.classList.toggle("opacity-25",r.e=o),i!==r.t&&((r.t=i)!=null?n.style.setProperty("top",i):n.style.removeProperty("top")),a!==r.a&&((r.a=a)!=null?n.style.setProperty("left",a):n.style.removeProperty("left")),r},{e:void 0,t:void 0,a:void 0}),n})()},Vr=t=>{let e={x:0,y:0};return z(Rr,{onDragMove:({overlay:o})=>{o&&(e={...o.transform})},onDragEnd:({draggable:o})=>{const i=o.node,a=`${i.offsetTop+e.y}px`,s=`${i.offsetLeft+e.x}px`;nn({top:a,left:s})},get children(){return[z(Br,{}),z(Wr,{id:1,get children(){return t.children}}),z(Yr,{children:o=>[Gr(),o]})]}})},[rn,Kr]=V(!0);function Zr(){Kr(!rn())}const Xr=t=>z(Se,{get when(){return rn()},get children(){return t.children}});function Jr(){window.addEventListener("keydown",t=>{bt.openTasks(t)&&(t.preventDefault(),We.generate()),bt.resetTasks(t)&&(t.preventDefault(),confirm(`Reset data.
Are you sure?`)&&Rt.reset()),bt.resetWidgetPosition(t)&&(t.preventDefault(),Hr()),bt.toggleAutoSubmit(t)&&(t.preventDefault(),vt.toggle()),bt.toggleWidgetVisibility(t)&&(t.preventDefault(),Zr())})}const Qr=t=>(e,n)=>(t.set(e,n),n),on=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,sn=536870912,an=sn*2,to=(t,e)=>n=>{const r=e.get(n);let o=r===void 0?n.size:r<an?r+1:0;if(!n.has(o))return t(n,o);if(n.size<sn){for(;n.has(o);)o=Math.floor(Math.random()*an);return t(n,o)}if(n.size>on)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;n.has(o);)o=Math.floor(Math.random()*on);return t(n,o)},ln=new WeakMap,eo=Qr(ln),qt=to(eo,ln),no=t=>t.method!==void 0&&t.method==="call",ro=t=>t.error===null&&typeof t.id=="number",cn=((t,e)=>{let n=null;return()=>{if(n!==null)return n;const r=new Blob([e],{type:"application/javascript; charset=utf-8"}),o=URL.createObjectURL(r);return n=t(o),setTimeout(()=>URL.revokeObjectURL(o)),n}})(t=>{const e=new Map([[0,()=>{}]]),n=new Map([[0,()=>{}]]),r=new Map,o=new Worker(t);return o.addEventListener("message",({data:p})=>{if(no(p)){const{params:{timerId:h,timerType:g}}=p;if(g==="interval"){const v=e.get(h);if(typeof v=="number"){const T=r.get(v);if(T===void 0||T.timerId!==h||T.timerType!==g)throw new Error("The timer is in an undefined state.")}else if(typeof v<"u")v();else throw new Error("The timer is in an undefined state.")}else if(g==="timeout"){const v=n.get(h);if(typeof v=="number"){const T=r.get(v);if(T===void 0||T.timerId!==h||T.timerType!==g)throw new Error("The timer is in an undefined state.")}else if(typeof v<"u")v(),n.delete(h);else throw new Error("The timer is in an undefined state.")}}else if(ro(p)){const{id:h}=p,g=r.get(h);if(g===void 0)throw new Error("The timer is in an undefined state.");const{timerId:v,timerType:T}=g;r.delete(h),T==="interval"?e.delete(v):n.delete(v)}else{const{error:{message:h}}=p;throw new Error(h)}}),{clearInterval:p=>{const h=qt(r);r.set(h,{timerId:p,timerType:"interval"}),e.set(p,h),o.postMessage({id:h,method:"clear",params:{timerId:p,timerType:"interval"}})},clearTimeout:p=>{const h=qt(r);r.set(h,{timerId:p,timerType:"timeout"}),n.set(p,h),o.postMessage({id:h,method:"clear",params:{timerId:p,timerType:"timeout"}})},setInterval:(p,h=0)=>{const g=qt(e);return e.set(g,()=>{p(),typeof e.get(g)=="function"&&o.postMessage({id:null,method:"set",params:{delay:h,now:performance.now(),timerId:g,timerType:"interval"}})}),o.postMessage({id:null,method:"set",params:{delay:h,now:performance.now(),timerId:g,timerType:"interval"}}),g},setTimeout:(p,h=0)=>{const g=qt(n);return n.set(g,p),o.postMessage({id:null,method:"set",params:{delay:h,now:performance.now(),timerId:g,timerType:"timeout"}}),g}}},`(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error('The given type "'.concat(i,'" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error('The given method "'.concat(s.method,'" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error('The given type "'.concat(d,'" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`),un=t=>cn().clearInterval(t),pe=(...t)=>cn().setInterval(...t),oo=".modal-container.visible",io="div[modalwrapref] > div",fn="Validation failed!",[dn,so]=ge("auto-close-modal",{value:!0});class ao{get autoClose(){return dn.value}toggleAutoClose(){so({value:!dn.value})}closeValidationFailed(){const e=document.querySelector(oo);if(!e)return;const n=e.querySelector(io);if(n&&n.textContent===fn){GM_notification({title:document.title,text:fn,highlight:!0,silent:!1,timeout:1e3});const r=e.querySelector("button");r&&(R.info("Modal closed"),r.click())}}}const Gt=new ao,[hn,gn]=ge("check-survey",{value:!1}),[lo,co]=V(!1);class uo{checkSurvey(){if(lo())return;const e=document.querySelector(".no-survey-view");if(!e)return;const n=e.querySelector("button");if(!n){R.info("Check Now button is not defined");return}hn.value||(R.info("Survey is not found. Please, wait..."),gn({value:!0})),co(!0),Fe(1e4).then(()=>n.click()).finally(()=>this.reloadPage())}tryNotification(){if(!hn.value)return;gn({value:!1}),GM_notification({title:"Survey found!",text:"Go to the survey",highlight:!0,timeout:3e3});const e=new Audio(ir);e.volume=.3,e.play()}reloadPage(){const e=Re(3e4,6e4);Fe(e).then(()=>location.reload())}}const pn=new uo;function fo(t){const e=t.split(/\s(?=\d)/);let n=0;for(const r of e){const[o,i]=r.split(" ");switch(i){case"hours":n+=Number(o)*36e5;break;case"minute":case"minutes":n+=Number(o)*6e4;break;case"second":case"seconds":n+=Number(o)*1e3;break;default:R.warn(`Unknown time type: ${i}`)}}return n}function mn(t){const e=Re(-5,15);return t+e*1e3}const[ho,bn]=V(0);let go=class{intervalId;get time(){return ho()}tick(){bn(e=>e+1e3)}start(){this.intervalId&&(un(this.intervalId),bn(0)),this.intervalId=pe(()=>this.tick(),1e3)}};const yn=new go,po=".btn-success",mo="Submit Rating",[vn,bo]=V(!0);class yo{get isAutoSubmit(){return vn()}toggleAutoSubmit(){bo(!vn())}getSubmitButtons(){const e=[],n=Array.from(document.querySelectorAll(po));for(const r of n)r instanceof HTMLButtonElement&&r.textContent===mo&&e.push(r);return e}clickSubmit(){if(!vt.isAutoSubmit)return;const e=this.getSubmitButtons();if(!e.length){R.error("Submit button is not defined");return}e[0].click()}}const vo=new yo,[wn,Tn]=V(0);let wo=class{intervalId;onTimerTickCallback;onEndCallback;tick(){const e=wn()-1e3;Tn(e),this.onTimerTickCallback(),e===0&&(this.onEndCallback(),this.stop())}get time(){return wn()}onTimerEnd(e){this.onEndCallback=e}onTimerTick(e){this.onTimerTickCallback=e}start(e){this.stop(),Tn(e),this.intervalId=pe(()=>this.tick(),1e3)}stop(){this.intervalId&&(un(this.intervalId),this.intervalId=null)}};const $t=new wo;$t.onTimerEnd(()=>vo.clickSubmit()),$t.onTimerTick(()=>{const t=ht.getTaskFields,e=ht.currentTaskFields;if(!(!t||!e)&&e.requestId===t.requestId&&e.estimated!==t.estimated){R.info("Task estimated changed",{oldTaskFields:e,newTaskFields:t});const n=mn(t.estimated);$t.start(n),ht.currentTaskFields=t}});class To{taskFields=null;onChangeTaskCallback=null;get currentTaskFields(){return this.taskFields}set currentTaskFields(e){this.taskFields=e}get getTaskFields(){const e=document.querySelector(this.targetSelector);if(!e){R.error("Task fields not found");return}const[n,r,o]=Array.from(e.querySelectorAll(".labeled-attribute__attribute"));if(!n||!r||!o){R.error("Task fields attributes not found");return}return{taskType:n.textContent,requestId:r.textContent,estimated:fo(o.textContent.trim())}}get targetSelector(){return".survey-meta-fields"}onChangeTask(e){this.onChangeTaskCallback=e}observe(){const e=this.getTaskFields;if(e&&e.requestId!==this.taskFields?.requestId){const n=mn(e.estimated);R.info("Task fields changed",e),this.onChangeTaskCallback({...e,estimated:n}),vt.isAutoSubmit||vt.toggle(),this.taskFields&&(R.info("Task is submitted",this.taskFields),Rt.write({type:this.taskFields.taskType,estimated:this.taskFields.estimated})),this.currentTaskFields=e}}}const ht=new To;ht.onChangeTask(t=>{$t.start(t.estimated),yn.start(),Ue.checkUpdates(),pn.tryNotification()});async function xo(){const t=document.querySelector("#app-root");if(!t){R.error("App root not found");return}ze(t,()=>{Gt.autoClose&&Gt.closeValidationFailed(),pn.checkSurvey()}),Ye({selector:ht.targetSelector}).then(()=>{pe(()=>ht.observe(),7*1e3)}).finally(()=>R.info("Initialized task fields observer"))}var ko=et("<button>M");const $o=()=>(()=>{var t=ko();return ee(t,Nt(()=>le({label:"Auto close",position:"left",size:"medium"}),{get classList(){return{enabled:Gt.autoClose}},onClick:()=>Gt.toggleAutoClose()}),!1,!0),t})();var So=et("<button class=task-counter>");const Do=()=>{const t=K(()=>{const e=jt();return Rt.taskList.find(r=>r.date===e)?.total??"0"});return(()=>{var e=So();return e.$$click=()=>We.generate(),ot(e,t),e})()};Oe(["click"]);var Oo=et("<div>?");const Mo=()=>(()=>{var t=Oo();return ee(t,Nt(()=>le({label:sr,position:"left",size:"large"})),!1,!0),t})();var Eo=et("<div>Stopwatch: ");const Ao=()=>{const t=K(()=>Ge(yn.time));return(()=>{var e=Eo();return e.firstChild,ot(e,t,null),e})()};var Co=et("<div>Timer: ");const _o=()=>{const t=K(()=>Ge($t.time));return(()=>{var e=Co();return e.firstChild,ot(e,t,null),e})()},Lo=()=>z(Xr,{get children(){return z(Vr,{get children(){return[z(_o,{}),z(Ao,{}),z(Do,{}),z(Er,{}),z($o,{}),z(Mo,{})]}})}});xo(),Jr(),Wn(()=>z(Lo,{}),document.body),GM_addStyle('[aria-label][role~=tooltip]{position:relative}[aria-label][role~=tooltip]:before,[aria-label][role~=tooltip]:after{transform:translateZ(0);-webkit-backface-visibility:hidden;backface-visibility:hidden;will-change:transform;opacity:0;pointer-events:none;transition:all var(--microtip-transition-duration, .18s) var(--microtip-transition-easing, ease-in-out) var(--microtip-transition-delay, 0s);position:absolute;box-sizing:border-box;z-index:10;transform-origin:top}[aria-label][role~=tooltip]:before{background-size:100% auto!important;content:""}[aria-label][role~=tooltip]:after{background:#111111e6;border-radius:4px;color:#fff;content:attr(aria-label);font-size:var(--microtip-font-size, 13px);font-weight:var(--microtip-font-weight, normal);text-transform:var(--microtip-text-transform, none);padding:.5em 1em;white-space:nowrap;box-sizing:content-box}[aria-label][role~=tooltip]:hover:before,[aria-label][role~=tooltip]:hover:after,[aria-label][role~=tooltip]:focus:before,[aria-label][role~=tooltip]:focus:after{opacity:1;pointer-events:auto}[role~=tooltip][data-microtip-position|=top]:before{background:url(data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2236px%22%20height%3D%2212px%22%3E%3Cpath%20fill%3D%22rgba%2817,%2017,%2017,%200.9%29%22%20transform%3D%22rotate%280%29%22%20d%3D%22M2.658,0.000%20C-13.615,0.000%2050.938,0.000%2034.662,0.000%20C28.662,0.000%2023.035,12.002%2018.660,12.002%20C14.285,12.002%208.594,0.000%202.658,0.000%20Z%22/%3E%3C/svg%3E) no-repeat;height:6px;width:18px;margin-bottom:5px}[role~=tooltip][data-microtip-position|=top]:after{margin-bottom:11px}[role~=tooltip][data-microtip-position|=top]:before{transform:translate3d(-50%,0,0);bottom:100%;left:50%}[role~=tooltip][data-microtip-position|=top]:hover:before{transform:translate3d(-50%,-5px,0)}[role~=tooltip][data-microtip-position|=top]:after{transform:translate3d(-50%,0,0);bottom:100%;left:50%}[role~=tooltip][data-microtip-position=top]:hover:after{transform:translate3d(-50%,-5px,0)}[role~=tooltip][data-microtip-position=top-left]:after{transform:translate3d(calc(-100% + 16px),0,0);bottom:100%}[role~=tooltip][data-microtip-position=top-left]:hover:after{transform:translate3d(calc(-100% + 16px),-5px,0)}[role~=tooltip][data-microtip-position=top-right]:after{transform:translate3d(calc(0% - 16px),0,0);bottom:100%}[role~=tooltip][data-microtip-position=top-right]:hover:after{transform:translate3d(calc(0% - 16px),-5px,0)}[role~=tooltip][data-microtip-position|=bottom]:before{background:url(data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2236px%22%20height%3D%2212px%22%3E%3Cpath%20fill%3D%22rgba%2817,%2017,%2017,%200.9%29%22%20transform%3D%22rotate%28180%2018%206%29%22%20d%3D%22M2.658,0.000%20C-13.615,0.000%2050.938,0.000%2034.662,0.000%20C28.662,0.000%2023.035,12.002%2018.660,12.002%20C14.285,12.002%208.594,0.000%202.658,0.000%20Z%22/%3E%3C/svg%3E) no-repeat;height:6px;width:18px;margin-top:5px;margin-bottom:0}[role~=tooltip][data-microtip-position|=bottom]:after{margin-top:11px}[role~=tooltip][data-microtip-position|=bottom]:before{transform:translate3d(-50%,-10px,0);bottom:auto;left:50%;top:100%}[role~=tooltip][data-microtip-position|=bottom]:hover:before{transform:translate3d(-50%,0,0)}[role~=tooltip][data-microtip-position|=bottom]:after{transform:translate3d(-50%,-10px,0);top:100%;left:50%}[role~=tooltip][data-microtip-position=bottom]:hover:after{transform:translate3d(-50%,0,0)}[role~=tooltip][data-microtip-position=bottom-left]:after{transform:translate3d(calc(-100% + 16px),-10px,0);top:100%}[role~=tooltip][data-microtip-position=bottom-left]:hover:after{transform:translate3d(calc(-100% + 16px),0,0)}[role~=tooltip][data-microtip-position=bottom-right]:after{transform:translate3d(calc(0% - 16px),-10px,0);top:100%}[role~=tooltip][data-microtip-position=bottom-right]:hover:after{transform:translate3d(calc(0% - 16px),0,0)}[role~=tooltip][data-microtip-position=left]:before,[role~=tooltip][data-microtip-position=left]:after{inset:50% 100% auto auto;transform:translate3d(10px,-50%,0)}[role~=tooltip][data-microtip-position=left]:before{background:url(data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2212px%22%20height%3D%2236px%22%3E%3Cpath%20fill%3D%22rgba%2817,%2017,%2017,%200.9%29%22%20transform%3D%22rotate%28-90%2018%2018%29%22%20d%3D%22M2.658,0.000%20C-13.615,0.000%2050.938,0.000%2034.662,0.000%20C28.662,0.000%2023.035,12.002%2018.660,12.002%20C14.285,12.002%208.594,0.000%202.658,0.000%20Z%22/%3E%3C/svg%3E) no-repeat;height:18px;width:6px;margin-right:5px;margin-bottom:0}[role~=tooltip][data-microtip-position=left]:after{margin-right:11px}[role~=tooltip][data-microtip-position=left]:hover:before,[role~=tooltip][data-microtip-position=left]:hover:after{transform:translate3d(0,-50%,0)}[role~=tooltip][data-microtip-position=right]:before,[role~=tooltip][data-microtip-position=right]:after{bottom:auto;left:100%;top:50%;transform:translate3d(-10px,-50%,0)}[role~=tooltip][data-microtip-position=right]:before{background:url(data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2212px%22%20height%3D%2236px%22%3E%3Cpath%20fill%3D%22rgba%2817,%2017,%2017,%200.9%29%22%20transform%3D%22rotate%2890%206%206%29%22%20d%3D%22M2.658,0.000%20C-13.615,0.000%2050.938,0.000%2034.662,0.000%20C28.662,0.000%2023.035,12.002%2018.660,12.002%20C14.285,12.002%208.594,0.000%202.658,0.000%20Z%22/%3E%3C/svg%3E) no-repeat;height:18px;width:6px;margin-bottom:0;margin-left:5px}[role~=tooltip][data-microtip-position=right]:after{margin-left:11px}[role~=tooltip][data-microtip-position=right]:hover:before,[role~=tooltip][data-microtip-position=right]:hover:after{transform:translate3d(0,-50%,0)}[role~=tooltip][data-microtip-size=small]:after{white-space:initial;width:80px}[role~=tooltip][data-microtip-size=medium]:after{white-space:initial;width:150px}[role~=tooltip][data-microtip-size=large]:after{white-space:initial;width:260px}:root{--try-font-family: monospace}.tryrating-widget{user-select:none;display:flex;color:#fff;padding-left:4px;background:#2e2c2f;font-size:1rem;font-weight:600;align-items:center;height:40px;justify-content:center;text-transform:uppercase;font-family:var(--try-font-family)}.tryrating-widget.draggable{cursor:pointer}.tryrating-widget.absolute{z-index:999999;position:absolute}.tryrating-widget.opacity-25{opacity:.25}.tryrating-widget>.task-counter{background:gray}.tryrating-widget>div{margin-left:6px;margin-right:6px}.tryrating-widget>button{text-transform:inherit;height:inherit;border:none;font-size:inherit;font-weight:inherit;color:#fff;padding-left:12px;padding-right:12px;background:#f44336}.tryrating-widget>button.enabled{background:#4caf50}.widget-drag-overlay{font-size:20px;font-weight:700;color:#3b99fc;width:100%;height:100%;position:absolute;text-align:center;align-self:center;text-transform:uppercase;background:#000000e6}.widget-drag-overlay>.text{font-family:var(--try-font-family);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100%}')})();
