(function(){"use strict";const ln={context:void 0,registry:void 0},cn=(e,t)=>e===t,X=Symbol("solid-proxy"),dt=Symbol("solid-track"),De={equals:cn};let gt=wt;const ne=1,Me=2,ht={owned:null,cleanups:null,context:null,owner:null};var L=null;let Be=null,C=null,Y=null,Z=null,ke=0;function pt(e,t){const n=C,r=L,s=e.length===0,o=s?ht:{owned:null,cleanups:null,context:null,owner:t===void 0?r:t},i=s?e:()=>e(()=>R(()=>Ee(o)));L=o,C=null;try{return oe(i,!0)}finally{C=n,L=r}}function J(e,t){t=t?Object.assign({},De,t):De;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},r=s=>(typeof s=="function"&&(s=s(n.value)),vt(n,s));return[bt.bind(n),r]}function re(e,t,n){const r=ze(e,t,!1,ne);me(r)}function Q(e,t,n){gt=yn;const r=ze(e,t,!1,ne);(!n||!n.render)&&(r.user=!0),Z?Z.push(r):me(r)}function q(e,t,n){n=n?Object.assign({},De,n):De;const r=ze(e,t,!0,0);return r.observers=null,r.observerSlots=null,r.comparator=n.equals||void 0,me(r),bt.bind(r)}function ee(e){return oe(e,!1)}function R(e){if(C===null)return e();const t=C;C=null;try{return e()}finally{C=t}}function mt(e){Q(()=>R(e))}function pe(e){return L===null||(L.cleanups===null?L.cleanups=[e]:L.cleanups.push(e)),e}function yt(){return C}function un(){return L}function fn(e,t){const n=L,r=C;L=e,C=null;try{return oe(t,!0)}catch(s){We(s)}finally{L=n,C=r}}function dn(e,t){const n=Symbol("context");return{id:n,Provider:vn(n),defaultValue:e}}function gn(e){let t;return(t=Tt(L,e.id))!==void 0?t:e.defaultValue}function hn(e){const t=q(e),n=q(()=>He(t()));return n.toArray=()=>{const r=n();return Array.isArray(r)?r:r!=null?[r]:[]},n}function bt(){if(this.sources&&this.state)if(this.state===ne)me(this);else{const e=Y;Y=null,oe(()=>_e(this),!1),Y=e}if(C){const e=this.observers?this.observers.length:0;C.sources?(C.sources.push(this),C.sourceSlots.push(e)):(C.sources=[this],C.sourceSlots=[e]),this.observers?(this.observers.push(C),this.observerSlots.push(C.sources.length-1)):(this.observers=[C],this.observerSlots=[C.sources.length-1])}return this.value}function vt(e,t,n){let r=e.value;return(!e.comparator||!e.comparator(r,t))&&(e.value=t,e.observers&&e.observers.length&&oe(()=>{for(let s=0;s<e.observers.length;s+=1){const o=e.observers[s],i=Be&&Be.running;i&&Be.disposed.has(o),(i?!o.tState:!o.state)&&(o.pure?Y.push(o):Z.push(o),o.observers&&$t(o)),i||(o.state=ne)}if(Y.length>1e6)throw Y=[],new Error},!1)),t}function me(e){if(!e.fn)return;Ee(e);const t=L,n=C,r=ke;C=L=e,pn(e,e.value,r),C=n,L=t}function pn(e,t,n){let r;try{r=e.fn(t)}catch(s){return e.pure&&(e.state=ne,e.owned&&e.owned.forEach(Ee),e.owned=null),e.updatedAt=n+1,We(s)}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?vt(e,r):e.value=r,e.updatedAt=n)}function ze(e,t,n,r=ne,s){const o={fn:e,state:r,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:L,context:null,pure:n};return L===null||L!==ht&&(L.owned?L.owned.push(o):L.owned=[o]),o}function Ae(e){if(e.state===0)return;if(e.state===Me)return _e(e);if(e.suspense&&R(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<ke);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===ne)me(e);else if(e.state===Me){const r=Y;Y=null,oe(()=>_e(e,t[0]),!1),Y=r}}function oe(e,t){if(Y)return e();let n=!1;t||(Y=[]),Z?n=!0:Z=[],ke++;try{const r=e();return mn(n),r}catch(r){n||(Z=null),Y=null,We(r)}}function mn(e){if(Y&&(wt(Y),Y=null),e)return;const t=Z;Z=null,t.length&&oe(()=>gt(t),!1)}function wt(e){for(let t=0;t<e.length;t++)Ae(e[t])}function yn(e){let t,n=0;for(t=0;t<e.length;t++){const r=e[t];r.user?e[n++]=r:Ae(r)}for(t=0;t<n;t++)Ae(e[t])}function _e(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const r=e.sources[n];if(r.sources){const s=r.state;s===ne?r!==t&&(!r.updatedAt||r.updatedAt<ke)&&Ae(r):s===Me&&_e(r,t)}}}function $t(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Me,n.pure?Y.push(n):Z.push(n),n.observers&&$t(n))}}function Ee(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),r=e.sourceSlots.pop(),s=n.observers;if(s&&s.length){const o=s.pop(),i=n.observerSlots.pop();r<s.length&&(o.sourceSlots[i]=r,s[r]=o,n.observerSlots[r]=i)}}if(e.owned){for(t=e.owned.length-1;t>=0;t--)Ee(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0,e.context=null}function bn(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function We(e,t=L){throw bn(e)}function Tt(e,t){return e?e.context&&e.context[t]!==void 0?e.context[t]:Tt(e.owner,t):void 0}function He(e){if(typeof e=="function"&&!e.length)return He(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const r=He(e[n]);Array.isArray(r)?t.push.apply(t,r):t.push(r)}return t}return e}function vn(e,t){return function(r){let s;return re(()=>s=R(()=>(L.context={[e]:r.value},hn(()=>r.children))),void 0),s}}function W(e,t){return R(()=>e(t||{}))}function Ce(){return!0}const wn={get(e,t,n){return t===X?n:e.get(t)},has(e,t){return t===X?!0:e.has(t)},set:Ce,deleteProperty:Ce,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:Ce,deleteProperty:Ce}},ownKeys(e){return e.keys()}};function qe(e){return(e=typeof e=="function"?e():e)?e:{}}function $n(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function Tn(...e){let t=!1;for(let o=0;o<e.length;o++){const i=e[o];t=t||!!i&&X in i,e[o]=typeof i=="function"?(t=!0,q(i)):i}if(t)return new Proxy({get(o){for(let i=e.length-1;i>=0;i--){const c=qe(e[i])[o];if(c!==void 0)return c}},has(o){for(let i=e.length-1;i>=0;i--)if(o in qe(e[i]))return!0;return!1},keys(){const o=[];for(let i=0;i<e.length;i++)o.push(...Object.keys(qe(e[i])));return[...new Set(o)]}},wn);const n={},r={},s=new Set;for(let o=e.length-1;o>=0;o--){const i=e[o];if(!i)continue;const c=Object.getOwnPropertyNames(i);for(let u=0,h=c.length;u<h;u++){const d=c[u];if(d==="__proto__"||d==="constructor")continue;const p=Object.getOwnPropertyDescriptor(i,d);if(!s.has(d))p.get?(s.add(d),Object.defineProperty(n,d,{enumerable:!0,configurable:!0,get:$n.bind(r[d]=[p.get.bind(i)])})):(p.value!==void 0&&s.add(d),n[d]=p.value);else{const v=r[d];v?p.get?v.push(p.get.bind(i)):p.value!==void 0&&v.push(()=>p.value):n[d]===void 0&&(n[d]=p.value)}}}return n}const Sn=e=>`Stale read from <${e}>.`;function St(e){const t=e.keyed,n=q(()=>e.when,void 0,{equals:(r,s)=>t?r===s:!r==!s});return q(()=>{const r=n();if(r){const s=e.children;return typeof s=="function"&&s.length>0?R(()=>s(t?r:()=>{if(!R(n))throw Sn("Show");return e.when})):s}return e.fallback},void 0,void 0)}function xn(e,t,n){let r=n.length,s=t.length,o=r,i=0,c=0,u=t[s-1].nextSibling,h=null;for(;i<s||c<o;){if(t[i]===n[c]){i++,c++;continue}for(;t[s-1]===n[o-1];)s--,o--;if(s===i){const d=o<r?c?n[c-1].nextSibling:n[o-c]:u;for(;c<o;)e.insertBefore(n[c++],d)}else if(o===c)for(;i<s;)(!h||!h.has(t[i]))&&t[i].remove(),i++;else if(t[i]===n[o-1]&&n[c]===t[s-1]){const d=t[--s].nextSibling;e.insertBefore(n[c++],t[i++].nextSibling),e.insertBefore(n[--o],d),t[s]=n[o]}else{if(!h){h=new Map;let p=c;for(;p<o;)h.set(n[p],p++)}const d=h.get(t[i]);if(d!=null)if(c<d&&d<o){let p=i,v=1,$;for(;++p<s&&p<o&&!(($=h.get(t[p]))==null||$!==d+v);)v++;if(v>d-c){const S=t[i];for(;c<d;)e.insertBefore(n[c++],S)}else e.replaceChild(n[c++],t[i++])}else i++;else t[i++].remove()}}}const xt="_$DX_DELEGATE";function On(e,t,n,r={}){let s;return pt(o=>{s=o,t===document?e():K(t,e(),t.firstChild?null:void 0,n)},r.owner),()=>{s(),t.textContent=""}}function ie(e,t,n){let r;const s=()=>{const i=document.createElement("template");return i.innerHTML=e,n?i.content.firstChild.firstChild:i.content.firstChild},o=t?()=>R(()=>document.importNode(r||(r=s()),!0)):()=>(r||(r=s())).cloneNode(!0);return o.cloneNode=o,o}function Ve(e,t=window.document){const n=t[xt]||(t[xt]=new Set);for(let r=0,s=e.length;r<s;r++){const o=e[r];n.has(o)||(n.add(o),t.addEventListener(o,An))}}function Dn(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function Mn(e,t){t==null?e.removeAttribute("class"):e.className=t}function kn(e,t,n){if(!t)return n?Dn(e,"style"):t;const r=e.style;if(typeof t=="string")return r.cssText=t;typeof n=="string"&&(r.cssText=n=void 0),n||(n={}),t||(t={});let s,o;for(o in n)t[o]==null&&r.removeProperty(o),delete n[o];for(o in t)s=t[o],s!==n[o]&&(r.setProperty(o,s),n[o]=s);return n}function Ot(e,t,n){return R(()=>e(t,n))}function K(e,t,n,r){if(n!==void 0&&!r&&(r=[]),typeof t!="function")return Ie(e,t,r,n);re(s=>Ie(e,t(),s,n),r)}function An(e){const t=`$$${e.type}`;let n=e.composedPath&&e.composedPath()[0]||e.target;for(e.target!==n&&Object.defineProperty(e,"target",{configurable:!0,value:n}),Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return n||document}});n;){const r=n[t];if(r&&!n.disabled){const s=n[`${t}Data`];if(s!==void 0?r.call(n,s,e):r.call(n,e),e.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function Ie(e,t,n,r,s){for(;typeof n=="function";)n=n();if(t===n)return n;const o=typeof t,i=r!==void 0;if(e=i&&n[0]&&n[0].parentNode||e,o==="string"||o==="number")if(o==="number"&&(t=t.toString()),i){let c=n[0];c&&c.nodeType===3?c.data=t:c=document.createTextNode(t),n=ue(e,n,r,c)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t;else if(t==null||o==="boolean")n=ue(e,n,r);else{if(o==="function")return re(()=>{let c=t();for(;typeof c=="function";)c=c();n=Ie(e,c,n,r)}),()=>n;if(Array.isArray(t)){const c=[],u=n&&Array.isArray(n);if(Ke(c,t,n,s))return re(()=>n=Ie(e,c,n,r,!0)),()=>n;if(c.length===0){if(n=ue(e,n,r),i)return n}else u?n.length===0?Dt(e,c,r):xn(e,n,c):(n&&ue(e),Dt(e,c));n=c}else if(t.nodeType){if(Array.isArray(n)){if(i)return n=ue(e,n,r,t);ue(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}else console.warn("Unrecognized value. Skipped inserting",t)}return n}function Ke(e,t,n,r){let s=!1;for(let o=0,i=t.length;o<i;o++){let c=t[o],u=n&&n[o],h;if(!(c==null||c===!0||c===!1))if((h=typeof c)=="object"&&c.nodeType)e.push(c);else if(Array.isArray(c))s=Ke(e,c,u)||s;else if(h==="function")if(r){for(;typeof c=="function";)c=c();s=Ke(e,Array.isArray(c)?c:[c],Array.isArray(u)?u:[u])||s}else e.push(c),s=!0;else{const d=String(c);u&&u.nodeType===3&&u.data===d?e.push(u):e.push(document.createTextNode(d))}}return s}function Dt(e,t,n=null){for(let r=0,s=t.length;r<s;r++)e.insertBefore(t[r],n)}function ue(e,t,n,r){if(n===void 0)return e.textContent="";const s=r||document.createTextNode("");if(t.length){let o=!1;for(let i=t.length-1;i>=0;i--){const c=t[i];if(s!==c){const u=c.parentNode===e;!o&&!i?u?e.replaceChild(s,c):e.insertBefore(s,n):u&&c.remove()}else o=!0}}else e.insertBefore(s,n);return[s]}const _n="http://www.w3.org/2000/svg";function En(e,t=!1){return t?document.createElementNS(_n,e):document.createElement(e)}function Cn(e){const{useShadow:t}=e,n=document.createTextNode(""),r=()=>e.mount||document.body,s=un();let o,i=!!ln.context;return Q(()=>{o||(o=fn(s,()=>q(()=>e.children)));const c=r();if(c instanceof HTMLHeadElement){const[u,h]=J(!1),d=()=>h(!0);pt(p=>K(c,()=>u()?p():o(),null)),pe(d)}else{const u=En(e.isSVG?"g":"div",e.isSVG),h=t&&u.attachShadow?u.attachShadow({mode:"open"}):u;Object.defineProperty(u,"_$host",{get(){return n.parentNode},configurable:!0}),K(h,o),c.appendChild(u),e.ref&&e.ref(u),pe(()=>c.removeChild(u))}},void 0,{render:!i}),n}var Ge=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xe(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Mt={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ge,function(){var n=1e3,r=6e4,s=36e5,o="millisecond",i="second",c="minute",u="hour",h="day",d="week",p="month",v="quarter",$="year",S="date",y="Invalid Date",x=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,I=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,_={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(T){var a=["th","st","nd","rd"],l=T%100;return"["+T+(a[(l-20)%10]||a[l]||a[0])+"]"}},E=function(T,a,l){var f=String(T);return!f||f.length>=a?T:""+Array(a+1-f.length).join(l)+T},j={s:E,z:function(T){var a=-T.utcOffset(),l=Math.abs(a),f=Math.floor(l/60),g=l%60;return(a<=0?"+":"-")+E(f,2,"0")+":"+E(g,2,"0")},m:function T(a,l){if(a.date()<l.date())return-T(l,a);var f=12*(l.year()-a.year())+(l.month()-a.month()),g=a.clone().add(f,p),b=l-g<0,m=a.clone().add(f+(b?-1:1),p);return+(-(f+(l-g)/(b?g-m:m-g))||0)},a:function(T){return T<0?Math.ceil(T)||0:Math.floor(T)},p:function(T){return{M:p,y:$,w:d,d:h,D:S,h:u,m:c,s:i,ms:o,Q:v}[T]||String(T||"").toLowerCase().replace(/s$/,"")},u:function(T){return T===void 0}},M="en",P={};P[M]=_;var F=function(T){return T instanceof V},B=function T(a,l,f){var g;if(!a)return M;if(typeof a=="string"){var b=a.toLowerCase();P[b]&&(g=b),l&&(P[b]=l,g=b);var m=a.split("-");if(!g&&m.length>1)return T(m[0])}else{var w=a.name;P[w]=a,g=w}return!f&&g&&(M=g),g||!f&&M},k=function(T,a){if(F(T))return T.clone();var l=typeof a=="object"?a:{};return l.date=T,l.args=arguments,new V(l)},D=j;D.l=B,D.i=F,D.w=function(T,a){return k(T,{locale:a.$L,utc:a.$u,x:a.$x,$offset:a.$offset})};var V=function(){function T(l){this.$L=B(l.locale,null,!0),this.parse(l)}var a=T.prototype;return a.parse=function(l){this.$d=function(f){var g=f.date,b=f.utc;if(g===null)return new Date(NaN);if(D.u(g))return new Date;if(g instanceof Date)return new Date(g);if(typeof g=="string"&&!/Z$/i.test(g)){var m=g.match(x);if(m){var w=m[2]-1||0,O=(m[7]||"0").substring(0,3);return b?new Date(Date.UTC(m[1],w,m[3]||1,m[4]||0,m[5]||0,m[6]||0,O)):new Date(m[1],w,m[3]||1,m[4]||0,m[5]||0,m[6]||0,O)}}return new Date(g)}(l),this.$x=l.x||{},this.init()},a.init=function(){var l=this.$d;this.$y=l.getFullYear(),this.$M=l.getMonth(),this.$D=l.getDate(),this.$W=l.getDay(),this.$H=l.getHours(),this.$m=l.getMinutes(),this.$s=l.getSeconds(),this.$ms=l.getMilliseconds()},a.$utils=function(){return D},a.isValid=function(){return this.$d.toString()!==y},a.isSame=function(l,f){var g=k(l);return this.startOf(f)<=g&&g<=this.endOf(f)},a.isAfter=function(l,f){return k(l)<this.startOf(f)},a.isBefore=function(l,f){return this.endOf(f)<k(l)},a.$g=function(l,f,g){return D.u(l)?this[f]:this.set(g,l)},a.unix=function(){return Math.floor(this.valueOf()/1e3)},a.valueOf=function(){return this.$d.getTime()},a.startOf=function(l,f){var g=this,b=!!D.u(f)||f,m=D.p(l),w=function(ce,H){var se=D.w(g.$u?Date.UTC(g.$y,H,ce):new Date(g.$y,H,ce),g);return b?se:se.endOf(h)},O=function(ce,H){return D.w(g.toDate()[ce].apply(g.toDate("s"),(b?[0,0,0,0]:[23,59,59,999]).slice(H)),g)},A=this.$W,N=this.$M,z=this.$D,te="set"+(this.$u?"UTC":"");switch(m){case $:return b?w(1,0):w(31,11);case p:return b?w(1,N):w(0,N+1);case d:var le=this.$locale().weekStart||0,xe=(A<le?A+7:A)-le;return w(b?z-xe:z+(6-xe),N);case h:case S:return O(te+"Hours",0);case u:return O(te+"Minutes",1);case c:return O(te+"Seconds",2);case i:return O(te+"Milliseconds",3);default:return this.clone()}},a.endOf=function(l){return this.startOf(l,!1)},a.$set=function(l,f){var g,b=D.p(l),m="set"+(this.$u?"UTC":""),w=(g={},g[h]=m+"Date",g[S]=m+"Date",g[p]=m+"Month",g[$]=m+"FullYear",g[u]=m+"Hours",g[c]=m+"Minutes",g[i]=m+"Seconds",g[o]=m+"Milliseconds",g)[b],O=b===h?this.$D+(f-this.$W):f;if(b===p||b===$){var A=this.clone().set(S,1);A.$d[w](O),A.init(),this.$d=A.set(S,Math.min(this.$D,A.daysInMonth())).$d}else w&&this.$d[w](O);return this.init(),this},a.set=function(l,f){return this.clone().$set(l,f)},a.get=function(l){return this[D.p(l)]()},a.add=function(l,f){var g,b=this;l=Number(l);var m=D.p(f),w=function(N){var z=k(b);return D.w(z.date(z.date()+Math.round(N*l)),b)};if(m===p)return this.set(p,this.$M+l);if(m===$)return this.set($,this.$y+l);if(m===h)return w(1);if(m===d)return w(7);var O=(g={},g[c]=r,g[u]=s,g[i]=n,g)[m]||1,A=this.$d.getTime()+l*O;return D.w(A,this)},a.subtract=function(l,f){return this.add(-1*l,f)},a.format=function(l){var f=this,g=this.$locale();if(!this.isValid())return g.invalidDate||y;var b=l||"YYYY-MM-DDTHH:mm:ssZ",m=D.z(this),w=this.$H,O=this.$m,A=this.$M,N=g.weekdays,z=g.months,te=g.meridiem,le=function(H,se,Oe,Ye){return H&&(H[se]||H(f,b))||Oe[se].slice(0,Ye)},xe=function(H){return D.s(w%12||12,H,"0")},ce=te||function(H,se,Oe){var Ye=H<12?"AM":"PM";return Oe?Ye.toLowerCase():Ye};return b.replace(I,function(H,se){return se||function(Oe){switch(Oe){case"YY":return String(f.$y).slice(-2);case"YYYY":return D.s(f.$y,4,"0");case"M":return A+1;case"MM":return D.s(A+1,2,"0");case"MMM":return le(g.monthsShort,A,z,3);case"MMMM":return le(z,A);case"D":return f.$D;case"DD":return D.s(f.$D,2,"0");case"d":return String(f.$W);case"dd":return le(g.weekdaysMin,f.$W,N,2);case"ddd":return le(g.weekdaysShort,f.$W,N,3);case"dddd":return N[f.$W];case"H":return String(w);case"HH":return D.s(w,2,"0");case"h":return xe(1);case"hh":return xe(2);case"a":return ce(w,O,!0);case"A":return ce(w,O,!1);case"m":return String(O);case"mm":return D.s(O,2,"0");case"s":return String(f.$s);case"ss":return D.s(f.$s,2,"0");case"SSS":return D.s(f.$ms,3,"0");case"Z":return m}return null}(H)||m.replace(":","")})},a.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},a.diff=function(l,f,g){var b,m=this,w=D.p(f),O=k(l),A=(O.utcOffset()-this.utcOffset())*r,N=this-O,z=function(){return D.m(m,O)};switch(w){case $:b=z()/12;break;case p:b=z();break;case v:b=z()/3;break;case d:b=(N-A)/6048e5;break;case h:b=(N-A)/864e5;break;case u:b=N/s;break;case c:b=N/r;break;case i:b=N/n;break;default:b=N}return g?b:D.a(b)},a.daysInMonth=function(){return this.endOf(p).$D},a.$locale=function(){return P[this.$L]},a.locale=function(l,f){if(!l)return this.$L;var g=this.clone(),b=B(l,f,!0);return b&&(g.$L=b),g},a.clone=function(){return D.w(this.$d,this)},a.toDate=function(){return new Date(this.valueOf())},a.toJSON=function(){return this.isValid()?this.toISOString():null},a.toISOString=function(){return this.$d.toISOString()},a.toString=function(){return this.$d.toUTCString()},T}(),ft=V.prototype;return k.prototype=ft,[["$ms",o],["$s",i],["$m",c],["$H",u],["$W",h],["$M",p],["$y",$],["$D",S]].forEach(function(T){ft[T[1]]=function(a){return this.$g(a,T[0],T[1])}}),k.extend=function(T,a){return T.$i||(T(a,V,k),T.$i=!0),k},k.locale=B,k.isDayjs=F,k.unix=function(T){return k(1e3*T)},k.en=P[M],k.Ls=P,k.p={},k})})(Mt);var In=Mt.exports;const ye=Xe(In);var kt={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ge,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(s,o,i){var c,u=function(v,$,S){S===void 0&&(S={});var y=new Date(v),x=function(I,_){_===void 0&&(_={});var E=_.timeZoneName||"short",j=I+"|"+E,M=r[j];return M||(M=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:I,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:E}),r[j]=M),M}($,S);return x.formatToParts(y)},h=function(v,$){for(var S=u(v,$),y=[],x=0;x<S.length;x+=1){var I=S[x],_=I.type,E=I.value,j=n[_];j>=0&&(y[j]=parseInt(E,10))}var M=y[3],P=M===24?0:M,F=y[0]+"-"+y[1]+"-"+y[2]+" "+P+":"+y[4]+":"+y[5]+":000",B=+v;return(i.utc(F).valueOf()-(B-=B%1e3))/6e4},d=o.prototype;d.tz=function(v,$){v===void 0&&(v=c);var S=this.utcOffset(),y=this.toDate(),x=y.toLocaleString("en-US",{timeZone:v}),I=Math.round((y-new Date(x))/1e3/60),_=i(x).$set("millisecond",this.$ms).utcOffset(15*-Math.round(y.getTimezoneOffset()/15)-I,!0);if($){var E=_.utcOffset();_=_.add(S-E,"minute")}return _.$x.$timezone=v,_},d.offsetName=function(v){var $=this.$x.$timezone||i.tz.guess(),S=u(this.valueOf(),$,{timeZoneName:v}).find(function(y){return y.type.toLowerCase()==="timezonename"});return S&&S.value};var p=d.startOf;d.startOf=function(v,$){if(!this.$x||!this.$x.$timezone)return p.call(this,v,$);var S=i(this.format("YYYY-MM-DD HH:mm:ss:SSS"));return p.call(S,v,$).tz(this.$x.$timezone,!0)},i.tz=function(v,$,S){var y=S&&$,x=S||$||c,I=h(+i(),x);if(typeof v!="string")return i(v).tz(x);var _=function(P,F,B){var k=P-60*F*1e3,D=h(k,B);if(F===D)return[k,F];var V=h(k-=60*(D-F)*1e3,B);return D===V?[k,D]:[P-60*Math.min(D,V)*1e3,Math.max(D,V)]}(i.utc(v,y).valueOf(),I,x),E=_[0],j=_[1],M=i(E).utcOffset(j);return M.$x.$timezone=x,M},i.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},i.tz.setDefault=function(v){c=v}}})})(kt);var Ln=kt.exports;const Pn=Xe(Ln);var At={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ge,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,s=/([+-]|\d\d)/g;return function(o,i,c){var u=i.prototype;c.utc=function(y){var x={date:y,utc:!0,args:arguments};return new i(x)},u.utc=function(y){var x=c(this.toDate(),{locale:this.$L,utc:!0});return y?x.add(this.utcOffset(),n):x},u.local=function(){return c(this.toDate(),{locale:this.$L,utc:!1})};var h=u.parse;u.parse=function(y){y.utc&&(this.$u=!0),this.$utils().u(y.$offset)||(this.$offset=y.$offset),h.call(this,y)};var d=u.init;u.init=function(){if(this.$u){var y=this.$d;this.$y=y.getUTCFullYear(),this.$M=y.getUTCMonth(),this.$D=y.getUTCDate(),this.$W=y.getUTCDay(),this.$H=y.getUTCHours(),this.$m=y.getUTCMinutes(),this.$s=y.getUTCSeconds(),this.$ms=y.getUTCMilliseconds()}else d.call(this)};var p=u.utcOffset;u.utcOffset=function(y,x){var I=this.$utils().u;if(I(y))return this.$u?0:I(this.$offset)?p.call(this):this.$offset;if(typeof y=="string"&&(y=function(M){M===void 0&&(M="");var P=M.match(r);if(!P)return null;var F=(""+P[0]).match(s)||["-",0,0],B=F[0],k=60*+F[1]+ +F[2];return k===0?0:B==="+"?k:-k}(y),y===null))return this;var _=Math.abs(y)<=16?60*y:y,E=this;if(x)return E.$offset=_,E.$u=y===0,E;if(y!==0){var j=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(E=this.local().add(_+j,n)).$offset=_,E.$x.$localOffset=j}else E=this.utc();return E};var v=u.format;u.format=function(y){var x=y||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return v.call(this,x)},u.valueOf=function(){var y=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*y},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var $=u.toDate;u.toDate=function(y){return y==="s"&&this.$offset?c(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():$.call(this)};var S=u.diff;u.diff=function(y,x,I){if(y&&this.$u===y.$u)return S.call(this,y,x,I);var _=this.local(),E=c(y).local();return S.call(_,E,x,I)}}})})(At);var Nn=At.exports;const jn=Xe(Nn);ye.extend(jn),ye.extend(Pn);const _t={offset:180,region:"Asia",location:"Kuwait"};function Ze(){return ye.tz(new Date,`${_t.region}/${_t.location}`).format("DD.MM.YYYY")}function Rn(e){return Object.entries(e)}function Et(e){return e=Math.abs(e),e>9?`${e}`:`0${e}`}const Ct={info:"#2ecc71",debug:"#7f8c8d",warn:"#f39c12",error:"#c0392b"};function Un(e){return[`background: ${Ct[e]}`,"border-radius: 0.5em","color: white","font-weight: bold","padding: 2px 0.5em","font-family: cursive"].join(";")}const G=Object.freeze(Rn(Ct).reduce((e,[t])=>(e[t]=(...n)=>{console[t]("%ctryrating-userscript",Un(t),...n)},e),{})),Je=()=>[{date:Ze(),total:0,list:[]}],[be,Qe]=J([]);class Fn{STORAGE_KEY="tryrating-storage-v2";constructor(){this.read()}get taskList(){return be()}read(){const t=GM_getValue(this.STORAGE_KEY,Je());G.info("Readed tasks",t),Qe(t)}reset(){Qe(Je()),GM_setValue(this.STORAGE_KEY,be())}write(t){const n=this.getTaskList();n.total+=1;const r=n.list.find(o=>o.type===t.type);r?(r.count+=1,r.estimated+=t.estimated):n.list.push({count:1,type:t.type,estimated:t.estimated});const s=[n,...be().filter(o=>o.date!==n.date)];Qe(s),GM_setValue(this.STORAGE_KEY,be())}getTaskList(){const t=Ze();G.info("Current date",t);const n=be().find(r=>r.date===t);return G.info("Task list",n),n||Je()[0]}}const Le=new Fn;function U(e,t,...n){const r=document.createElement(e);return t instanceof Node?r.append(t):typeof t=="string"?r.append(Yn(t)):Array.isArray(t)?r.append(...t):(Object.assign(r,t),Object.assign(r.style,t?.style)),r.append(...n),r}function Yn(e){return document.createTextNode(e)}function It(e,t,n){const r=new MutationObserver((s,o)=>{for(const i of s)t(i,o)});return r.observe(e,{childList:!0,subtree:!0,...n}),()=>r.disconnect()}function Bn(e,t=document.body){return new Promise(n=>{It(t,(r,s)=>{const o=t.querySelector(e);o&&(s.disconnect(),n(o))})})}const fe=1e3,de=fe*60,ge=de*60,ae=ge*24,zn=ae*7,Wn=ae*365.25;function et(e,t){try{if(typeof e=="string"&&e.length>0)return Hn(e);if(typeof e=="number"&&isFinite(e))return t?.long?Vn(e):qn(e);throw new Error("Value is not a string or number.")}catch(n){const r=Kn(n)?`${n.message}. value=${JSON.stringify(e)}`:"An unknown error has occured.";throw new Error(r)}}function Hn(e){if(e=String(e),e.length>100)throw new Error("Value exceeds the maximum length of 100 characters.");const t=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(e);if(!t)return NaN;const n=parseFloat(t[1]),r=(t[2]||"ms").toLowerCase();switch(r){case"years":case"year":case"yrs":case"yr":case"y":return n*Wn;case"weeks":case"week":case"w":return n*zn;case"days":case"day":case"d":return n*ae;case"hours":case"hour":case"hrs":case"hr":case"h":return n*ge;case"minutes":case"minute":case"mins":case"min":case"m":return n*de;case"seconds":case"second":case"secs":case"sec":case"s":return n*fe;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:throw new Error(`The unit ${r} was matched, but no matching case exists.`)}}function qn(e){const t=Math.abs(e);return t>=ae?`${Math.round(e/ae)}d`:t>=ge?`${Math.round(e/ge)}h`:t>=de?`${Math.round(e/de)}m`:t>=fe?`${Math.round(e/fe)}s`:`${e}ms`}function Vn(e){const t=Math.abs(e);return t>=ae?Pe(e,t,ae,"day"):t>=ge?Pe(e,t,ge,"hour"):t>=de?Pe(e,t,de,"minute"):t>=fe?Pe(e,t,fe,"second"):`${e} ms`}function Pe(e,t,n,r){const s=t>=n*1.5;return`${Math.round(e/n)} ${r}${s?"s":""}`}function Kn(e){return typeof e=="object"&&e!==null&&"message"in e}const Gn=`const button = document.querySelector('button')
if (location.protocol === 'file:') {
  button.remove()
}

const blob = new Blob([document.body.outerHTML], {
  type: 'text/html'
})

const link = document.createElement('a')
Object.assign(link, {
  target: '_blank',
  href: URL.createObjectURL(blob),
  download: 'tryrating-__DATE__-__TOTAL_TASKS__.html'
})

function savePage() {
  link.click()
}
`;class Xn{currentDate(){const t=ye().month(),n=ye().year();return`${t+1}.${n}`}openPage(){const t=Le.taskList;if(!t.length){alert("\u041D\u0435\u0442\u0443 \u0434\u0430\u043D\u043D\u044B\u0445 \u0434\u043B\u044F \u043F\u0440\u043E\u0441\u043C\u043E\u0442\u0440\u0430.");return}const n=U("div");let r=0;for(const{date:u,list:h,total:d}of t){r+=d;let p=0;const v=U("table",{border:"1"}),$=U("div",{style:{display:"flex",gap:"4px",flexDirection:"column"}}),S=U("tr",U("th","Task Type"),U("th","Count"),U("th","Estimated Rating Time"));v.append($,S);for(const{count:y,estimated:x,type:I}of h){p+=x;const _=U("tr",U("td",I),U("td",`${y}`),U("td",et(x,{long:!0})));v.append(_)}$.append(U("span",`Date: ${u}`),U("span",`Tasks ${d}`),U("span",`Estimated time: ${et(p,{long:!0})}`)),n.append(U("div",v,U("hr")))}const s=U("script",Gn.replace("__DATE__",this.currentDate()).replace("__TOTAL_TASKS__",r.toString())),o=U("button","Save");o.setAttribute("onclick","savePage()"),n.append(s),n.prepend(o);const i=new Blob([n.outerHTML],{type:"text/html"});U("a",{target:"_blank",href:URL.createObjectURL(i)}).click()}}const Lt=new Xn,Zn=ie("<button>A"),[tt,Jn]=J(!0);class Qn{get isAutoSubmit(){return tt()}toggle(){Jn(!tt())}}const ve=new Qn,er=()=>(()=>{const e=Zn();return e.$$click=()=>ve.toggle(),re(()=>e.classList.toggle("enabled",!!tt())),e})();Ve(["click"]);const nt=Symbol("store-raw"),we=Symbol("store-node");function Pt(e){let t=e[X];if(!t&&(Object.defineProperty(e,X,{value:t=new Proxy(e,rr)}),!Array.isArray(e))){const n=Object.keys(e),r=Object.getOwnPropertyDescriptors(e);for(let s=0,o=n.length;s<o;s++){const i=n[s];r[i].get&&Object.defineProperty(e,i,{enumerable:r[i].enumerable,get:r[i].get.bind(t)})}}return t}function Ne(e){let t;return e!=null&&typeof e=="object"&&(e[X]||!(t=Object.getPrototypeOf(e))||t===Object.prototype||Array.isArray(e))}function $e(e,t=new Set){let n,r,s,o;if(n=e!=null&&e[nt])return n;if(!Ne(e)||t.has(e))return e;if(Array.isArray(e)){Object.isFrozen(e)?e=e.slice(0):t.add(e);for(let i=0,c=e.length;i<c;i++)s=e[i],(r=$e(s,t))!==s&&(e[i]=r)}else{Object.isFrozen(e)?e=Object.assign({},e):t.add(e);const i=Object.keys(e),c=Object.getOwnPropertyDescriptors(e);for(let u=0,h=i.length;u<h;u++)o=i[u],!c[o].get&&(s=e[o],(r=$e(s,t))!==s&&(e[o]=r))}return e}function rt(e){let t=e[we];return t||Object.defineProperty(e,we,{value:t=Object.create(null)}),t}function st(e,t,n){return e[t]||(e[t]=jt(n))}function tr(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return!n||n.get||!n.configurable||t===X||t===we||(delete n.value,delete n.writable,n.get=()=>e[X][t]),n}function Nt(e){if(yt()){const t=rt(e);(t._||(t._=jt()))()}}function nr(e){return Nt(e),Reflect.ownKeys(e)}function jt(e){const[t,n]=J(e,{equals:!1,internal:!0});return t.$=n,t}const rr={get(e,t,n){if(t===nt)return e;if(t===X)return n;if(t===dt)return Nt(e),n;const r=rt(e),s=r[t];let o=s?s():e[t];if(t===we||t==="__proto__")return o;if(!s){const i=Object.getOwnPropertyDescriptor(e,t);yt()&&(typeof o!="function"||e.hasOwnProperty(t))&&!(i&&i.get)&&(o=st(r,t,o)())}return Ne(o)?Pt(o):o},has(e,t){return t===nt||t===X||t===dt||t===we||t==="__proto__"?!0:(this.get(e,t,e),t in e)},set(){return!0},deleteProperty(){return!0},ownKeys:nr,getOwnPropertyDescriptor:tr};function je(e,t,n,r=!1){if(!r&&e[t]===n)return;const s=e[t],o=e.length;n===void 0?delete e[t]:e[t]=n;let i=rt(e),c;if((c=st(i,t,s))&&c.$(()=>n),Array.isArray(e)&&e.length!==o){for(let u=e.length;u<o;u++)(c=i[u])&&c.$();(c=st(i,"length",o))&&c.$(e.length)}(c=i._)&&c.$()}function Rt(e,t){const n=Object.keys(t);for(let r=0;r<n.length;r+=1){const s=n[r];je(e,s,t[s])}}function sr(e,t){if(typeof t=="function"&&(t=t(e)),t=$e(t),Array.isArray(t)){if(e===t)return;let n=0,r=t.length;for(;n<r;n++){const s=t[n];e[n]!==s&&je(e,n,s)}je(e,"length",r)}else Rt(e,t)}function Te(e,t,n=[]){let r,s=e;if(t.length>1){r=t.shift();const i=typeof r,c=Array.isArray(e);if(Array.isArray(r)){for(let u=0;u<r.length;u++)Te(e,[r[u]].concat(t),n);return}else if(c&&i==="function"){for(let u=0;u<e.length;u++)r(e[u],u)&&Te(e,[u].concat(t),n);return}else if(c&&i==="object"){const{from:u=0,to:h=e.length-1,by:d=1}=r;for(let p=u;p<=h;p+=d)Te(e,[p].concat(t),n);return}else if(t.length>1){Te(e[r],t,[r].concat(n));return}s=e[r],n=[r].concat(n)}let o=t[0];typeof o=="function"&&(o=o(s,n),o===s)||r===void 0&&o==null||(o=$e(o),r===void 0||Ne(s)&&Ne(o)&&!Array.isArray(o)?Rt(s,o):je(e,r,o))}function Ut(...[e,t]){const n=$e(e||{}),r=Array.isArray(n),s=Pt(n);function o(...i){ee(()=>{r&&i.length===1?sr(n,i[0]):Te(n,i)})}return[s,o]}const or=ie("<div>");var Re=class{x;y;width;height;constructor(e){this.x=Math.floor(e.x),this.y=Math.floor(e.y),this.width=Math.floor(e.width),this.height=Math.floor(e.height)}get rect(){return{x:this.x,y:this.y,width:this.width,height:this.height}}get left(){return this.x}get top(){return this.y}get right(){return this.x+this.width}get bottom(){return this.y+this.height}get center(){return{x:this.x+this.width*.5,y:this.y+this.height*.5}}get corners(){return{topLeft:{x:this.left,y:this.top},topRight:{x:this.right,y:this.top},bottomRight:{x:this.left,y:this.bottom},bottomLeft:{x:this.right,y:this.bottom}}}},Se=e=>{let t=new Re(e.getBoundingClientRect());const{transform:n}=getComputedStyle(e);return n&&(t=ir(t,n)),t},ir=(e,t)=>{let n,r;if(t.startsWith("matrix3d(")){const s=t.slice(9,-1).split(/, /);n=+s[12],r=+s[13]}else if(t.startsWith("matrix(")){const s=t.slice(7,-1).split(/, /);n=+s[4],r=+s[5]}else n=0,r=0;return new Re({...e,x:e.x-n,y:e.y-r})},he=()=>({x:0,y:0}),ar=(e,t)=>e.x===t.x&&e.y===t.y,ot=(e,t)=>new Re({...e,x:e.x+t.x,y:e.y+t.y}),lr=(e,t)=>{const n=Math.max(e.top,t.top),r=Math.max(e.left,t.left),s=Math.min(e.right,t.right),o=Math.min(e.bottom,t.bottom),i=s-r,c=o-n;if(r<s&&n<o){const u=e.width*e.height,h=t.width*t.height,d=i*c;return d/(u+h-d)}return 0},it=(e,t)=>e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height,cr=(e,t,n)=>{const r=e.transformed,s={ratio:0,droppable:null};for(const o of t){const i=lr(r,o.layout);i>s.ratio?(s.ratio=i,s.droppable=o):i>0&&i===s.ratio&&o.id===n.activeDroppableId&&(s.droppable=o)}return s.droppable},Ft=dn(),ur=e=>{const t=Tn({collisionDetector:cr},e),[n,r]=Ut({draggables:{},droppables:{},sensors:{},active:{draggableId:null,get draggable(){return n.active.draggableId!==null?n.draggables[n.active.draggableId]:null},droppableId:null,get droppable(){return n.active.droppableId!==null?n.droppables[n.active.droppableId]:null},sensorId:null,get sensor(){return n.active.sensorId!==null?n.sensors[n.active.sensorId]:null},overlay:null}}),s=(a,l,f)=>{a.substring(0,a.length-1),R(()=>n[a][l])&&r(a,l,"transformers",f.id,f)},o=(a,l,f)=>{a.substring(0,a.length-1),R(()=>n[a][l])&&R(()=>n[a][l].transformers[f])&&r(a,l,"transformers",f,void 0)},i=({id:a,node:l,layout:f,data:g})=>{const b=n.draggables[a],m={id:a,node:l,layout:f,data:g,_pendingCleanup:!1};let w;if(!b)Object.defineProperties(m,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{if(n.active.overlay)return he();const O=Object.values(n.draggables[a].transformers);return O.sort((A,N)=>A.order-N.order),O.reduce((A,N)=>N.callback(A),he())}},transformed:{enumerable:!0,configurable:!0,get:()=>ot(n.draggables[a].layout,n.draggables[a].transform)}});else if(n.active.draggableId===a&&!n.active.overlay){const O={x:b.layout.x-f.x,y:b.layout.y-f.y},A="addDraggable-existing-offset",N=b.transformers[A],z=N?N.callback(O):O;w={id:A,order:100,callback:te=>({x:te.x+z.x,y:te.y+z.y})},V(()=>o("draggables",a,A))}ee(()=>{r("draggables",a,m),w&&s("draggables",a,w)}),n.active.draggable&&j()},c=a=>{R(()=>n.draggables[a])&&(r("draggables",a,"_pendingCleanup",!0),queueMicrotask(()=>u(a)))},u=a=>{if(n.draggables[a]?._pendingCleanup){const l=n.active.draggableId===a;ee(()=>{l&&r("active","draggableId",null),r("draggables",a,void 0)})}},h=({id:a,node:l,layout:f,data:g})=>{const b=n.droppables[a],m={id:a,node:l,layout:f,data:g,_pendingCleanup:!1};b||Object.defineProperties(m,{transformers:{enumerable:!0,configurable:!0,writable:!0,value:{}},transform:{enumerable:!0,configurable:!0,get:()=>{const w=Object.values(n.droppables[a].transformers);return w.sort((O,A)=>O.order-A.order),w.reduce((O,A)=>A.callback(O),he())}},transformed:{enumerable:!0,configurable:!0,get:()=>ot(n.droppables[a].layout,n.droppables[a].transform)}}),r("droppables",a,m),n.active.draggable&&j()},d=a=>{R(()=>n.droppables[a])&&(r("droppables",a,"_pendingCleanup",!0),queueMicrotask(()=>p(a)))},p=a=>{if(n.droppables[a]?._pendingCleanup){const l=n.active.droppableId===a;ee(()=>{l&&r("active","droppableId",null),r("droppables",a,void 0)})}},v=({id:a,activators:l})=>{r("sensors",a,{id:a,activators:l,coordinates:{origin:{x:0,y:0},current:{x:0,y:0},get delta(){return{x:n.sensors[a].coordinates.current.x-n.sensors[a].coordinates.origin.x,y:n.sensors[a].coordinates.current.y-n.sensors[a].coordinates.origin.y}}}})},$=a=>{if(!R(()=>n.sensors[a]))return;const l=n.active.sensorId===a;ee(()=>{l&&r("active","sensorId",null),r("sensors",a,void 0)})},S=({node:a,layout:l})=>{const f=n.active.overlay,g={node:a,layout:l};f||Object.defineProperties(g,{id:{enumerable:!0,configurable:!0,get:()=>n.active.draggable?.id},data:{enumerable:!0,configurable:!0,get:()=>n.active.draggable?.data},transformers:{enumerable:!0,configurable:!0,get:()=>Object.fromEntries(Object.entries(n.active.draggable?n.active.draggable.transformers:{}).filter(([b])=>b!=="addDraggable-existing-offset"))},transform:{enumerable:!0,configurable:!0,get:()=>{const b=Object.values(n.active.overlay?n.active.overlay.transformers:[]);return b.sort((m,w)=>m.order-w.order),b.reduce((m,w)=>w.callback(m),he())}},transformed:{enumerable:!0,configurable:!0,get:()=>n.active.overlay?ot(n.active.overlay.layout,n.active.overlay.transform):new Re({x:0,y:0,width:0,height:0})}}),r("active","overlay",g)},y=()=>r("active","overlay",null),x=(a,l)=>{ee(()=>{r("sensors",a,"coordinates",{origin:{...l},current:{...l}}),r("active","sensorId",a)})},I=a=>{const l=n.active.sensorId;l&&r("sensors",l,"coordinates","current",{...a})},_=()=>r("active","sensorId",null),E=(a,l)=>{const f={};for(const b of Object.values(n.sensors))if(b)for(const[m,w]of Object.entries(b.activators))f[m]??=[],f[m].push({sensor:b,activator:w});const g={};for(const b in f){let m=b;l&&(m=`on${b}`),g[m]=w=>{for(const{activator:O}of f[b]){if(n.active.sensor)break;O(w,a)}}}return g},j=()=>{let a=!1;const l=Object.values(n.draggables),f=Object.values(n.droppables),g=n.active.overlay;return ee(()=>{const b=new WeakMap;for(const m of l)if(m){const w=m.layout;b.has(m.node)||b.set(m.node,Se(m.node));const O=b.get(m.node);it(w,O)||(r("draggables",m.id,"layout",O),a=!0)}for(const m of f)if(m){const w=m.layout;b.has(m.node)||b.set(m.node,Se(m.node));const O=b.get(m.node);it(w,O)||(r("droppables",m.id,"layout",O),a=!0)}if(g){const m=g.layout,w=Se(g.node);it(m,w)||(r("active","overlay","layout",w),a=!0)}}),a},M=()=>{const a=n.active.overlay??n.active.draggable;if(a){const l=t.collisionDetector(a,Object.values(n.droppables),{activeDroppableId:n.active.droppableId}),f=l?l.id:null;n.active.droppableId!==f&&r("active","droppableId",f)}},P=a=>{const l={id:"sensorMove",order:0,callback:f=>n.active.sensor?{x:f.x+n.active.sensor.coordinates.delta.x,y:f.y+n.active.sensor.coordinates.delta.y}:f};j(),ee(()=>{r("active","draggableId",a),s("draggables",a,l)}),M()},F=()=>{const a=R(()=>n.active.draggableId);ee(()=>{a!==null&&o("draggables",a,"sensorMove"),r("active",["draggableId","droppableId"],null)}),j()},B=a=>{Q(()=>{const l=n.active.draggable;l&&R(()=>a({draggable:l}))})},k=a=>{Q(()=>{const l=n.active.draggable;if(l){const f=R(()=>n.active.overlay);Object.values(f?f.transform:l.transform),R(()=>a({draggable:l,overlay:f}))}})},D=a=>{Q(()=>{const l=n.active.draggable,f=n.active.droppable;l&&R(()=>a({draggable:l,droppable:f,overlay:n.active.overlay}))})},V=a=>{Q(({previousDraggable:l,previousDroppable:f,previousOverlay:g})=>{const b=n.active.draggable,m=b?n.active.droppable:null,w=b?n.active.overlay:null;return!b&&l&&R(()=>a({draggable:l,droppable:f,overlay:g})),{previousDraggable:b,previousDroppable:m,previousOverlay:w}},{previousDraggable:null,previousDroppable:null,previousOverlay:null})};k(()=>M()),t.onDragStart&&B(t.onDragStart),t.onDragMove&&k(t.onDragMove),t.onDragOver&&D(t.onDragOver),t.onDragEnd&&V(t.onDragEnd);const T=[n,{addTransformer:s,removeTransformer:o,addDraggable:i,removeDraggable:c,addDroppable:h,removeDroppable:d,addSensor:v,removeSensor:$,setOverlay:S,clearOverlay:y,recomputeLayouts:j,detectCollisions:M,draggableActivators:E,sensorStart:x,sensorMove:I,sensorEnd:_,dragStart:P,dragEnd:F,onDragStart:B,onDragMove:k,onDragOver:D,onDragEnd:V}];return W(Ft.Provider,{value:T,get children(){return t.children}})},at=()=>gn(Ft)||null,fr=(e="pointer-sensor")=>{const[t,{addSensor:n,removeSensor:r,sensorStart:s,sensorMove:o,sensorEnd:i,dragStart:c,dragEnd:u}]=at(),h=250,d=10;mt(()=>{n({id:e,activators:{pointerdown:y}})}),pe(()=>{r(e)});const p=()=>t.active.sensorId===e,v={x:0,y:0};let $=null,S=null;const y=(M,P)=>{M.button===0&&(document.addEventListener("pointermove",_),document.addEventListener("pointerup",E),S=P,v.x=M.clientX,v.y=M.clientY,$=window.setTimeout(I,h))},x=()=>{$&&(clearTimeout($),$=null),document.removeEventListener("pointermove",_),document.removeEventListener("pointerup",E),document.removeEventListener("selectionchange",j)},I=()=>{t.active.sensor?p()||x():(s(e,v),c(S),j(),document.addEventListener("selectionchange",j))},_=M=>{const P={x:M.clientX,y:M.clientY};if(!t.active.sensor){const F={x:P.x-v.x,y:P.y-v.y};Math.sqrt(F.x**2+F.y**2)>d&&I()}p()&&(M.preventDefault(),o(P))},E=M=>{x(),p()&&(M.preventDefault(),u(),i())},j=()=>{window.getSelection()?.removeAllRanges()}},dr=e=>(fr(),q(()=>e.children)),Yt=e=>({transform:`translate3d(${e.x}px, ${e.y}px, 0)`}),gr=(e,t={})=>{const[n,{addDraggable:r,removeDraggable:s,draggableActivators:o}]=at(),[i,c]=J(null);mt(()=>{const p=i();p&&r({id:e,node:p,layout:Se(p),data:t})}),pe(()=>s(e));const u=()=>n.active.draggableId===e,h=()=>n.draggables[e]?.transform||he();return Object.defineProperties((p,v)=>{const $=v?v():{};Q(()=>{const S=i(),y=o(e);if(S)for(const x in y)S.addEventListener(x,y[x]);pe(()=>{if(S)for(const x in y)S.removeEventListener(x,y[x])})}),c(p),$.skipTransform||Q(()=>{const S=h();if(ar(S,he()))p.style.removeProperty("transform");else{const y=Yt(h());p.style.setProperty("transform",y.transform??null)}})},{ref:{enumerable:!0,value:c},isActiveDraggable:{enumerable:!0,get:u},dragActivators:{enumerable:!0,get:()=>o(e,!0)},transform:{enumerable:!0,get:h}})},hr=e=>{const[t,{onDragStart:n,onDragEnd:r,setOverlay:s,clearOverlay:o}]=at();let i;n(({draggable:u})=>{s({node:u.node,layout:u.layout}),queueMicrotask(()=>{if(i){const h=Se(i),d={x:(u.layout.width-h.width)/2,y:(u.layout.height-h.height)/2};h.x+=d.x,h.y+=d.y,s({node:i,layout:h})}})}),r(()=>queueMicrotask(o));const c=()=>{const u=t.active.overlay,h=t.active.draggable;return!u||!h?{}:{position:"fixed",transition:"transform 0s",top:`${u.layout.top}px`,left:`${u.layout.left}px`,"min-width":`${h.layout.width}px`,"min-height":`${h.layout.height}px`,...Yt(u.transform),...e.style}};return W(Cn,{get mount(){return document.body},get children(){return W(St,{get when(){return t.active.draggable},get children(){const u=or(),h=i;return typeof h=="function"?Ot(h,u):i=u,K(u,(()=>{const d=q(()=>typeof e.children=="function");return()=>d()?e.children(t.active.draggable):e.children})()),re(d=>{const p=e.class,v=c();return p!==d._v$&&Mn(u,d._v$=p),d._v$2=kn(u,v,d._v$2),d},{_v$:void 0,_v$2:void 0}),u}})}})};function Bt(e,t){const n=GM_getValue(e,t),[r,s]=Ut(n);return Q(()=>GM_setValue(e,r)),[r,s]}const pr=ie('<div class="widget-draggable widget-absolute">'),mr=ie('<div class="widget-drag-overlay"><span class="widget-drag-text">alt+3 reset position'),[zt,Wt]=Bt("widget-position",{top:"0px",left:"0px"});function yr(){Wt({top:"0px",left:"0px"})}const br=e=>{const t=gr(e.id);return(()=>{const n=pr();return Ot(t,n,()=>!0),K(n,()=>e.children),re(r=>{const s=!!t.isActiveDraggable,o=zt.top,i=zt.left;return s!==r._v$&&n.classList.toggle("widget-opacity-25",r._v$=s),o!==r._v$2&&((r._v$2=o)!=null?n.style.setProperty("top",o):n.style.removeProperty("top")),i!==r._v$3&&((r._v$3=i)!=null?n.style.setProperty("left",i):n.style.removeProperty("left")),r},{_v$:void 0,_v$2:void 0,_v$3:void 0}),n})()},vr=e=>{let t={x:0,y:0};return W(ur,{onDragMove:({overlay:s})=>{s&&(t={...s.transform})},onDragEnd:({draggable:s})=>{const o=s.node,i=`${o.offsetTop+t.y}px`,c=`${o.offsetLeft+t.x}px`;Wt({top:i,left:c})},get children(){return[W(dr,{}),W(br,{id:1,get children(){return e.children}}),W(hr,{get children(){return[mr(),q(()=>e.children)]}})]}})},[Ht,wr]=J(!0);function $r(){wr(!Ht())}const Tr=e=>W(St,{get when(){return Ht()},get children(){return e.children}});function Sr(){window.addEventListener("keydown",e=>{e.altKey&&e.key==="1"&&(e.preventDefault(),Lt.openPage()),e.altKey&&e.key==="2"&&(e.preventDefault(),confirm(`Reset data.
Are you sure?`)&&Le.reset()),e.altKey&&e.key==="3"&&(e.preventDefault(),yr()),e.ctrlKey&&e.code==="KeyO"&&(e.preventDefault(),ve.toggle()),e.ctrlKey&&e.code==="KeyX"&&(e.preventDefault(),$r())})}const xr=e=>(t,n)=>(e.set(t,n),n),qt=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,Vt=536870912,Kt=Vt*2,Or=(e,t)=>n=>{const r=t.get(n);let s=r===void 0?n.size:r<Kt?r+1:0;if(!n.has(s))return e(n,s);if(n.size<Vt){for(;n.has(s);)s=Math.floor(Math.random()*Kt);return e(n,s)}if(n.size>qt)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;n.has(s);)s=Math.floor(Math.random()*qt);return e(n,s)},Gt=new WeakMap,Dr=xr(Gt),Ue=Or(Dr,Gt),Mr=e=>e.method!==void 0&&e.method==="call",kr=e=>e.error===null&&typeof e.id=="number",Xt=((e,t)=>{let n=null;return()=>{if(n!==null)return n;const r=new Blob([t],{type:"application/javascript; charset=utf-8"}),s=URL.createObjectURL(r);return n=e(s),setTimeout(()=>URL.revokeObjectURL(s)),n}})(e=>{const t=new Map([[0,()=>{}]]),n=new Map([[0,()=>{}]]),r=new Map,s=new Worker(e);return s.addEventListener("message",({data:h})=>{if(Mr(h)){const{params:{timerId:d,timerType:p}}=h;if(p==="interval"){const v=t.get(d);if(typeof v=="number"){const $=r.get(v);if($===void 0||$.timerId!==d||$.timerType!==p)throw new Error("The timer is in an undefined state.")}else if(typeof v<"u")v();else throw new Error("The timer is in an undefined state.")}else if(p==="timeout"){const v=n.get(d);if(typeof v=="number"){const $=r.get(v);if($===void 0||$.timerId!==d||$.timerType!==p)throw new Error("The timer is in an undefined state.")}else if(typeof v<"u")v(),n.delete(d);else throw new Error("The timer is in an undefined state.")}}else if(kr(h)){const{id:d}=h,p=r.get(d);if(p===void 0)throw new Error("The timer is in an undefined state.");const{timerId:v,timerType:$}=p;r.delete(d),$==="interval"?t.delete(v):n.delete(v)}else{const{error:{message:d}}=h;throw new Error(d)}}),{clearInterval:h=>{const d=Ue(r);r.set(d,{timerId:h,timerType:"interval"}),t.set(h,d),s.postMessage({id:d,method:"clear",params:{timerId:h,timerType:"interval"}})},clearTimeout:h=>{const d=Ue(r);r.set(d,{timerId:h,timerType:"timeout"}),n.set(h,d),s.postMessage({id:d,method:"clear",params:{timerId:h,timerType:"timeout"}})},setInterval:(h,d)=>{const p=Ue(t);return t.set(p,()=>{h(),typeof t.get(p)=="function"&&s.postMessage({id:null,method:"set",params:{delay:d,now:performance.now(),timerId:p,timerType:"interval"}})}),s.postMessage({id:null,method:"set",params:{delay:d,now:performance.now(),timerId:p,timerType:"interval"}}),p},setTimeout:(h,d)=>{const p=Ue(n);return n.set(p,h),s.postMessage({id:null,method:"set",params:{delay:d,now:performance.now(),timerId:p,timerType:"timeout"}}),p}}},`(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error('The given type "'.concat(i,'" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error('The given method "'.concat(s.method,'" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error('The given type "'.concat(d,'" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`),Zt=e=>Xt().clearInterval(e),lt=(e,t)=>Xt().setInterval(e,t),Ar=".modal-container.visible",_r="div[modalwrapref] > div",Jt="Validation failed!",[Qt,Er]=Bt("auto-close-modal",{value:!0});class Cr{get autoClose(){return Qt.value}toggleAutoClose(){Er({value:!Qt.value})}closeValidationFailed(){const t=document.querySelector(Ar);if(!t)return;const n=t.querySelector(_r);if(n&&n.textContent===Jt){GM_notification({title:document.title,text:Jt,highlight:!0,silent:!1,timeout:1e3});const r=t.querySelector("button");r&&(G.info("Modal closed"),r.click())}}}const Fe=new Cr;function en(e){return e.split(/\s(?=\d)/).reduce((n,r)=>(n+=et(r),n),0)}class Ir{taskFields=null;onChangeTaskCallback=null;get targetSelector(){return".survey-meta-fields"}onChangeTask(t){this.onChangeTaskCallback=t}observe(){const t=document.querySelector(this.targetSelector);if(!t){G.error("Task fields not found");return}const n=Array.from(t.querySelectorAll(".labeled-attribute__attribute"));if(!n.length){G.error("Task fields attributes not found");return}const[r,s,o]=n,i={taskType:r.textContent,requestId:s.textContent,estimatedRatingTime:o.textContent.trim()};i.requestId!==this.taskFields?.requestId&&(G.info("Task fields changed",i),this.onChangeTaskCallback(i),ve.isAutoSubmit||ve.toggle(),this.taskFields&&(G.info("Task is submitted",this.taskFields),Le.write({type:this.taskFields.taskType,estimated:en(this.taskFields.estimatedRatingTime)})),this.taskFields=i)}}const ct=new Ir;async function Lr(){const e=document.querySelector("#app-root");if(!e){G.error("App root not found");return}It(e,()=>{Fe.autoClose&&Fe.closeValidationFailed()}),Bn(ct.targetSelector).then(()=>{lt(()=>ct.observe(),7*1e3)}).finally(()=>G.info("Initialized task fields observer"))}const[Pr,tn]=J(0);class Nr{intervalId;get time(){return Pr()}tick(){tn(t=>t+1e3)}start(){this.intervalId&&(Zt(this.intervalId),tn(0)),this.intervalId=lt(()=>this.tick(),1e3)}}const nn=new Nr,jr=".btn-success",Rr="Submit Rating",[rn,Ur]=J(!0);class Fr{get isAutoSubmit(){return rn()}toggleAutoSubmit(){Ur(!rn())}getSubmitButtons(){const t=[],n=Array.from(document.querySelectorAll(jr));for(const r of n)r instanceof HTMLButtonElement&&r.textContent===Rr&&t.push(r);return t}clickSubmit(){if(!ve.isAutoSubmit)return;const t=this.getSubmitButtons();if(!t.length){G.error("Submit button is not defined");return}t[0].click()}}const Yr=new Fr,[sn,on]=J(0);class Br{intervalId;onEndCallback;onTickTimer(){const t=sn()-1e3;on(t),t===0&&(this.onEndCallback(),this.stop())}get time(){return sn()}onTimerEnd(t){this.onEndCallback=t}start(t){const n=en(t);this.stop(),on(n),this.intervalId=lt(()=>this.onTickTimer(),1e3)}stop(){this.intervalId&&(Zt(this.intervalId),this.intervalId=null)}}const ut=new Br,zr=ie("<button>M"),Wr=()=>(()=>{const e=zr();return e.$$click=()=>Fe.toggleAutoClose(),re(()=>e.classList.toggle("enabled",!!Fe.autoClose)),e})();Ve(["click"]);const Hr=ie('<button class="task-counter">'),qr=()=>{const e=q(()=>{const t=Ze();return Le.taskList.find(r=>r.date===t)?.total??"0"});return(()=>{const t=Hr();return t.$$click=()=>Lt.openPage(),K(t,e),t})()};Ve(["click"]);function an(e){const t=Et(Math.floor(e/6e4)),n=Et(Number((e%6e4/1e3).toFixed(0)));return`${t}:${n}`}const Jr="",Vr=ie('<div class="tryrating-widget"><div>Timer: </div><div>Stopwatch: ');ut.onTimerEnd(()=>Yr.clickSubmit()),ct.onChangeTask(e=>{ut.start(e.estimatedRatingTime),nn.start()});const Kr=()=>{const e=q(()=>an(ut.time)),t=q(()=>an(nn.time));return W(Tr,{get children(){return W(vr,{get children(){const n=Vr(),r=n.firstChild;r.firstChild;const s=r.nextSibling;return s.firstChild,K(r,e,null),K(s,t,null),K(n,W(qr,{}),null),K(n,W(er,{}),null),K(n,W(Wr,{}),null),n}})}})};Lr(),Sr(),On(()=>W(Kr,{}),document.body),GM_addStyle(":root{--try-font-family: monospace}.tryrating-widget{display:flex;color:#fff;padding-left:4px;background:#2e2c2f;font-size:1rem;font-weight:600;align-items:center;height:40px;justify-content:center;text-transform:uppercase;font-family:var(--try-font-family)}.tryrating-widget>.task-counter{background:gray}.tryrating-widget>div{margin-left:6px;margin-right:6px}.tryrating-widget>button{text-transform:inherit;height:inherit;border:none;font-size:inherit;font-weight:inherit;color:#fff;padding-left:12px;padding-right:12px;background:#f44336}.tryrating-widget>button.enabled{background:#4caf50}.widget-draggable{cursor:pointer}.widget-absolute{z-index:999999;position:absolute}.widget-opacity-25{opacity:.25}.widget-drag-overlay{font-size:20px;font-weight:700;color:#3b99fc;width:100%;height:100%;position:absolute;text-align:center;align-self:center;text-transform:uppercase;background:rgba(0,0,0,.9)}.widget-drag-text{font-family:var(--try-font-family);position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);width:100%}")})();
