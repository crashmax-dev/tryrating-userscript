(function(){"use strict";const Q={equals:(t,e)=>t===e};let re=Lt;const N=1,tt=2,Dt={owned:null,cleanups:null,context:null,owner:null};var O=null;let gt=null,S=null,_=null,F=null,et=0;function ie(t,e){const n=S,s=O,r=t.length===0,i=r?Dt:{owned:null,cleanups:null,context:null,owner:e===void 0?s:e},c=r?t:()=>t(()=>st(()=>ot(i)));O=i,S=null;try{return G(c,!0)}finally{S=n,O=s}}function q(t,e){e=e?Object.assign({},Q,e):Q;const n={value:t,observers:null,observerSlots:null,comparator:e.equals||void 0},s=r=>(typeof r=="function"&&(r=r(n.value)),Ot(n,r));return[Ct.bind(n),s]}function nt(t,e,n){const s=xt(t,e,!1,N);rt(s)}function yt(t,e,n){n=n?Object.assign({},Q,n):Q;const s=xt(t,e,!0,0);return s.observers=null,s.observerSlots=null,s.comparator=n.equals||void 0,rt(s),Ct.bind(s)}function st(t){if(S===null)return t();const e=S;S=null;try{return t()}finally{S=e}}function Ct(){if(this.sources&&this.state)if(this.state===N)rt(this);else{const t=_;_=null,G(()=>it(this),!1),_=t}if(S){const t=this.observers?this.observers.length:0;S.sources?(S.sources.push(this),S.sourceSlots.push(t)):(S.sources=[this],S.sourceSlots=[t]),this.observers?(this.observers.push(S),this.observerSlots.push(S.sources.length-1)):(this.observers=[S],this.observerSlots=[S.sources.length-1])}return this.value}function Ot(t,e,n){let s=t.value;return(!t.comparator||!t.comparator(s,e))&&(t.value=e,t.observers&&t.observers.length&&G(()=>{for(let r=0;r<t.observers.length;r+=1){const i=t.observers[r],c=gt&&gt.running;c&&gt.disposed.has(i),(c?!i.tState:!i.state)&&(i.pure?_.push(i):F.push(i),i.observers&&Nt(i)),c||(i.state=N)}if(_.length>1e6)throw _=[],new Error},!1)),e}function rt(t){if(!t.fn)return;ot(t);const e=O,n=S,s=et;S=O=t,oe(t,t.value,s),S=n,O=e}function oe(t,e,n){let s;try{s=t.fn(e)}catch(r){return t.pure&&(t.state=N,t.owned&&t.owned.forEach(ot),t.owned=null),t.updatedAt=n+1,Ft(r)}(!t.updatedAt||t.updatedAt<=n)&&(t.updatedAt!=null&&"observers"in t?Ot(t,s):t.value=s,t.updatedAt=n)}function xt(t,e,n,s=N,r){const i={fn:t,state:s,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:e,owner:O,context:null,pure:n};return O===null||O!==Dt&&(O.owned?O.owned.push(i):O.owned=[i]),i}function It(t){if(t.state===0)return;if(t.state===tt)return it(t);if(t.suspense&&st(t.suspense.inFallback))return t.suspense.effects.push(t);const e=[t];for(;(t=t.owner)&&(!t.updatedAt||t.updatedAt<et);)t.state&&e.push(t);for(let n=e.length-1;n>=0;n--)if(t=e[n],t.state===N)rt(t);else if(t.state===tt){const s=_;_=null,G(()=>it(t,e[0]),!1),_=s}}function G(t,e){if(_)return t();let n=!1;e||(_=[]),F?n=!0:F=[],et++;try{const s=t();return ae(n),s}catch(s){n||(F=null),_=null,Ft(s)}}function ae(t){if(_&&(Lt(_),_=null),t)return;const e=F;F=null,e.length&&G(()=>re(e),!1)}function Lt(t){for(let e=0;e<t.length;e++)It(t[e])}function it(t,e){t.state=0;for(let n=0;n<t.sources.length;n+=1){const s=t.sources[n];if(s.sources){const r=s.state;r===N?s!==e&&(!s.updatedAt||s.updatedAt<et)&&It(s):r===tt&&it(s,e)}}}function Nt(t){for(let e=0;e<t.observers.length;e+=1){const n=t.observers[e];n.state||(n.state=tt,n.pure?_.push(n):F.push(n),n.observers&&Nt(n))}}function ot(t){let e;if(t.sources)for(;t.sources.length;){const n=t.sources.pop(),s=t.sourceSlots.pop(),r=n.observers;if(r&&r.length){const i=r.pop(),c=n.observerSlots.pop();s<r.length&&(i.sourceSlots[c]=s,r[s]=i,n.observerSlots[s]=c)}}if(t.owned){for(e=t.owned.length-1;e>=0;e--)ot(t.owned[e]);t.owned=null}if(t.cleanups){for(e=t.cleanups.length-1;e>=0;e--)t.cleanups[e]();t.cleanups=null}t.state=0,t.context=null}function ue(t){return t instanceof Error?t:new Error(typeof t=="string"?t:"Unknown error",{cause:t})}function Ft(t,e=O){throw ue(t)}function le(t,e){return st(()=>t(e||{}))}function ce(t,e,n){let s=n.length,r=e.length,i=s,c=0,o=0,T=e[r-1].nextSibling,m=null;for(;c<r||o<i;){if(e[c]===n[o]){c++,o++;continue}for(;e[r-1]===n[i-1];)r--,i--;if(r===c){const d=i<s?o?n[o-1].nextSibling:n[i-o]:T;for(;o<i;)t.insertBefore(n[o++],d)}else if(i===o)for(;c<r;)(!m||!m.has(e[c]))&&e[c].remove(),c++;else if(e[c]===n[i-1]&&n[o]===e[r-1]){const d=e[--r].nextSibling;t.insertBefore(n[o++],e[c++].nextSibling),t.insertBefore(n[--i],d),e[r]=n[i]}else{if(!m){m=new Map;let y=o;for(;y<i;)m.set(n[y],y++)}const d=m.get(e[c]);if(d!=null)if(o<d&&d<i){let y=c,v=1,$;for(;++y<r&&y<i&&!(($=m.get(e[y]))==null||$!==d+v);)v++;if(v>d-o){const I=e[c];for(;o<d;)t.insertBefore(n[o++],I)}else t.replaceChild(n[o++],e[c++])}else c++;else e[c++].remove()}}}const Rt="_$DX_DELEGATE";function fe(t,e,n,s={}){let r;return ie(i=>{r=i,e===document?t():at(e,t(),e.firstChild?null:void 0,n)},s.owner),()=>{r(),e.textContent=""}}function de(t,e,n){let s;const r=()=>{const c=document.createElement("template");return c.innerHTML=t,n?c.content.firstChild.firstChild:c.content.firstChild},i=e?()=>st(()=>document.importNode(s||(s=r()),!0)):()=>(s||(s=r())).cloneNode(!0);return i.cloneNode=i,i}function he(t,e=window.document){const n=e[Rt]||(e[Rt]=new Set);for(let s=0,r=t.length;s<r;s++){const i=t[s];n.has(i)||(n.add(i),e.addEventListener(i,me))}}function at(t,e,n,s){if(n!==void 0&&!s&&(s=[]),typeof e!="function")return ut(t,e,s,n);nt(r=>ut(t,e(),r,n),s)}function me(t){const e=`$$${t.type}`;let n=t.composedPath&&t.composedPath()[0]||t.target;for(t.target!==n&&Object.defineProperty(t,"target",{configurable:!0,value:n}),Object.defineProperty(t,"currentTarget",{configurable:!0,get(){return n||document}});n;){const s=n[e];if(s&&!n.disabled){const r=n[`${e}Data`];if(r!==void 0?s.call(n,r,t):s.call(n,t),t.cancelBubble)return}n=n._$host||n.parentNode||n.host}}function ut(t,e,n,s,r){for(;typeof n=="function";)n=n();if(e===n)return n;const i=typeof e,c=s!==void 0;if(t=c&&n[0]&&n[0].parentNode||t,i==="string"||i==="number")if(i==="number"&&(e=e.toString()),c){let o=n[0];o&&o.nodeType===3?o.data=e:o=document.createTextNode(e),n=j(t,n,s,o)}else n!==""&&typeof n=="string"?n=t.firstChild.data=e:n=t.textContent=e;else if(e==null||i==="boolean")n=j(t,n,s);else{if(i==="function")return nt(()=>{let o=e();for(;typeof o=="function";)o=o();n=ut(t,o,n,s)}),()=>n;if(Array.isArray(e)){const o=[],T=n&&Array.isArray(n);if(wt(o,e,n,r))return nt(()=>n=ut(t,o,n,s,!0)),()=>n;if(o.length===0){if(n=j(t,n,s),c)return n}else T?n.length===0?Yt(t,o,s):ce(t,n,o):(n&&j(t),Yt(t,o));n=o}else if(e.nodeType){if(Array.isArray(n)){if(c)return n=j(t,n,s,e);j(t,n,null,e)}else n==null||n===""||!t.firstChild?t.appendChild(e):t.replaceChild(e,t.firstChild);n=e}else console.warn("Unrecognized value. Skipped inserting",e)}return n}function wt(t,e,n,s){let r=!1;for(let i=0,c=e.length;i<c;i++){let o=e[i],T=n&&n[i],m;if(!(o==null||o===!0||o===!1))if((m=typeof o)=="object"&&o.nodeType)t.push(o);else if(Array.isArray(o))r=wt(t,o,T)||r;else if(m==="function")if(s){for(;typeof o=="function";)o=o();r=wt(t,Array.isArray(o)?o:[o],Array.isArray(T)?T:[T])||r}else t.push(o),r=!0;else{const d=String(o);T&&T.nodeType===3&&T.data===d?t.push(T):t.push(document.createTextNode(d))}}return r}function Yt(t,e,n=null){for(let s=0,r=e.length;s<r;s++)t.insertBefore(e[s],n)}function j(t,e,n,s){if(n===void 0)return t.textContent="";const r=s||document.createTextNode("");if(e.length){let i=!1;for(let c=e.length-1;c>=0;c--){const o=e[c];if(r!==o){const T=o.parentNode===t;!i&&!c?T?t.replaceChild(r,o):t.insertBefore(r,n):T&&o.remove()}else i=!0}}else t.insertBefore(r,n);return[r]}function A(t,e,...n){const s=document.createElement(t);return e instanceof Node?s.append(e):typeof e=="string"?s.append(pe(e)):Array.isArray(e)?s.append(...e):(Object.assign(s,e),Object.assign(s.style,e?.style)),s.append(...n),s}function pe(t){return document.createTextNode(t)}function ge(t,e,n){const s=new MutationObserver((r,i)=>{for(const c of r)e(c,i)});return s.observe(t,{childList:!0,subtree:!0,...n}),()=>s.disconnect()}var ye=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function we(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Bt={exports:{}};(function(t,e){(function(n,s){t.exports=s()})(ye,function(){var n=1e3,s=6e4,r=36e5,i="millisecond",c="second",o="minute",T="hour",m="day",d="week",y="month",v="quarter",$="year",I="date",dt="Invalid Date",Je=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,Xe=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Ze={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(h){var l=["th","st","nd","rd"],a=h%100;return"["+h+(l[(a-20)%10]||l[a]||l[0])+"]"}},At=function(h,l,a){var f=String(h);return!f||f.length>=l?h:""+Array(l+1-f.length).join(a)+h},Qe={s:At,z:function(h){var l=-h.utcOffset(),a=Math.abs(l),f=Math.floor(a/60),u=a%60;return(l<=0?"+":"-")+At(f,2,"0")+":"+At(u,2,"0")},m:function h(l,a){if(l.date()<a.date())return-h(a,l);var f=12*(a.year()-l.year())+(a.month()-l.month()),u=l.clone().add(f,y),p=a-u<0,g=l.clone().add(f+(p?-1:1),y);return+(-(f+(a-u)/(p?u-g:g-u))||0)},a:function(h){return h<0?Math.ceil(h)||0:Math.floor(h)},p:function(h){return{M:y,y:$,w:d,d:m,D:I,h:T,m:o,s:c,ms:i,Q:v}[h]||String(h||"").toLowerCase().replace(/s$/,"")},u:function(h){return h===void 0}},J="en",Y={};Y[J]=Ze;var _t=function(h){return h instanceof mt},ht=function h(l,a,f){var u;if(!l)return J;if(typeof l=="string"){var p=l.toLowerCase();Y[p]&&(u=p),a&&(Y[p]=a,u=p);var g=l.split("-");if(!u&&g.length>1)return h(g[0])}else{var b=l.name;Y[b]=l,u=b}return!f&&u&&(J=u),u||!f&&J},k=function(h,l){if(_t(h))return h.clone();var a=typeof l=="object"?l:{};return a.date=h,a.args=arguments,new mt(a)},w=Qe;w.l=ht,w.i=_t,w.w=function(h,l){return k(h,{locale:l.$L,utc:l.$u,x:l.$x,$offset:l.$offset})};var mt=function(){function h(a){this.$L=ht(a.locale,null,!0),this.parse(a)}var l=h.prototype;return l.parse=function(a){this.$d=function(f){var u=f.date,p=f.utc;if(u===null)return new Date(NaN);if(w.u(u))return new Date;if(u instanceof Date)return new Date(u);if(typeof u=="string"&&!/Z$/i.test(u)){var g=u.match(Je);if(g){var b=g[2]-1||0,M=(g[7]||"0").substring(0,3);return p?new Date(Date.UTC(g[1],b,g[3]||1,g[4]||0,g[5]||0,g[6]||0,M)):new Date(g[1],b,g[3]||1,g[4]||0,g[5]||0,g[6]||0,M)}}return new Date(u)}(a),this.$x=a.x||{},this.init()},l.init=function(){var a=this.$d;this.$y=a.getFullYear(),this.$M=a.getMonth(),this.$D=a.getDate(),this.$W=a.getDay(),this.$H=a.getHours(),this.$m=a.getMinutes(),this.$s=a.getSeconds(),this.$ms=a.getMilliseconds()},l.$utils=function(){return w},l.isValid=function(){return this.$d.toString()!==dt},l.isSame=function(a,f){var u=k(a);return this.startOf(f)<=u&&u<=this.endOf(f)},l.isAfter=function(a,f){return k(a)<this.startOf(f)},l.isBefore=function(a,f){return this.endOf(f)<k(a)},l.$g=function(a,f,u){return w.u(a)?this[f]:this.set(u,a)},l.unix=function(){return Math.floor(this.valueOf()/1e3)},l.valueOf=function(){return this.$d.getTime()},l.startOf=function(a,f){var u=this,p=!!w.u(f)||f,g=w.p(a),b=function(U,C){var L=w.w(u.$u?Date.UTC(u.$y,C,U):new Date(u.$y,C,U),u);return p?L:L.endOf(m)},M=function(U,C){return w.w(u.toDate()[U].apply(u.toDate("s"),(p?[0,0,0,0]:[23,59,59,999]).slice(C)),u)},E=this.$W,D=this.$M,x=this.$D,P="set"+(this.$u?"UTC":"");switch(g){case $:return p?b(1,0):b(31,11);case y:return p?b(1,D):b(0,D+1);case d:var B=this.$locale().weekStart||0,X=(E<B?E+7:E)-B;return b(p?x-X:x+(6-X),D);case m:case I:return M(P+"Hours",0);case T:return M(P+"Minutes",1);case o:return M(P+"Seconds",2);case c:return M(P+"Milliseconds",3);default:return this.clone()}},l.endOf=function(a){return this.startOf(a,!1)},l.$set=function(a,f){var u,p=w.p(a),g="set"+(this.$u?"UTC":""),b=(u={},u[m]=g+"Date",u[I]=g+"Date",u[y]=g+"Month",u[$]=g+"FullYear",u[T]=g+"Hours",u[o]=g+"Minutes",u[c]=g+"Seconds",u[i]=g+"Milliseconds",u)[p],M=p===m?this.$D+(f-this.$W):f;if(p===y||p===$){var E=this.clone().set(I,1);E.$d[b](M),E.init(),this.$d=E.set(I,Math.min(this.$D,E.daysInMonth())).$d}else b&&this.$d[b](M);return this.init(),this},l.set=function(a,f){return this.clone().$set(a,f)},l.get=function(a){return this[w.p(a)]()},l.add=function(a,f){var u,p=this;a=Number(a);var g=w.p(f),b=function(D){var x=k(p);return w.w(x.date(x.date()+Math.round(D*a)),p)};if(g===y)return this.set(y,this.$M+a);if(g===$)return this.set($,this.$y+a);if(g===m)return b(1);if(g===d)return b(7);var M=(u={},u[o]=s,u[T]=r,u[c]=n,u)[g]||1,E=this.$d.getTime()+a*M;return w.w(E,this)},l.subtract=function(a,f){return this.add(-1*a,f)},l.format=function(a){var f=this,u=this.$locale();if(!this.isValid())return u.invalidDate||dt;var p=a||"YYYY-MM-DDTHH:mm:ssZ",g=w.z(this),b=this.$H,M=this.$m,E=this.$M,D=u.weekdays,x=u.months,P=u.meridiem,B=function(C,L,Z,pt){return C&&(C[L]||C(f,p))||Z[L].slice(0,pt)},X=function(C){return w.s(b%12||12,C,"0")},U=P||function(C,L,Z){var pt=C<12?"AM":"PM";return Z?pt.toLowerCase():pt};return p.replace(Xe,function(C,L){return L||function(Z){switch(Z){case"YY":return String(f.$y).slice(-2);case"YYYY":return w.s(f.$y,4,"0");case"M":return E+1;case"MM":return w.s(E+1,2,"0");case"MMM":return B(u.monthsShort,E,x,3);case"MMMM":return B(x,E);case"D":return f.$D;case"DD":return w.s(f.$D,2,"0");case"d":return String(f.$W);case"dd":return B(u.weekdaysMin,f.$W,D,2);case"ddd":return B(u.weekdaysShort,f.$W,D,3);case"dddd":return D[f.$W];case"H":return String(b);case"HH":return w.s(b,2,"0");case"h":return X(1);case"hh":return X(2);case"a":return U(b,M,!0);case"A":return U(b,M,!1);case"m":return String(M);case"mm":return w.s(M,2,"0");case"s":return String(f.$s);case"ss":return w.s(f.$s,2,"0");case"SSS":return w.s(f.$ms,3,"0");case"Z":return g}return null}(C)||g.replace(":","")})},l.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},l.diff=function(a,f,u){var p,g=this,b=w.p(f),M=k(a),E=(M.utcOffset()-this.utcOffset())*s,D=this-M,x=function(){return w.m(g,M)};switch(b){case $:p=x()/12;break;case y:p=x();break;case v:p=x()/3;break;case d:p=(D-E)/6048e5;break;case m:p=(D-E)/864e5;break;case T:p=D/r;break;case o:p=D/s;break;case c:p=D/n;break;default:p=D}return u?p:w.a(p)},l.daysInMonth=function(){return this.endOf(y).$D},l.$locale=function(){return Y[this.$L]},l.locale=function(a,f){if(!a)return this.$L;var u=this.clone(),p=ht(a,f,!0);return p&&(u.$L=p),u},l.clone=function(){return w.w(this.$d,this)},l.toDate=function(){return new Date(this.valueOf())},l.toJSON=function(){return this.isValid()?this.toISOString():null},l.toISOString=function(){return this.$d.toISOString()},l.toString=function(){return this.$d.toUTCString()},h}(),se=mt.prototype;return k.prototype=se,[["$ms",i],["$s",c],["$m",o],["$H",T],["$W",m],["$M",y],["$y",$],["$D",I]].forEach(function(h){se[h[1]]=function(l){return this.$g(l,h[0],h[1])}}),k.extend=function(h,l){return h.$i||(h(l,mt,k),h.$i=!0),k},k.locale=ht,k.isDayjs=_t,k.unix=function(h){return k(1e3*h)},k.en=Y[J],k.Ls=Y,k.p={},k})})(Bt);var Te=Bt.exports;const Tt=we(Te),be=t=>(e,n)=>(t.set(e,n),n),Ut=Number.MAX_SAFE_INTEGER===void 0?9007199254740991:Number.MAX_SAFE_INTEGER,qt=536870912,jt=qt*2,$e=(t,e)=>n=>{const s=e.get(n);let r=s===void 0?n.size:s<jt?s+1:0;if(!n.has(r))return t(n,r);if(n.size<qt){for(;n.has(r);)r=Math.floor(Math.random()*jt);return t(n,r)}if(n.size>Ut)throw new Error("Congratulations, you created a collection of unique numbers which uses all available integers!");for(;n.has(r);)r=Math.floor(Math.random()*Ut);return t(n,r)},Wt=new WeakMap,ve=be(Wt),lt=$e(ve,Wt),Me=t=>t.method!==void 0&&t.method==="call",Se=t=>t.error===null&&typeof t.id=="number",Ht=((t,e)=>{let n=null;return()=>{if(n!==null)return n;const s=new Blob([e],{type:"application/javascript; charset=utf-8"}),r=URL.createObjectURL(s);return n=t(r),setTimeout(()=>URL.revokeObjectURL(r)),n}})(t=>{const e=new Map([[0,()=>{}]]),n=new Map([[0,()=>{}]]),s=new Map,r=new Worker(t);return r.addEventListener("message",({data:m})=>{if(Me(m)){const{params:{timerId:d,timerType:y}}=m;if(y==="interval"){const v=e.get(d);if(typeof v=="number"){const $=s.get(v);if($===void 0||$.timerId!==d||$.timerType!==y)throw new Error("The timer is in an undefined state.")}else if(typeof v<"u")v();else throw new Error("The timer is in an undefined state.")}else if(y==="timeout"){const v=n.get(d);if(typeof v=="number"){const $=s.get(v);if($===void 0||$.timerId!==d||$.timerType!==y)throw new Error("The timer is in an undefined state.")}else if(typeof v<"u")v(),n.delete(d);else throw new Error("The timer is in an undefined state.")}}else if(Se(m)){const{id:d}=m,y=s.get(d);if(y===void 0)throw new Error("The timer is in an undefined state.");const{timerId:v,timerType:$}=y;s.delete(d),$==="interval"?e.delete(v):n.delete(v)}else{const{error:{message:d}}=m;throw new Error(d)}}),{clearInterval:m=>{const d=lt(s);s.set(d,{timerId:m,timerType:"interval"}),e.set(m,d),r.postMessage({id:d,method:"clear",params:{timerId:m,timerType:"interval"}})},clearTimeout:m=>{const d=lt(s);s.set(d,{timerId:m,timerType:"timeout"}),n.set(m,d),r.postMessage({id:d,method:"clear",params:{timerId:m,timerType:"timeout"}})},setInterval:(m,d)=>{const y=lt(e);return e.set(y,()=>{m(),typeof e.get(y)=="function"&&r.postMessage({id:null,method:"set",params:{delay:d,now:performance.now(),timerId:y,timerType:"interval"}})}),r.postMessage({id:null,method:"set",params:{delay:d,now:performance.now(),timerId:y,timerType:"interval"}}),y},setTimeout:(m,d)=>{const y=lt(n);return n.set(y,m),r.postMessage({id:null,method:"set",params:{delay:d,now:performance.now(),timerId:y,timerType:"timeout"}}),y}}},`(()=>{"use strict";const e=new Map,t=new Map,r=(e,t)=>{let r,o;const i=performance.now();r=i,o=e-Math.max(0,i-t);return{expected:r+o,remainingDelay:o}},o=(e,t,r,i)=>{const s=performance.now();s>r?postMessage({id:null,method:"call",params:{timerId:t,timerType:i}}):e.set(t,setTimeout(o,r-s,e,t,r,i))};addEventListener("message",(i=>{let{data:s}=i;try{if("clear"===s.method){const{id:r,params:{timerId:o,timerType:i}}=s;if("interval"===i)(t=>{const r=e.get(t);if(void 0===r)throw new Error('There is no interval scheduled with the given id "'.concat(t,'".'));clearTimeout(r),e.delete(t)})(o),postMessage({error:null,id:r});else{if("timeout"!==i)throw new Error('The given type "'.concat(i,'" is not supported'));(e=>{const r=t.get(e);if(void 0===r)throw new Error('There is no timeout scheduled with the given id "'.concat(e,'".'));clearTimeout(r),t.delete(e)})(o),postMessage({error:null,id:r})}}else{if("set"!==s.method)throw new Error('The given method "'.concat(s.method,'" is not supported'));{const{params:{delay:i,now:n,timerId:a,timerType:d}}=s;if("interval"===d)((t,i,s)=>{const{expected:n,remainingDelay:a}=r(t,s);e.set(i,setTimeout(o,a,e,i,n,"interval"))})(i,a,n);else{if("timeout"!==d)throw new Error('The given type "'.concat(d,'" is not supported'));((e,i,s)=>{const{expected:n,remainingDelay:a}=r(e,s);t.set(i,setTimeout(o,a,t,i,n,"timeout"))})(i,a,n)}}}}catch(e){postMessage({error:{message:e.message},id:s.id,result:null})}}))})();`),Vt=t=>Ht().clearInterval(t),bt=(t,e)=>Ht().setInterval(t,e),W=1e3,H=W*60,V=H*60,R=V*24,ke=R*7,Ee=R*365.25;function $t(t,e){try{if(typeof t=="string"&&t.length>0)return Ae(t);if(typeof t=="number"&&isFinite(t))return e?.long?De(t):_e(t);throw new Error("Value is not a string or number.")}catch(n){const s=Ce(n)?`${n.message}. value=${JSON.stringify(t)}`:"An unknown error has occured.";throw new Error(s)}}function Ae(t){if(t=String(t),t.length>100)throw new Error("Value exceeds the maximum length of 100 characters.");const e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(!e)return NaN;const n=parseFloat(e[1]),s=(e[2]||"ms").toLowerCase();switch(s){case"years":case"year":case"yrs":case"yr":case"y":return n*Ee;case"weeks":case"week":case"w":return n*ke;case"days":case"day":case"d":return n*R;case"hours":case"hour":case"hrs":case"hr":case"h":return n*V;case"minutes":case"minute":case"mins":case"min":case"m":return n*H;case"seconds":case"second":case"secs":case"sec":case"s":return n*W;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return n;default:throw new Error(`The unit ${s} was matched, but no matching case exists.`)}}function _e(t){const e=Math.abs(t);return e>=R?`${Math.round(t/R)}d`:e>=V?`${Math.round(t/V)}h`:e>=H?`${Math.round(t/H)}m`:e>=W?`${Math.round(t/W)}s`:`${t}ms`}function De(t){const e=Math.abs(t);return e>=R?ct(t,e,R,"day"):e>=V?ct(t,e,V,"hour"):e>=H?ct(t,e,H,"minute"):e>=W?ct(t,e,W,"second"):`${t} ms`}function ct(t,e,n,s){const r=e>=n*1.5;return`${Math.round(t/n)} ${s}${r?"s":""}`}function Ce(t){return typeof t=="object"&&t!==null&&"message"in t}class Oe{constructor(e){this.storage=e}download(){const e=this.storage.taskList;if(!e.length){alert("\u041D\u0435\u0442\u0443 \u0434\u0430\u043D\u043D\u044B\u0445 \u0434\u043B\u044F \u044D\u043A\u0441\u043F\u043E\u0440\u0442\u0430.");return}const n=A("div");for(const{date:i,list:c,total:o}of e){let T=0;const m=A("table",{border:"1"}),d=A("div",{style:{display:"flex",gap:"4px",flexDirection:"column"}}),y=A("tr",A("th","Task Type"),A("th","Count"),A("th","Estimated Rating Time"));m.append(d,y);for(const{count:v,estimated:$,type:I}of c){T+=$;const dt=A("tr",A("td",I),A("td",`${v}`),A("td",$t($,{long:!0})));m.append(dt)}d.append(A("span",`Date: ${i}`),A("span",`Tasks ${o}`),A("span",`Estimated time: ${$t(T,{long:!0})}`)),n.append(A("div",m,A("hr")))}const s=new Blob([n.outerHTML],{type:"text/html"});A("a",{href:URL.createObjectURL(s),download:`tryrating-com-${new Date().toISOString()}.html`}).click()}}function Pt(t){return t=Math.abs(t),t>9?`${t}`:`0${t}`}const xe=".survey-meta-fields",Ie=".labeled-attribute__attribute",Gt={selector:".btn-success",text:"Submit Rating"},Le=".modal-container.visible",Ne="div[modalwrapref] > div",vt="tryrating-storage-v2",zt="Validation failed!";function Fe(){const t=document.querySelector(Le);if(!t)return;const e=t.querySelector(Ne);e&&e.textContent===zt&&(GM_notification({title:document.title,text:zt,highlight:!0,silent:!1,timeout:1e3}),t.querySelector("button")?.click())}function Kt(t){return t.split(/\s(?=\d)/).reduce((n,s)=>(n+=$t(s),n),0)}function Jt(t){const e=Pt(Math.floor(t/6e4)),n=Pt(Number((t%6e4/1e3).toFixed(0)));return`${e}:${n}`}const[Re,Xt]=q(0);class Ye{intervalId;get time(){return Re()}tick(){Xt(e=>e+1e3)}start(){this.intervalId&&(Vt(this.intervalId),Xt(0)),this.intervalId=bt(()=>this.tick(),1e3)}}const Mt=()=>[{date:Tt().format("DD.MM.YYYY"),total:0,list:[]}],[z,St]=q([]);class Be{constructor(){this.read()}get taskList(){return z()}read(){const e=GM_getValue(vt,Mt());St(e)}reset(){St(Mt()),GM_setValue(vt,z())}write(e){const n=this.getTaskList();n.total+=1;const s=n.list.find(i=>i.type===e.type);s?(s.count+=1,s.estimated+=e.estimated):n.list.push({count:1,type:e.type,estimated:e.estimated});const r=[n,...z().filter(i=>i.date!==n.date)];St(r),GM_setValue(vt,z())}getTaskList(){const e=Tt().format("DD.MM.YYYY"),n=z().find(s=>s.date===e);return n||Mt()[0]}}function Ue(){const[t,e]=q([]);function n(){const s=[],r=Array.from(document.querySelectorAll(Gt.selector));for(const i of r)i instanceof HTMLButtonElement&&i.textContent===Gt.text&&s.push(i);return e(s),s}return{findSubmitButtons:n,get submitButtons(){return t()}}}class qe{taskFields=null;onChangeTaskCallback=null;get values(){return this.taskFields}onChangeTask(e){this.onChangeTaskCallback=e}watch(){const e=document.querySelector(xe);if(!e)return;const n=Array.from(e.querySelectorAll(Ie));if(!n.length)return;const[s,r,i]=n,c={taskType:s.textContent,requestId:r.textContent,estimatedRatingTime:i.textContent.trim()};c.requestId!==this.taskFields?.requestId&&this.onChangeTaskCallback(c),this.taskFields=c}}const[Zt,Qt]=q(0);class je{intervalId;onEndCallback;onTickTimer(){const e=Zt()-1e3;Qt(e),e===0&&(this.onEndCallback(),this.stop())}get time(){return Zt()}onTimerEnd(e){this.onEndCallback=e}start(e){this.stop(),Qt(e),this.intervalId=bt(()=>this.onTickTimer(),1e3)}stop(){this.intervalId&&(Vt(this.intervalId),this.intervalId=null)}}const rn="",We=de('<div class="tryrating-container"><div>Timer: </div><div>Stopwatch: </div><div>Tasks: </div><button>Autosubmit'),[K,He]=q(!0);function kt(){He(!K())}const{findSubmitButtons:te}=Ue(),[Ve,Pe]=q(null),ft=new Be,Ge=new Oe(ft),Et=new je;Et.onTimerEnd(()=>{if(!K())return;const t=te();if(!t.length){console.error("submitButtons is not defined");return}t[0]?.click()});const ee=new Ye,ne=new qe;ne.onChangeTask(t=>{const e=Ve();e&&e.requestId!==t.requestId&&(K()||kt(),console.info("Current task is submitted:",e),ft.write({type:e.taskType,estimated:Kt(e.estimatedRatingTime)})),Pe(t),te();const n=Kt(t.estimatedRatingTime);Et.start(n),ee.start()});const ze=document.querySelector("#app-root");ge(ze,t=>{Fe()}),bt(()=>{ne.watch()},5e3),window.addEventListener("keydown",t=>{t.altKey&&t.key==="1"&&(t.preventDefault(),Ge.download()),t.altKey&&t.key==="2"&&(t.preventDefault(),confirm(`Reset data.
Are you sure?`)&&ft.reset()),t.ctrlKey&&t.code==="KeyO"&&(t.preventDefault(),kt())});const Ke=()=>{const t=yt(()=>Jt(Et.time)),e=yt(()=>Jt(ee.time)),n=yt(()=>{const s=Tt().format("DD.MM.YYYY");return ft.taskList.find(i=>i.date===s)?.total??"0"});return(()=>{const s=We(),r=s.firstChild;r.firstChild;const i=r.nextSibling;i.firstChild;const c=i.nextSibling;c.firstChild;const o=c.nextSibling;return at(r,t,null),at(i,e,null),at(c,n,null),o.$$click=()=>kt(),nt(()=>(K()?"#4CAF50":"#f44336")!=null?o.style.setProperty("background",K()?"#4CAF50":"#f44336"):o.style.removeProperty("background")),s})()};fe(()=>le(Ke,{}),document.body),he(["click"]),GM_addStyle(".tryrating-container{display:flex;color:#fff;padding-left:4px;gap:6px;position:absolute;z-index:9999999;background:#2e2c2f;font-size:12px;align-items:center;left:0;bottom:0;height:32px;justify-content:center}.tryrating-container>button{height:inherit;border:none;font-size:12px;background:#2e2c2f;color:#fff}")})();
